"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9459],{49459:function(e,r,t){t.r(r),t.d(r,{default:function(){return Ie}});var i=t(74165),n=t(1413),o=t(15861),s=t(37762),a=t(15671),l=t(43144),u=t(11752),p=t(61120),y=t(60136),d=t(29388),c=t(27366),f=t(80987),v=t(77178),h=t(10064),b=t(84652),g=t(93002),Z=t(32718),w=t(92026),_=t(97642),m=t(66978),S=t(35995),k=t(49861),C=(t(25243),t(38511)),j=t(69912),x=t(78952),O=t(30651),B=t(59147),I=t(15801),T=t(27961),F=t(11936),A=t(6061),E=t(29598),q=t(56811),L=t(54395),M=t(46784),N=t(71907),R=(t(63780),function(e){(0,y.Z)(t,e);var r=(0,d.Z)(t);function t(){var e;return(0,a.Z)(this,t),(e=r.apply(this,arguments)).type=null,e}return(0,l.Z)(t)}(M.wq));(0,c._)([(0,k.Cb)({type:String,readOnly:!0,json:{write:!0}})],R.prototype,"type",void 0);var P,V=R=(0,c._)([(0,j.j)("esri.layers.support.BuildingFilterAuthoringInfo")],R),K=P=function(e){(0,y.Z)(t,e);var r=(0,d.Z)(t);function t(){var e;return(0,a.Z)(this,t),(e=r.apply(this,arguments)).filterType=null,e.filterValues=null,e}return(0,l.Z)(t,[{key:"clone",value:function(){return new P({filterType:this.filterType,filterValues:(0,b.d9)(this.filterValues)})}}]),t}(M.wq);(0,c._)([(0,k.Cb)({type:String,json:{write:!0}})],K.prototype,"filterType",void 0),(0,c._)([(0,k.Cb)({type:[String],json:{write:!0}})],K.prototype,"filterValues",void 0);var J,U=K=P=(0,c._)([(0,j.j)("esri.layers.support.BuildingFilterAuthoringInfoType")],K),H=f.Z.ofType(U),G=J=function(e){(0,y.Z)(t,e);var r=(0,d.Z)(t);function t(){return(0,a.Z)(this,t),r.apply(this,arguments)}return(0,l.Z)(t,[{key:"clone",value:function(){return new J({filterTypes:(0,b.d9)(this.filterTypes)})}}]),t}(M.wq);(0,c._)([(0,k.Cb)({type:H,json:{write:!0}})],G.prototype,"filterTypes",void 0);var W,z=G=J=(0,c._)([(0,j.j)("esri.layers.support.BuildingFilterAuthoringInfoBlock")],G),D=f.Z.ofType(z),X=W=function(e){(0,y.Z)(t,e);var r=(0,d.Z)(t);function t(){var e;return(0,a.Z)(this,t),(e=r.apply(this,arguments)).type="checkbox",e}return(0,l.Z)(t,[{key:"clone",value:function(){return new W({filterBlocks:(0,b.d9)(this.filterBlocks)})}}]),t}(V);(0,c._)([(0,k.Cb)({type:["checkbox"]})],X.prototype,"type",void 0),(0,c._)([(0,k.Cb)({type:D,json:{write:!0}})],X.prototype,"filterBlocks",void 0);var Y=X=W=(0,c._)([(0,j.j)("esri.layers.support.BuildingFilterAuthoringInfoCheckbox")],X),Q=function(e){(0,y.Z)(t,e);var r=(0,d.Z)(t);function t(){return(0,a.Z)(this,t),r.apply(this,arguments)}return(0,l.Z)(t)}(M.wq);(0,c._)([(0,k.Cb)({readOnly:!0,json:{read:!1}})],Q.prototype,"type",void 0);var $,ee=Q=(0,c._)([(0,j.j)("esri.layers.support.BuildingFilterMode")],Q),re=$=function(e){(0,y.Z)(t,e);var r=(0,d.Z)(t);function t(){var e;return(0,a.Z)(this,t),(e=r.apply(this,arguments)).type="solid",e}return(0,l.Z)(t,[{key:"clone",value:function(){return new $}}]),t}(ee);(0,c._)([(0,k.Cb)({type:["solid"],readOnly:!0,json:{write:!0}})],re.prototype,"type",void 0);var te,ie=re=$=(0,c._)([(0,j.j)("esri.layers.support.BuildingFilterModeSolid")],re),ne=t(27135),oe=t(68901),se=te=function(e){(0,y.Z)(t,e);var r=(0,d.Z)(t);function t(){var e;return(0,a.Z)(this,t),(e=r.apply(this,arguments)).type="wire-frame",e.edges=null,e}return(0,l.Z)(t,[{key:"clone",value:function(){return new te({edges:(0,b.d9)(this.edges)})}}]),t}(ee);(0,c._)([(0,ne.J)({wireFrame:"wire-frame"})],se.prototype,"type",void 0),(0,c._)([(0,k.Cb)(oe.Z)],se.prototype,"edges",void 0);var ae,le=se=te=(0,c._)([(0,j.j)("esri.layers.support.BuildingFilterModeWireFrame")],se),ue=ae=function(e){(0,y.Z)(t,e);var r=(0,d.Z)(t);function t(){var e;return(0,a.Z)(this,t),(e=r.apply(this,arguments)).type="x-ray",e}return(0,l.Z)(t,[{key:"clone",value:function(){return new ae}}]),t}(ee);(0,c._)([(0,k.Cb)({type:["x-ray"],readOnly:!0,json:{write:!0}})],ue.prototype,"type",void 0);var pe,ye=ue=ae=(0,c._)([(0,j.j)("esri.layers.support.BuildingFilterModeXRay")],ue),de={nonNullable:!0,types:{key:"type",base:ee,typeMap:{solid:ie,"wire-frame":le,"x-ray":ye}},json:{read:function(e){switch(e&&e.type){case"solid":return ie.fromJSON(e);case"wireFrame":return le.fromJSON(e);case"x-ray":return ye.fromJSON(e);default:return}},write:{enabled:!0,isRequired:!0}}},ce=pe=function(e){(0,y.Z)(t,e);var r=(0,d.Z)(t);function t(){var e;return(0,a.Z)(this,t),(e=r.apply(this,arguments)).filterExpression=null,e.filterMode=new ie,e.title="",e}return(0,l.Z)(t,[{key:"clone",value:function(){return new pe({filterExpression:this.filterExpression,filterMode:(0,b.d9)(this.filterMode),title:this.title})}}]),t}(M.wq);(0,c._)([(0,k.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],ce.prototype,"filterExpression",void 0),(0,c._)([(0,k.Cb)(de)],ce.prototype,"filterMode",void 0),(0,c._)([(0,k.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],ce.prototype,"title",void 0);var fe,ve=ce=pe=(0,c._)([(0,j.j)("esri.layers.support.BuildingFilterBlock")],ce),he=f.Z.ofType(ve),be=fe=function(e){(0,y.Z)(t,e);var r=(0,d.Z)(t);function t(){var e;return(0,a.Z)(this,t),(e=r.apply(this,arguments)).description=null,e.filterBlocks=null,e.id=(0,N.D)(),e.name=null,e}return(0,l.Z)(t,[{key:"clone",value:function(){return new fe({description:this.description,filterBlocks:(0,b.d9)(this.filterBlocks),id:this.id,name:this.name,filterAuthoringInfo:(0,b.d9)(this.filterAuthoringInfo)})}}]),t}(M.wq);(0,c._)([(0,k.Cb)({type:String,json:{write:!0}})],be.prototype,"description",void 0),(0,c._)([(0,k.Cb)({type:he,json:{write:{enabled:!0,isRequired:!0}}})],be.prototype,"filterBlocks",void 0),(0,c._)([(0,k.Cb)({types:{key:"type",base:V,typeMap:{checkbox:Y}},json:{read:function(e){return"checkbox"===(e&&e.type)?Y.fromJSON(e):null},write:!0}})],be.prototype,"filterAuthoringInfo",void 0),(0,c._)([(0,k.Cb)({type:String,constructOnly:!0,json:{write:{enabled:!0,isRequired:!0}}})],be.prototype,"id",void 0),(0,c._)([(0,k.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],be.prototype,"name",void 0);var ge=be=fe=(0,c._)([(0,j.j)("esri.layers.support.BuildingFilter")],be),Ze=t(76200),we=t(54472),_e=t(67426),me=function(e){(0,y.Z)(t,e);var r=(0,d.Z)(t);function t(){var e;return(0,a.Z)(this,t),(e=r.apply(this,arguments)).fieldName=null,e.modelName=null,e.label=null,e.min=null,e.max=null,e.mostFrequentValues=null,e.subLayerIds=null,e}return(0,l.Z)(t)}(M.wq);(0,c._)([(0,k.Cb)({type:String})],me.prototype,"fieldName",void 0),(0,c._)([(0,k.Cb)({type:String})],me.prototype,"modelName",void 0),(0,c._)([(0,k.Cb)({type:String})],me.prototype,"label",void 0),(0,c._)([(0,k.Cb)({type:Number})],me.prototype,"min",void 0),(0,c._)([(0,k.Cb)({type:Number})],me.prototype,"max",void 0),(0,c._)([(0,k.Cb)({json:{read:function(e){return Array.isArray(e)&&(e.every((function(e){return"string"==typeof e}))||e.every((function(e){return"number"==typeof e})))?e.slice():null}}})],me.prototype,"mostFrequentValues",void 0),(0,c._)([(0,k.Cb)({type:[Number]})],me.prototype,"subLayerIds",void 0),me=(0,c._)([(0,j.j)("esri.layers.support.BuildingFieldStatistics")],me);var Se=function(e){(0,y.Z)(t,e);var r=(0,d.Z)(t);function t(){var e;return(0,a.Z)(this,t),(e=r.apply(this,arguments)).url=null,e}return(0,l.Z)(t,[{key:"fields",get:function(){return this.loaded||"loading"===this.loadStatus?this._get("fields"):(Z.Z.getLogger(this.declaredClass).error("building summary statistics are not loaded"),null)}},{key:"load",value:function(e){var r=(0,w.pC)(e)?e.signal:null;return this.addResolvingPromise(this._fetchService(r)),Promise.resolve(this)}},{key:"_fetchService",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(r){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ze.default)(this.url,{query:{f:"json"},responseType:"json",signal:r});case 2:t=e.sent.data,this.read(t,{origin:"service"});case 4:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()}]),t}(we.Z.LoadableMixin((0,_e.v)(M.wq)));(0,c._)([(0,k.Cb)({constructOnly:!0,type:String})],Se.prototype,"url",void 0),(0,c._)([(0,k.Cb)({readOnly:!0,type:[me],json:{read:{source:"summary"}}})],Se.prototype,"fields",null);var ke=Se=(0,c._)([(0,j.j)("esri.layers.support.BuildingSummaryStatistics")],Se),Ce=t(45948),je=t(34785),xe=f.Z.ofType(ge),Oe=(0,b.d9)(I.Z.sublayersProperty);Oe.json.origins["web-scene"]={type:[B.Z],write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}},Oe.json.origins["portal-item"]={type:[B.Z],write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}};var Be=function(e){(0,y.Z)(t,e);var r=(0,d.Z)(t);function t(e){var i;return(0,a.Z)(this,t),(i=r.call(this,e)).operationalLayerType="BuildingSceneLayer",i.allSublayers=new v.Z({getCollections:function(){return[i.sublayers]},getChildrenFunction:function(e){return"building-group"===e.type?e.sublayers:null}}),i.sublayers=null,i._sublayerOverrides=null,i.filters=new xe,i.activeFilterId=null,i.summaryStatistics=null,i.outFields=null,i.type="building-scene",i}return(0,l.Z)(t,[{key:"normalizeCtorArgs",value:function(e){return"string"==typeof e?{url:e}:null!==e&&void 0!==e?e:{}}},{key:"destroy",value:function(){this.allSublayers.destroy()}},{key:"readSublayers",value:function(e,r,t){var i=this,n=I.Z.readSublayers(e,r,t);return I.Z.forEachSublayer(n,(function(e){return e.layer=i})),this._sublayerOverrides&&(this.applySublayerOverrides(n,this._sublayerOverrides),this._sublayerOverrides=null),n}},{key:"applySublayerOverrides",value:function(e,r){var t=r.overrides,i=r.context;I.Z.forEachSublayer(e,(function(e){return e.read(t.get(e.id),i)}))}},{key:"readSublayerOverrides",value:function(e,r){var t,i=new Map,n=(0,s.Z)(e);try{for(n.s();!(t=n.n()).done;){var o,a=t.value;null!=a&&"object"==typeof a&&"number"==typeof a.id?i.set(a.id,a):null===(o=r.messages)||void 0===o||o.push(new h.Z("building-scene-layer:invalid-sublayer-override","Invalid value for sublayer override. Not an object or no id specified.",{value:a}))}}catch(l){n.e(l)}finally{n.f()}return{overrides:i,context:r}}},{key:"writeSublayerOverrides",value:function(e,r,t){var i=[];I.Z.forEachSublayer(this.sublayers,(function(e){var r=e.write({},t);Object.keys(r).length>1&&i.push(r)})),i.length>0&&(r.sublayers=i)}},{key:"writeUnappliedOverrides",value:function(e,r){r.sublayers=[],e.overrides.forEach((function(e){r.sublayers.push((0,b.d9)(e))}))}},{key:"write",value:function(e,r){return e=(0,u.Z)((0,p.Z)(t.prototype),"write",this).call(this,e,r),!r||"web-scene"!==r.origin&&"portal-item"!==r.origin||(this.sublayers?this.writeSublayerOverrides(this.sublayers,e,r):this._sublayerOverrides&&this.writeUnappliedOverrides(this._sublayerOverrides,e)),e}},{key:"read",value:function(e,r){if((0,u.Z)((0,p.Z)(t.prototype),"read",this).call(this,e,r),r&&("web-scene"===r.origin||"portal-item"===r.origin)&&null!=e&&Array.isArray(e.sublayers)){var i=this.readSublayerOverrides(e.sublayers,r);this.sublayers?this.applySublayerOverrides(this.sublayers,i):this._sublayerOverrides=i}}},{key:"readSummaryStatistics",value:function(e,r){if("string"==typeof r.statisticsHRef){var t,i=(0,S.v_)(null===(t=this.parsedUrl)||void 0===t?void 0:t.path,r.statisticsHRef);return new ke({url:i})}return null}},{key:"elevationInfo",set:function(e){this._set("elevationInfo",e),this._validateElevationInfo()}},{key:"load",value:function(e){var r=this,t=(0,w.pC)(e)?e.signal:null,i=this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(m.r9).then((function(){return r._fetchService(t)})).then((function(){return r._fetchAssociatedFeatureService(t)}));return this.addResolvingPromise(i),Promise.resolve(this)}},{key:"loadAll",value:function(){var e=this;return(0,g.G)(this,(function(r){I.Z.forEachSublayer(e.sublayers,(function(e){"building-group"!==e.type&&r(e)})),e.summaryStatistics&&r(e.summaryStatistics)}))}},{key:"saveAs",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(r,t){var o=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(L.xp.SAVE_AS,(0,n.Z)((0,n.Z)({},t),{},{getTypeKeywords:function(){return o._getTypeKeywords()},portalItemLayerType:"building-scene"}),r));case 1:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var r,t=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={getTypeKeywords:function(){return t._getTypeKeywords()},portalItemLayerType:"building-scene"},e.abrupt("return",this._debouncedSaveOperations(L.xp.SAVE,r));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateLayer",value:function(e){if(!e.layerType||"Building"!==e.layerType)throw new h.Z("buildingscenelayer:layer-type-not-supported","BuildingSceneLayer does not support this layer type",{layerType:e.layerType})}},{key:"_getTypeKeywords",value:function(){return["Building"]}},{key:"_validateElevationInfo",value:function(){var e=this.elevationInfo;e&&("absolute-height"!==e.mode&&Z.Z.getLogger(this.declaredClass).warn(".elevationInfo=","Building scene layers only support absolute-height elevation mode"),e.featureExpressionInfo&&"0"!==e.featureExpressionInfo.expression&&Z.Z.getLogger(this.declaredClass).warn(".elevationInfo=","Building scene layers do not support featureExpressionInfo"))}},{key:"_fetchAssociatedFeatureService",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(r){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new je.W(this.parsedUrl,this.portalItem,this.apiKey,r),e.prev=1,e.next=4,t.fetchPortalItem();case 4:this.associatedFeatureServiceItem=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Z.Z.getLogger(this.declaredClass).warn("Associated feature service item could not be loaded",e.t0);case 10:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(r){return e.apply(this,arguments)}}()}]),t}((0,L.Vt)((0,F.Y)((0,A.q)((0,E.I)((0,q.M)((0,_.R)((0,T.V)(O.Z))))))));(0,c._)([(0,k.Cb)({type:["BuildingSceneLayer"]})],Be.prototype,"operationalLayerType",void 0),(0,c._)([(0,k.Cb)({readOnly:!0})],Be.prototype,"allSublayers",void 0),(0,c._)([(0,k.Cb)(Oe)],Be.prototype,"sublayers",void 0),(0,c._)([(0,C.r)("service","sublayers")],Be.prototype,"readSublayers",null),(0,c._)([(0,k.Cb)({type:xe,nonNullable:!0,json:{write:!0}})],Be.prototype,"filters",void 0),(0,c._)([(0,k.Cb)({type:String,json:{write:!0}})],Be.prototype,"activeFilterId",void 0),(0,c._)([(0,k.Cb)({readOnly:!0,type:ke})],Be.prototype,"summaryStatistics",void 0),(0,c._)([(0,C.r)("summaryStatistics",["statisticsHRef"])],Be.prototype,"readSummaryStatistics",null),(0,c._)([(0,k.Cb)({type:[String],json:{read:!1}})],Be.prototype,"outFields",void 0),(0,c._)([(0,k.Cb)(Ce.vg)],Be.prototype,"fullExtent",void 0),(0,c._)([(0,k.Cb)({type:["show","hide","hide-children"]})],Be.prototype,"listMode",void 0),(0,c._)([(0,k.Cb)((0,Ce.Lx)(x.Z))],Be.prototype,"spatialReference",void 0),(0,c._)([(0,k.Cb)(Ce.PV)],Be.prototype,"elevationInfo",null),(0,c._)([(0,k.Cb)({json:{read:!1},readOnly:!0})],Be.prototype,"type",void 0),(0,c._)([(0,k.Cb)()],Be.prototype,"associatedFeatureServiceItem",void 0);var Ie=Be=(0,c._)([(0,j.j)("esri.layers.BuildingSceneLayer")],Be)},15801:function(e,r,t){t.d(r,{Z:function(){return w}});var i,n=t(15671),o=t(43144),s=t(60136),a=t(29388),l=t(27366),u=t(80987),p=t(93002),y=t(51370),d=t(49861),c=(t(25243),t(63780),t(69912)),f=t(59147),v=t(58550),h={type:u.Z,readOnly:!0,json:{origins:{service:{read:{source:"sublayers",reader:b}}},read:!1}};function b(e,r,t){if(e&&Array.isArray(e))return new u.Z(e.map((function(e){var r=function(e){return"group"===e.layerType?Z:f.Z}(e);if(r){var i=new r;return i.read(e,t),i}return t&&t.messages&&e&&t.messages.push(new y.Z("building-scene-layer:unsupported-sublayer-type","Building scene sublayer of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:t})),null})))}var g,Z=i=function(e){(0,s.Z)(t,e);var r=(0,a.Z)(t);function t(e){var i;return(0,n.Z)(this,t),(i=r.call(this,e)).type="building-group",i.listMode="show",i.sublayers=null,i}return(0,o.Z)(t,[{key:"loadAll",value:function(){var e=this;return(0,p.w)(this,(function(r){return i.forEachSublayer(e.sublayers,(function(e){"building-group"!==e.type&&r(e)}))}))}}]),t}(v.Z);(0,l._)([(0,d.Cb)({type:["hide","show","hide-children"],json:{write:!0}})],Z.prototype,"listMode",void 0),(0,l._)([(0,d.Cb)(h)],Z.prototype,"sublayers",void 0),Z=i=(0,l._)([(0,c.j)("esri.layers.buildingSublayers.BuildingGroupSublayer")],Z),(g=Z||(Z={})).sublayersProperty=h,g.readSublayers=b,g.forEachSublayer=function e(r,t){r.forEach((function(r){t(r),"building-group"===r.type&&e(r.sublayers,t)}))};var w=Z}}]);
//# sourceMappingURL=9459.d76c4d91.chunk.js.map