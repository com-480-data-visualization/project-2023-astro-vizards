"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2785],{42785:function(e,r,t){t.r(r),t.d(r,{default:function(){return O}});var n=t(74165),i=t(15861),a=t(1413),o=t(15671),l=t(43144),s=t(60136),u=t(29388),c=t(27366),p=t(76200),d=t(10064),y=t(92026),v=t(97642),h=t(66978),f=t(35995),w=t(49861),g=(t(25243),t(63780),t(38511)),_=t(69912),b=t(90724),m=t(30651),k=t(17775),C=t(11936),S=t(6061),Z=t(29598),T=t(45948),x=t(48932),I=t(41665),D=function(e){(0,s.Z)(c,e);var r=(0,u.Z)(c);function c(){var e;(0,o.Z)(this,c);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).copyright=null,e.heightModelInfo=null,e.path=null,e.minScale=void 0,e.maxScale=void 0,e.opacity=1,e.operationalLayerType="ArcGISTiledElevationServiceLayer",e.sourceJSON=null,e.type="elevation",e.url=null,e.version=null,e._lercDecoder=(0,I.w)(),e}return(0,l.Z)(c,[{key:"normalizeCtorArgs",value:function(e,r){return"string"==typeof e?(0,a.Z)({url:e},r):e}},{key:"destroy",value:function(){this._lercDecoder=(0,y.RY)(this._lercDecoder)}},{key:"readVersion",value:function(e,r){var t=r.currentVersion;return t||(t=9.3),t}},{key:"load",value:function(e){var r=this,t=(0,y.pC)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(e){for(var r=0;r<e.typeKeywords.length;r++)if("elevation 3d layer"===e.typeKeywords[r].toLowerCase())return!0;throw new d.Z("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}},e).catch(h.r9).then((function(){return r._fetchImageService(t)}))),Promise.resolve(this)}},{key:"fetchTile",value:function(e,r,t,n){var i=this,a=(0,y.pC)((n=n||{signal:null}).signal)?n.signal:n.signal=(new AbortController).signal,o={responseType:"array-buffer",signal:a},l={noDataValue:n.noDataValue,returnFileInfo:!0};return this.load().then((function(){return i._fetchTileAvailability(e,r,t,n)})).then((function(){return(0,p.default)(i.getTileUrl(e,r,t),o)})).then((function(e){return i._lercDecoder.decode(e.data,l,a)})).then((function(e){return new x.v(e)}))}},{key:"getTileUrl",value:function(e,r,t){var n=!this.tilemapCache&&this.supportsBlankTile,i=(0,f.B7)((0,a.Z)((0,a.Z)({},this.parsedUrl.query),{},{blankTile:!n&&null}));return"".concat(this.parsedUrl.path,"/tile/").concat(e,"/").concat(r,"/").concat(t).concat(i?"?"+i:"")}},{key:"queryElevation",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r,i){var a,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(7165).then(t.bind(t,67165));case 2:return a=e.sent,o=a.ElevationQuery,(0,h.k_)(i),e.abrupt("return",(new o).query(this,r,i));case 6:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"createElevationSampler",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r,i){var a,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(7165).then(t.bind(t,67165));case 2:return a=e.sent,o=a.ElevationQuery,(0,h.k_)(i),e.abrupt("return",(new o).createSampler(this,r,i));case 6:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"_fetchTileAvailability",value:function(e,r,t,n){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,r,t,n):Promise.resolve("unknown")}},{key:"_fetchImageService",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var t,i,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sourceJSON){e.next=2;break}return e.abrupt("return",this.sourceJSON);case 2:return i={query:(0,a.Z)({f:"json"},this.parsedUrl.query),responseType:"json",signal:r},e.next=5,(0,p.default)(this.parsedUrl.path,i);case 5:(o=e.sent).ssl&&(this.url=null===(t=this.url)||void 0===t?void 0:t.replace(/^http:/i,"https:")),this.sourceJSON=o.data,this.read(o.data,{origin:"service",url:this.parsedUrl});case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"hasOverriddenFetchTile",get:function(){return!this.fetchTile.__isDefault__}}]),c}((0,k.Z)((0,C.Y)((0,S.q)((0,Z.I)((0,v.R)(m.Z))))));(0,c._)([(0,w.Cb)({json:{read:{source:"copyrightText"}}})],D.prototype,"copyright",void 0),(0,c._)([(0,w.Cb)({readOnly:!0,type:b.Z})],D.prototype,"heightModelInfo",void 0),(0,c._)([(0,w.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],D.prototype,"path",void 0),(0,c._)([(0,w.Cb)({type:["show","hide"]})],D.prototype,"listMode",void 0),(0,c._)([(0,w.Cb)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}},readOnly:!0})],D.prototype,"minScale",void 0),(0,c._)([(0,w.Cb)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}},readOnly:!0})],D.prototype,"maxScale",void 0),(0,c._)([(0,w.Cb)({json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],D.prototype,"opacity",void 0),(0,c._)([(0,w.Cb)({type:["ArcGISTiledElevationServiceLayer"]})],D.prototype,"operationalLayerType",void 0),(0,c._)([(0,w.Cb)()],D.prototype,"sourceJSON",void 0),(0,c._)([(0,w.Cb)({json:{read:!1},value:"elevation",readOnly:!0})],D.prototype,"type",void 0),(0,c._)([(0,w.Cb)(T.HQ)],D.prototype,"url",void 0),(0,c._)([(0,w.Cb)()],D.prototype,"version",void 0),(0,c._)([(0,g.r)("version",["currentVersion"])],D.prototype,"readVersion",null),(D=(0,c._)([(0,_.j)("esri.layers.ElevationLayer")],D)).prototype.fetchTile.__isDefault__=!0;var O=D}}]);
//# sourceMappingURL=2785.164cd11e.chunk.js.map