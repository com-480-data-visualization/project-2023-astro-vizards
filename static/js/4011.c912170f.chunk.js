"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4011],{28278:function(e,t,r){r.d(t,{Es:function(){return g},I_:function(){return v},W7:function(){return b},qM:function(){return m}});var n=r(1413),o=r(37762),a=r(10064),i=r(84652),u=r(32718),c=r(2821),s=r(4760),l=u.Z.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function f(e,t,r){for(var n="",o=0;o<r;){var i=e[t+o];if(i<128)n+=String.fromCharCode(i),o++;else if(i>=192&&i<224){if(o+1>=r)throw new a.Z("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");var u=(31&i)<<6|63&e[t+o+1];n+=String.fromCharCode(u),o+=2}else if(i>=224&&i<240){if(o+2>=r)throw new a.Z("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");var c=(15&i)<<12|(63&e[t+o+1])<<6|63&e[t+o+2];n+=String.fromCharCode(c),o+=3}else{if(!(i>=240&&i<248))throw new a.Z("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");if(o+3>=r)throw new a.Z("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");var s=(7&i)<<18|(63&e[t+o+1])<<12|(63&e[t+o+2])<<6|63&e[t+o+3];if(s>=65536){var l=55296+(s-65536>>10),f=56320+(1023&s);n+=String.fromCharCode(l,f)}else n+=String.fromCharCode(s);o+=4}}return n}function d(e,t){for(var r={byteOffset:0,byteCount:0,fields:Object.create(null)},n=0,o=0;o<t.length;o++){var a=t[o],i=a.valueType||a.type,u=M[i];r.fields[a.property]=u(e,n),n+=C[i].BYTES_PER_ELEMENT}return r.byteCount=n,r}function h(e,t,r){var n,o,i=[],u=0;for(o=0;o<e;o+=1){if((n=t[o])>0){if(i.push(f(r,u,n-1)),0!==r[u+n-1])throw new a.Z("string-array-error","Invalid string array: missing null termination.")}else i.push(null);u+=n}return i}function v(e,t){return new(0,C[t.valueType])(e,t.byteOffset,t.count*t.valuesPerElement)}function p(e,t,r){for(var n=null!=t.header?d(e,t.header):{byteOffset:0,byteCount:0,fields:{count:r}},o={header:n,byteOffset:n.byteCount,byteCount:0,entries:Object.create(null)},u=n.byteCount,c=0;c<t.ordering.length;c++){var s,l,f=t.ordering[c],h=(0,i.d9)(t[f]);if(h.count=null!==(s=n.fields.count)&&void 0!==s?s:0,"String"===h.valueType){if(h.byteOffset=u,h.byteCount=n.fields[f+"ByteCount"],"UTF-8"!==h.encoding)throw new a.Z("unsupported-encoding","Unsupported String encoding.",{encoding:h.encoding});if(h.timeEncoding&&"ECMA_ISO8601"!==h.timeEncoding)throw new a.Z("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:h.timeEncoding})}else{if(!S(h.valueType))throw new a.Z("unsupported-value-type","Unsupported binary valueType",{valueType:h.valueType});var v=Z(h.valueType);u+=u%v!=0?v-u%v:0,h.byteOffset=u,h.byteCount=v*h.valuesPerElement*h.count}u+=null!==(l=h.byteCount)&&void 0!==l?l:0,o.entries[f]=h}return o.byteCount=u-o.byteOffset,o}function y(e,t,r){if(t!==e&&l.error("Invalid ".concat(r," buffer size\n expected: ").concat(e,", actual: ").concat(t,")")),t<e)throw new a.Z("buffer-too-small","Binary buffer is too small",{expectedSize:e,actualSize:t})}function b(e,t){var r,a=d(e,t&&t.header),i=a.byteCount,u={isDraco:!1,header:a,byteOffset:a.byteCount,byteCount:0,vertexAttributes:{}},c=a.fields,s=null!=c.vertexCount?c.vertexCount:c.count,l=(0,o.Z)(t.ordering);try{for(l.s();!(r=l.n()).done;){var f=r.value;if(t.vertexAttributes[f]){var h=(0,n.Z)((0,n.Z)({},t.vertexAttributes[f]),{},{byteOffset:i,count:s}),v=w[f]?w[f]:"_"+f;u.vertexAttributes[v]=h,i+=Z(h.valueType)*h.valuesPerElement*s}}}catch(x){l.e(x)}finally{l.f()}var p=c.faceCount;if(t.faces&&p){u.faces={};var b,g=(0,o.Z)(t.ordering);try{for(g.s();!(b=g.n()).done;){var m=b.value;if(t.faces[m]){var C=(0,n.Z)((0,n.Z)({},t.faces[m]),{},{byteOffset:i,count:p});u.faces[m]=C,i+=Z(C.valueType)*C.valuesPerElement*p}}}catch(x){g.e(x)}finally{g.f()}}var M=c.featureCount;if(t.featureAttributes&&t.featureAttributeOrder&&M){u.featureAttributes={};var S,I=(0,o.Z)(t.featureAttributeOrder);try{for(I.s();!(S=I.n()).done;){var T=S.value;if(t.featureAttributes[T]){var U=(0,n.Z)((0,n.Z)({},t.featureAttributes[T]),{},{byteOffset:i,count:M});u.featureAttributes[T]=U,i+=("UInt64"===U.valueType?8:Z(U.valueType))*U.valuesPerElement*M}}}catch(x){I.e(x)}finally{I.f()}}return y(i,e.byteLength,"geometry"),u.byteCount=i-u.byteOffset,u}function g(e,t){return e&&e.compressedAttributes&&"draco"===e.compressedAttributes.encoding?function(e){var t,r={isDraco:!0,isLegacy:!1,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1},n=(0,o.Z)(e);try{for(n.s();!(t=n.n()).done;){switch(t.value){case"position":break;case"normal":r.normal=!0;break;case"uv0":r.uv0=!0;break;case"color":r.color=!0;break;case"uv-region":r.uvRegion=!0;break;case"feature-index":r.featureIndex=!0}}}catch(a){n.e(a)}finally{n.f()}return r}(e.compressedAttributes.attributes):e?function(e){return{isDraco:!1,isLegacy:!1,color:null!=e.color,normal:null!=e.normal,uv0:null!=e.uv0,uvRegion:null!=e.uvRegion,featureIndex:null!=e.faceRange&&null!=e.featureId}}(e):function(e){var t,r={isDraco:!1,isLegacy:!0,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1},n=(0,o.Z)(e.ordering);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(e.vertexAttributes[a])switch(a){case"position":break;case"normal":r.normal=!0;break;case"color":r.color=!0;break;case"uv0":r.uv0=!0;break;case"region":r.uvRegion=!0}}}catch(i){n.e(i)}finally{n.f()}return e.featureAttributes&&e.featureAttributeOrder&&(r.featureIndex=!0),r}(t)}var w={position:s.T.POSITION,normal:s.T.NORMAL,color:s.T.COLOR,uv0:s.T.UV0,region:s.T.UVREGION};function m(e,t,r){if("lepcc-rgb"===e.encoding)return(0,c.IT)(t);if("lepcc-intensity"===e.encoding)return(0,c.ti)(t);if(null!=e.encoding&&""!==e.encoding)throw new a.Z("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");e["attributeByteCounts "]&&!e.attributeByteCounts&&(l.warn("Warning: Trailing space in 'attributeByteCounts '."),e.attributeByteCounts=e["attributeByteCounts "]),"ObjectIds"===e.ordering[0]&&e.hasOwnProperty("objectIds")&&(l.warn("Warning: Case error in objectIds"),e.ordering[0]="objectIds");var n=p(t,e,r);y(n.byteOffset+n.byteCount,t.byteLength,"attribute");var o=n.entries.attributeValues||n.entries.objectIds;if(o){if("String"===o.valueType){var i=n.entries.attributeByteCounts,u=v(t,i),s=function(e,t){return new Uint8Array(e,t.byteOffset,t.byteCount)}(t,o);return o.timeEncoding?function(e,t,r){return h(e,t,r).map((function(e){var t=e?Date.parse(e):null;return t&&!Number.isNaN(t)?t:null}))}(i.count,u,s):h(i.count,u,s)}return v(t,o)}throw new a.Z("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}var C={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},M={Float32:function(e,t){return new DataView(e,0).getFloat32(t,!0)},Float64:function(e,t){return new DataView(e,0).getFloat64(t,!0)},UInt8:function(e,t){return new DataView(e,0).getUint8(t)},Int8:function(e,t){return new DataView(e,0).getInt8(t)},UInt16:function(e,t){return new DataView(e,0).getUint16(t,!0)},Int16:function(e,t){return new DataView(e,0).getInt16(t,!0)},UInt32:function(e,t){return new DataView(e,0).getUint32(t,!0)},Int32:function(e,t){return new DataView(e,0).getInt32(t,!0)}};function S(e){return C.hasOwnProperty(e)}function Z(e){return S(e)?C[e].BYTES_PER_ELEMENT:0}},47570:function(e,t,r){r.d(t,{c:function(){return u},n:function(){return l}});var n=r(81949),o=r(71353),a=r(83448),i=r(79803);function u(e,t,r,o){var a=l(e,t,r),u=(0,n.c)();return(0,i.Bm)(r,a,u,o),u}var c=1,s=5-c;function l(e,t,r){var n=(0,o.c)(),i=e[3],u=Math.pow(2,Math.ceil(Math.log(i)*Math.LOG2E/s)*s+c);if(r.isGeographic){var l=u/(0,a.Iu)(r).radius*180/Math.PI,f=Math.round(e[1]/l),d=Math.max(-90,Math.min(90,f*l)),h=l/Math.cos((Math.abs(d)-l/2)/180*Math.PI),v=Math.round(e[0]/h)*h;n[0]=v,n[1]=d}else{var p=Math.round(e[0]/u),y=Math.round(e[1]/u);n[0]=p*u,n[1]=y*u}var b=e[2]+t,g=Math.round(b/u);return n[2]=g*u,n}},44011:function(e,t,r){r.d(t,{Cx:function(){return Ue},HV:function(){return we},Jf:function(){return ue},Jx:function(){return ne},OJ:function(){return se},T2:function(){return ae},VL:function(){return Ae},WD:function(){return ke},X5:function(){return D},Yb:function(){return N},a7:function(){return pe},bf:function(){return X},c$:function(){return Ee},cr:function(){return V},e8:function(){return Y},ei:function(){return ie},gn:function(){return fe},hv:function(){return P},ix:function(){return ge},jv:function(){return me},ns:function(){return _},p8:function(){return le},pD:function(){return q},tS:function(){return B},tp:function(){return oe},tq:function(){return ce},uC:function(){return ye},vH:function(){return xe},xe:function(){return ee},yS:function(){return he},zW:function(){return de}});var n=r(74165),o=r(43144),a=r(15671),i=r(15861),u=r(37762),c=r(76200),s=r(63780),l=r(10064),f=r(93169),d=r(92026),h=r(66978),v=r(18722),p=r(22753),y=r(11873),b=r(14226),g=r(81949),w=r(48976),m=r(4582),C=r(11186),M=r(71353),S=r(83448),Z=r(79803),I=r(78952),T=r(29691),U=r(65156),x=r(92975),E=r(86638),A=r(28278),k=r(47570),z=r(97689),L=r(49420),O=r(89414),R=r(91526);function F(e){return e?parseInt(e.substring(e.lastIndexOf("/")+1,e.length),10):void 0}function D(e){if((0,f.Z)("disable-feature:i3s-draco")||!e)return!1;var t,r=(0,u.Z)(e);try{for(r.s();!(t=r.n()).done;){var n,o=t.value,a=(0,u.Z)(o.geometryBuffers);try{for(a.s();!(n=a.n()).done;){var i;if("draco"===(null===(i=n.value.compressedAttributes)||void 0===i?void 0:i.encoding))return!0}}catch(c){a.e(c)}finally{a.f()}}}catch(c){r.e(c)}finally{r.f()}return!1}function B(e,t,r,n){r.traverse(t,(function(t){var r=t.mbs;return(null!=r&&V(e,r))!==q.OUTSIDE&&(n(t),!0)}))}function P(e,t,r){for(var n=0,o=0,a=0;a<t.length&&n<e.length;a++)e[n]===t[a]&&(r(a)&&(e[o]=e[n],o++),n++);e.length=o}function N(e,t,r){for(var n=0,o=0;n<r.length;)(0,s.$A)(e,r[n])>=0===t&&(r[o]=r[n],o++),n++;r.length=o}var q,W,H=(0,U.Ue)();function _(e,t){if(0===t.rotationScale[1]&&0===t.rotationScale[2]&&0===t.rotationScale[3]&&0===t.rotationScale[5]&&0===t.rotationScale[6]&&0===t.rotationScale[7])return H[0]=(e[0]-t.position[0])/t.rotationScale[0],H[1]=(e[1]-t.position[1])/t.rotationScale[4],H[2]=(e[2]-t.position[0])/t.rotationScale[0],H[3]=(e[3]-t.position[1])/t.rotationScale[4],H}function V(e,t){var r=t[0],n=t[1],o=t[3],a=e[0]-r,i=r-e[2],u=e[1]-n,c=n-e[3],s=Math.max(a,i,0),l=Math.max(u,c,0),f=s*s+l*l;return f>o*o?q.OUTSIDE:f>0?q.INTERSECTS_CENTER_OUTSIDE:-Math.max(a,i,u,c)>o?q.INSIDE:q.INTERSECTS_CENTER_INSIDE}function Y(e,t,r){var n,o=[],a=r&&r.missingFields,i=r&&r.originalFields,c=(0,u.Z)(e);try{for(c.s();!(n=c.n()).done;){var s,l=n.value,f=l.toLowerCase(),d=!1,h=(0,u.Z)(t);try{for(h.s();!(s=h.n()).done;){var v=s.value;if(f===v.name.toLowerCase()){o.push(v.name),d=!0,i&&i.push(l);break}}}catch(p){h.e(p)}finally{h.f()}!d&&a&&a.push(l)}}catch(p){c.e(p)}finally{c.f()}return o}function X(e,t,r,n,o){return G.apply(this,arguments)}function G(){return(G=(0,i.Z)((0,n.Z)().mark((function e(t,r,o,a,i){var u,c,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.length){e.next=2;break}return e.abrupt("return",[]);case 2:if(u=t.attributeStorageInfo,!(0,d.pC)(t.associatedLayer)){e.next=14;break}return e.prev=4,e.next=7,K(t.associatedLayer,r,o,a);case 7:return e.abrupt("return",e.sent);case 10:if(e.prev=10,e.t0=e.catch(4),!t.associatedLayer.loaded){e.next=14;break}throw e.t0;case 14:if(!u){e.next=22;break}if(c=j(r,o,i),!(0,d.Wi)(c)){e.next=18;break}throw new l.Z("scenelayer:features-not-loaded","Tried to query attributes for unloaded features");case 18:return s=t.parsedUrl.path,e.next=21,Promise.all(c.map((function(e){return J(s,u,e.node,e.indices,a).then((function(t){for(var r=0;r<e.graphics.length;r++){var n=e.graphics[r],o=t[r];if(n.attributes)for(var a in n.attributes)a in o||(o[a]=n.attributes[a]);n.attributes=o}return e.graphics}))})));case 21:return e.abrupt("return",e.sent.flat());case 22:throw new l.Z("scenelayer:no-attribute-source","This scene layer does not have a source for attributes available");case 23:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function j(e,t,r){var n,o=new Map,a=[],i=r(),c=(0,u.Z)(e);try{for(c.s();!(n=c.n()).done;)for(var s=n.value,l=s.attributes[t],f=0;f<i.length;f++){var d=i[f],h=d.featureIds.indexOf(l);if(h>=0){var v=o.get(d.node);v||(v={node:d.node,indices:[],graphics:[]},a.push(v),o.set(d.node,v)),v.indices.push(h),v.graphics.push(s);for(var p=f;p>0;p--)i[p]=i[p-1];i[0]=d;break}}}catch(y){c.e(y)}finally{c.f()}return a}function K(e,t,r,n){return $.apply(this,arguments)}function $(){return($=(0,i.Z)((0,n.Z)().mark((function e(t,r,o,a){var i,u,c,s,l,f,d,h,v,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.sort((function(e,t){return e.attributes[o]-t.attributes[o]})),i=r.map((function(e){return e.attributes[o]})),u=[],c=Y(a,t.fields,{originalFields:u}),e.next=6,Q(t,i,c);case 6:for(s=e.sent,l=0;l<r.length;l++){if(f=r[l],d=s[l],h={},f.attributes)for(v in f.attributes)h[v]=f.attributes[v];for(p=0;p<u.length;p++)h[u[p]]=d[c[p]];f.attributes=h}return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e,t,r){var n=e.capabilities.query.maxRecordCount;if(null!=n&&t.length>n){var o=(0,s.vr)(t,n);return Promise.all(o.map((function(t){return Q(e,t,r)}))).then((function(e){return e.flat()}))}var a=new E.Z({objectIds:t,outFields:r,orderByFields:[e.objectIdField]});return e.queryFeatures(a).then((function(e){if(e&&e.features&&e.features.length===t.length)return e.features.map((function(e){return e.attributes}));throw new l.Z("scenelayer:feature-not-in-associated-layer","Feature not found in associated feature layer")}))}function J(e,t,r,n,o){return ee(e,t,r.resources.attributes,n,o)}function ee(e,t,r,n,o){var a,i=[],s=(0,u.Z)(t);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(l&&o.includes(l.name)){var f="".concat(e,"/nodes/").concat(r,"/attributes/").concat(l.key,"/0");i.push({url:f,storageInfo:l})}}}catch(d){s.e(d)}finally{s.f()}return(0,h.as)(i.map((function(e){return(0,c.default)(e.url,{responseType:"array-buffer"}).then((function(t){return(0,A.qM)(e.storageInfo,t.data)}))}))).then((function(e){var t,r=[],o=(0,u.Z)(n);try{for(o.s();!(t=o.n()).done;){for(var a=t.value,c={},s=0;s<e.length;s++){var l=e[s].value;null!=l&&(c[i[s].storageInfo.name]=ne(l,a))}r.push(c)}}catch(d){o.e(d)}finally{o.f()}return r}))}(W=q||(q={}))[W.OUTSIDE=0]="OUTSIDE",W[W.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE",W[W.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE",W[W.INSIDE=3]="INSIDE";var te=-32768,re=-Math.pow(2,31);function ne(e,t){if(!e)return null;var r=e[t];return(0,v.z3)(e)?r===te?null:r:(0,v.Hx)(e)?r===re?null:r:r!=r?null:r}function oe(e){var t=e.store,r=t.indexCRS||t.geographicCRS,n=void 0===r?t.indexWKT:void 0;if(n){if(!e.spatialReference)throw new l.Z("layerview:no-store-spatial-reference-wkt-index-and-no-layer-spatial-reference","Found indeWKT in the scene layer store but no layer spatial reference",{});if(n!==e.spatialReference.wkt)throw new l.Z("layerview:store-spatial-reference-wkt-index-incompatible","The indeWKT of the scene layer store does not match the WKT of the layer spatial reference",{})}var o=r?new I.Z(F(r)):e.spatialReference;return o.equals(e.spatialReference)?e.spatialReference:o}function ae(e){var t=e.store,r=t.vertexCRS||t.projectedCRS,n=void 0===r?t.vertexWKT:void 0;if(n){if(!e.spatialReference)throw new l.Z("layerview:no-store-spatial-reference-wkt-vertex-and-no-layer-spatial-reference","Found vertexWKT in the scene layer store but no layer spatial reference",{});if(n!==e.spatialReference.wkt)throw new l.Z("layerview:store-spatial-reference-wkt-vertex-incompatible","The vertexWKT of the scene layer store does not match the WKT of the layer spatial reference",{})}var o=r?new I.Z(F(r)):e.spatialReference;return o.equals(e.spatialReference)?e.spatialReference:o}function ie(e,t){return(0,d.Wi)(t)?"@null":t===(0,T.rS)(t)?"@ECEF":e.equals(t)?"":null!=t.wkid?"@"+t.wkid:null}function ue(e,t,r){if(!(0,Z.Up)(e,t))throw new l.Z("layerview:spatial-reference-incompatible","The spatial reference of this scene layer is incompatible with the spatial reference of the view",{});if("local"===r&&!function(e,t){return e.equals(t)||e.isWGS84&&t.isWebMercator||e.isWebMercator&&t.isWGS84}(e,t))throw new l.Z("layerview:spatial-reference-incompatible","The spatial reference of this scene layer is incompatible with the spatial reference of the view",{})}function ce(e,t,r){var n,o;if((null===(n=e.serviceUpdateTimeStamp)||void 0===n?void 0:n.lastUpdate)!==(null===(o=t.serviceUpdateTimeStamp)||void 0===o?void 0:o.lastUpdate)||!r.isEmpty||(0,d.yw)(e.associatedLayer,(function(e){return e.url}))!==(0,d.yw)(t.associatedLayer,(function(e){return e.url})))throw new l.Z("layerview:recycle-failed")}function se(e,t,r){var n=oe(e),o=ae(e);ue(n,t,r),ue(o,t,r)}function le(e){if(null==e.store||null==e.store.defaultGeometrySchema||!function(e){return(null==e.geometryType||"triangles"===e.geometryType)&&(null==e.topology||"PerAttributeArray"===e.topology)&&null!=e.vertexAttributes&&null!=e.vertexAttributes.position}(e.store.defaultGeometrySchema))throw new l.Z("scenelayer:unsupported-geometry-schema","The geometry schema of this scene layer is not supported.",{url:e.parsedUrl.path})}function fe(e,t){se(e,t.spatialReference,t.viewingMode)}function de(e){if(null==e.store||null==e.store.defaultGeometrySchema||!function(e){return null!=e.geometryType&&"points"===e.geometryType&&(null==e.topology||"PerAttributeArray"===e.topology)&&(null==e.encoding||""===e.encoding||"lepcc-xyz"===e.encoding)&&null!=e.vertexAttributes&&null!=e.vertexAttributes.position}(e.store.defaultGeometrySchema))throw new l.Z("pointcloud:unsupported-geometry-schema","The geometry schema of this point cloud scene layer is not supported.",{})}function he(e,t){ue(e.spatialReference,t.spatialReference,t.viewingMode)}function ve(e){return"mesh-3d"===e.type}function pe(e){if(null==e||!function(e){return"simple"===e.type||"class-breaks"===e.type||"unique-value"===e.type}(e))return!0;if(("unique-value"===e.type||"class-breaks"===e.type)&&null==e.defaultSymbol)return!0;var t=e.getSymbols();if(0===t.length)return!0;var r,n=(0,u.Z)(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(!ve(o)||0===o.symbolLayers.length)return!0;var a,i=(0,u.Z)(o.symbolLayers.items);try{for(i.s();!(a=i.n()).done;){var c=a.value;if("fill"!==c.type||(0,d.Wi)(c.material)||(0,d.Wi)(c.material.color)||"replace"!==c.material.colorMixMode)return!0}}catch(s){i.e(s)}finally{i.f()}}}catch(s){n.e(s)}finally{n.f()}return!1}var ye=(0,z.$s)({color:[0,0,0,0],opacity:0}),be=(0,o.Z)((function e(){(0,a.Z)(this,e),this.edgeMaterial=null,this.material=null,this.castShadows=!0}));function ge(e){var t,r=new be,n=!1,o=!1,a=(0,u.Z)(e.symbolLayers.items);try{for(a.s();!(t=a.n()).done;){var i=t.value;if("fill"===i.type&&i.enabled){var c=i.material,s=i.edges;if((0,d.pC)(c)&&!n){var l=c.color,f=(0,L.F5)(c.colorMixMode);(0,d.pC)(l)?r.material={color:[l.r/255,l.g/255,l.b/255],alpha:l.a,colorMixMode:f}:r.material={color:[1,1,1],alpha:1,colorMixMode:L.a9.Multiply},r.castShadows=i.castShadows,n=!0}(0,d.pC)(s)&&!o&&(r.edgeMaterial=(0,z.C8)(s,{}),o=!0)}}}catch(h){a.e(h)}finally{a.f()}return r.material||(r.material={color:[1,1,1],alpha:1,colorMixMode:L.a9.Multiply}),r}function we(e,t){return(0|e)+(0|t)|0}function me(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;n===(0,T.rS)(n)?t.isGeographic?function(e,t,r,n){var o=(0,S.Iu)(r),a=1+Math.max(0,n)/(o.radius+e.center[2]);(0,C.s)(t.center,e.center[0],e.center[1],e.center[2]+n),(0,Z.CM)(t.center,r,0,t.center,(0,T.rS)(r),0,1),(0,w.a)(t.quaternion,e.quaternion),(0,w.c)(Le,e.quaternion),(0,C.s)(Be,0,0,1),(0,C.q)(Be,Be,Le),(0,C.s)(Be,e.halfSize[0]*Math.abs(Be[0]),e.halfSize[1]*Math.abs(Be[1]),e.halfSize[2]*Math.abs(Be[2])),(0,C.g)(Be,Be,o.inverseFlattening),(0,C.a)(t.halfSize,e.halfSize,Be),(0,C.g)(t.halfSize,t.halfSize,a)}(e,r,t,o):function(e,t,r,n){(0,O.$e)(e,Oe),(0,C.s)(t.center,e.center[0],e.center[1],e.center[2]+n),(0,Z.Bm)(r,t.center,ze,(0,T.rS)(r)),(0,C.s)(t.center,ze[12],ze[13],ze[14]);var o=2*Math.sqrt(1+ze[0]+ze[5]+ze[10]);Le[0]=(ze[6]-ze[9])/o,Le[1]=(ze[8]-ze[2])/o,Le[2]=(ze[1]-ze[4])/o,Le[3]=.25*o,(0,w.m)(t.quaternion,Le,e.quaternion),(0,w.c)(Le,t.quaternion);var a,i=0,c=0,s=0,l=(0,u.Z)(Oe);try{for(l.s();!(a=l.n()).done;){var f=a.value;f[2]+=n,(0,Z.CM)(f,r,0,f,(0,T.rS)(r),0,1),(0,C.w)(Be,f,t.center),(0,C.q)(Be,Be,Le),i=Math.max(i,Math.abs(Be[0])),c=Math.max(c,Math.abs(Be[1])),s=Math.max(s,Math.abs(Be[2]))}}catch(d){l.e(d)}finally{l.f()}(0,C.s)(t.halfSize,i,c,s)}(e,r,t,o):t.isWGS84&&(n.isWebMercator||(0,x.QM)(n))?function(e,t,r,n,o){(0,C.c)(Ze,t.center),Ze[2]+=o;var a=(0,T.rS)(r);(0,Z.CM)(Ze,e,0,Ze,a,0,1),Te(a,t,Ze,r,n)}(t,e,n,r,o):t.isWebMercator&&(0,x.QM)(n)?function(e,t,r,n,o){(0,C.c)(Ze,t.center),Ze[2]+=o,Te(e,t,Ze,r,n)}(t,e,n,r,o):e===r?(r.center[2]+=o,(0,Z.CM)(r.center,t,0,r.center,n,0,1)):((0,C.s)(r.center,e.center[0],e.center[1],e.center[2]+o),(0,Z.CM)(r.center,t,0,r.center,n,0,1),(0,w.a)(r.quaternion,e.quaternion),(0,C.c)(r.halfSize,e.halfSize))}var Ce=new Array(24),Me=new R.a(Ce,3,!0),Se=(0,M.c)(),Ze=(0,M.c)(),Ie=(0,y.c)();function Te(e,t,r,n,o){for(var a=(0,p.c)(Ie,t.quaternion),i=0;i<8;++i){for(var u=0;u<3;++u)Se[u]=t.halfSize[u]*(0!=(i&1<<u)?-1:1);for(var c=0;c<3;++c){for(var s=r[c],l=0;l<3;++l)s+=Se[l]*a[3*l+c];Ce[3*i+c]=s}}(0,Z.CM)(Ce,e,0,Ce,n,0,8),(0,O.Qb)(Me,o)}function Ue(e,t,r,n,o,a){if(!a||0===a.length||(0,d.Wi)(t)||!e.mbs)return null;var i=(0,k.c)(e.mbs,o,r,t);(0,b.a)(Ne,i);var c=null,s=function(){if(!c)if(c=Oe,(0,U.cS)(Fe),(0,d.pC)(e.serviceObb)){me(e.serviceObb,r,De,t,o),(0,O.$e)(De,c);var n,a=(0,u.Z)(c);try{for(a.s();!(n=a.n()).done;){var i=n.value;(0,C.m)(i,i,Ne),(0,U.Ho)(Fe,i)}}catch(b){a.e(b)}finally{a.f()}}else{var s=e.mbs;if(!s)return;var l=s[3];(0,Z.SH)(s,r,Be,t),(0,C.m)(Be,Be,Ne),Be[2]+=o;for(var f=0;f<8;++f){var h=1&f?l:-l,v=2&f?l:-l,p=4&f?l:-l,y=c[f];(0,C.c)(y,[Be[0]+h,Be[1]+v,Be[2]+p]),(0,U.Ho)(Fe,y)}}},l=1/0,f=-1/0;if(a.forEach((function(e){return function(e){if("replace"===e.type){var r=e.geometry;if(null!==r&&void 0!==r&&r.hasZ){(0,U.cS)(Re);var o=r.spatialReference||n,a=r.rings.reduce((function(e,r){return r.reduce((function(e,r){return(0,Z.SH)(r,o,Be,t),(0,C.m)(Be,Be,Ne),(0,U.Ho)(Re,Be),Math.min(Be[2],e)}),e)}),1/0);s(),(0,U.kK)(Fe,Re)&&(l=Math.min(l,a),f=Math.max(f,a))}}}(e)})),l===1/0)return null;for(var h=function(e,t,r){(0,C.m)(Be,r,i),e[t+0]=Be[0],e[t+1]=Be[1],e[t+2]=Be[2],t+=24,r[2]=l,(0,C.m)(Be,r,i),e[t+0]=Be[0],e[t+1]=Be[1],e[t+2]=Be[2],t+=24,r[2]=f,(0,C.m)(Be,r,i),e[t+0]=Be[0],e[t+1]=Be[1],e[t+2]=Be[2]},v=0;v<8;++v)h(Pe.data,3*v,c[v]);return(0,O.Qb)(Pe)}function xe(e){return(0,d.pC)(e)&&e.halfSize[0]>=0}function Ee(e){return e[3]>=0}function Ae(e){(0,d.pC)(e)&&(e.halfSize[0]=-1)}function ke(e){(0,d.pC)(e)&&(e[3]=-1)}var ze=(0,g.c)(),Le=(0,m.c)(),Oe=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],Re=(0,U.Ue)(),Fe=(0,U.Ue)(),De=(0,O.Ue)(),Be=(0,M.c)(),Pe={data:new Array(72),size:3,exclusive:!0,stride:3},Ne=(0,g.c)()},2821:function(e,t,r){r.d(t,{Gi:function(){return s},IT:function(){return v},ti:function(){return b}});var n=r(10064),o=!0,a={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};function i(e,t,r){return{identifier:String.fromCharCode.apply(null,new Uint8Array(e,r+a.identifierOffset,a.identifierLength)),version:t.getUint16(r+a.versionOffset,o),checksum:t.getUint32(r+a.checksumOffset,o)}}var u={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};function c(e,t){return{sizeLo:e.getUint32(t+u.sizeLo,o),sizeHi:e.getUint32(t+u.sizeHi,o),minX:e.getFloat64(t+u.minX,o),minY:e.getFloat64(t+u.minY,o),minZ:e.getFloat64(t+u.minZ,o),maxX:e.getFloat64(t+u.maxX,o),maxY:e.getFloat64(t+u.maxY,o),maxZ:e.getFloat64(t+u.maxZ,o),errorX:e.getFloat64(t+u.errorX,o),errorY:e.getFloat64(t+u.errorY,o),errorZ:e.getFloat64(t+u.errorZ,o),count:e.getUint32(t+u.count,o),reserved:e.getUint32(t+u.reserved,o)}}function s(e){var t=new DataView(e,0),r=0,o=i(e,t,r),s=o.identifier,f=o.version;if(r+=a.byteCount,"LEPCC     "!==s)throw new n.Z("lepcc-decode-error","Bad identifier");if(f>1)throw new n.Z("lepcc-decode-error","Unknown version");var d=c(t,r);if(r+=u.byteCount,d.sizeHi*Math.pow(2,32)+d.sizeLo!==e.byteLength)throw new n.Z("lepcc-decode-error","Bad size");var h=new Float64Array(3*d.count),v=[],p=[],y=[],b=[];if(r=l(e,r,v),r=l(e,r,p),r=l(e,r,y),(r=l(e,r,b))!==e.byteLength)throw new n.Z("lepcc-decode-error","Bad length");for(var g=0,w=0,m=0;m<v.length;m++){w+=v[m];for(var C=0,M=0;M<p[m];M++){C+=y[g];var S=b[g];h[3*g]=Math.min(d.maxX,d.minX+2*d.errorX*C),h[3*g+1]=Math.min(d.maxY,d.minY+2*d.errorY*w),h[3*g+2]=Math.min(d.maxZ,d.minZ+2*d.errorZ*S),g++}}return{errorX:d.errorX,errorY:d.errorY,errorZ:d.errorZ,result:h}}function l(e,t,r){var n=[];t=f(e,t,n);for(var o=[],a=0;a<n.length;a++){o.length=0,t=f(e,t,o);for(var i=0;i<o.length;i++)r.push(o[i]+n[a])}return t}function f(e,t,r){var a=new DataView(e,t),i=a.getUint8(0),u=31&i,c=!!(32&i),s=(192&i)>>6,l=0;if(0===s)l=a.getUint32(1,o),t+=5;else if(1===s)l=a.getUint16(1,o),t+=3;else{if(2!==s)throw new n.Z("lepcc-decode-error","Bad count type");l=a.getUint8(1),t+=2}if(c)throw new n.Z("lepcc-decode-error","LUT not implemented");for(var f=Math.ceil(l*u/8),d=new Uint8Array(e,t,f),h=0,v=0,p=0,y=-1>>>32-u,b=0;b<l;b++){for(;v<u;)h|=d[p]<<v,v+=8,p+=1;r[b]=h&y,h>>>=u,(v-=u)+u>32&&(h|=d[p-1]>>8-v)}return t+p}var d={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};function h(e,t){return{sizeLo:e.getUint32(t+d.sizeLo,o),sizeHi:e.getUint32(t+d.sizeHi,o),count:e.getUint32(t+d.count,o),colorMapCount:e.getUint16(t+d.colorMapCount,o),lookupMethod:e.getUint8(t+d.lookupMethod),compressionMethod:e.getUint8(t+d.compressionMethod)}}function v(e){var t=new DataView(e,0),r=0,o=i(e,t,r),u=o.identifier,c=o.version;if(r+=a.byteCount,"ClusterRGB"!==u)throw new n.Z("lepcc-decode-error","Bad identifier");if(c>1)throw new n.Z("lepcc-decode-error","Unknown version");var s=h(t,r);if(r+=d.byteCount,s.sizeHi*Math.pow(2,32)+s.sizeLo!==e.byteLength)throw new n.Z("lepcc-decode-error","Bad size");if((2===s.lookupMethod||1===s.lookupMethod)&&0===s.compressionMethod){if(3*s.colorMapCount+s.count+r!==e.byteLength||s.colorMapCount>256)throw new n.Z("lepcc-decode-error","Bad count");for(var l=new Uint8Array(e,r,3*s.colorMapCount),f=new Uint8Array(e,r+3*s.colorMapCount,s.count),v=new Uint8Array(3*s.count),p=0;p<s.count;p++){var y=f[p];v[3*p]=l[3*y],v[3*p+1]=l[3*y+1],v[3*p+2]=l[3*y+2]}return v}if(0===s.lookupMethod&&0===s.compressionMethod){if(3*s.count+r!==e.byteLength||0!==s.colorMapCount)throw new n.Z("lepcc-decode-error","Bad count");return new Uint8Array(e,r).slice()}if(s.lookupMethod<=2&&1===s.compressionMethod){if(r+3!==e.byteLength||1!==s.colorMapCount)throw new n.Z("lepcc-decode-error","Bad count");for(var b=t.getUint8(r),g=t.getUint8(r+1),w=t.getUint8(r+2),m=new Uint8Array(3*s.count),C=0;C<s.count;C++)m[3*C]=b,m[3*C+1]=g,m[3*C+2]=w;return m}throw new n.Z("lepcc-decode-error","Bad method "+s.lookupMethod+","+s.compressionMethod)}var p={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};function y(e,t){return{sizeLo:e.getUint32(t+p.sizeLo,o),sizeHi:e.getUint32(t+p.sizeHi,o),count:e.getUint32(t+p.count,o),scaleFactor:e.getUint16(t+p.scaleFactor,o),bitsPerPoint:e.getUint8(t+p.bitsPerPoint),reserved:e.getUint8(t+p.reserved)}}function b(e){var t=new DataView(e,0),r=0,o=i(e,t,r),u=o.identifier,c=o.version;if(r+=a.byteCount,"Intensity "!==u)throw new n.Z("lepcc-decode-error","Bad identifier");if(c>1)throw new n.Z("lepcc-decode-error","Unknown version");var s=y(t,r);if(r+=p.byteCount,s.sizeHi*Math.pow(2,32)+s.sizeLo!==e.byteLength)throw new n.Z("lepcc-decode-error","Bad size");var l=new Uint16Array(s.count);if(8===s.bitsPerPoint){if(s.count+r!==e.byteLength)throw new n.Z("lepcc-decode-error","Bad size");for(var d=new Uint8Array(e,r,s.count),h=0;h<s.count;h++)l[h]=d[h]*s.scaleFactor}else if(16===s.bitsPerPoint){if(2*s.count+r!==e.byteLength)throw new n.Z("lepcc-decode-error","Bad size");for(var v=new Uint16Array(e,r,s.count),b=0;b<s.count;b++)l[b]=v[b]*s.scaleFactor}else{var g=[];if(f(e,r,g)!==e.byteLength)throw new n.Z("lepcc-decode-error","Bad size");for(var w=0;w<s.count;w++)l[w]=g[w]*s.scaleFactor}return l}}}]);
//# sourceMappingURL=4011.c912170f.chunk.js.map