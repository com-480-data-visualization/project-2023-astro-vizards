"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4763],{54763:function(e,t,n){n.r(t),n.d(t,{previewCIMSymbol:function(){return g}});var i=n(74165),r=n(15861),l=n(17842),o=n(78915),a=n(94304),u=n(31027),s=n(37817),h=n(69157),c=new a.CIMSymbolRasterizer(null,!0),d=(0,l.Wz)(s.b_.size),p=(0,l.Wz)(s.b_.maxSize),y=(0,l.Wz)(s.b_.lineWidth),f=1;function m(e){var t=null===e||void 0===e?void 0:e.size;return"number"==typeof t?{width:t,height:t}:{width:null!=t&&"object"==typeof t&&"width"in t?t.width:null,height:null!=t&&"object"==typeof t&&"height"in t?t.height:null}}function g(e){return b.apply(this,arguments)}function b(){return b=(0,r.Z)((0,i.Z)().mark((function e(t){var n,r,s,g,b,v,w,x,k,M,S,C,z,F,G,I,P,W,R,j,E,O,V,Z,_,q,B=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g=(s=B.length>1&&void 0!==B[1]?B[1]:{}).node,b=s.opacity,v=s.symbolConfig,w="object"==typeof v&&"isSquareFill"in v&&v.isSquareFill,x=s.cimOptions||s,k=x.geometryType||(0,u.JW)(null===(n=t)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.symbol),M=m(s),S=x.feature,C=x.fieldMap,null!=M.width&&null!=M.height){e.next=17;break}return e.next=5,o.E0.resolveSymbolOverrides(t.data,S,null,C,k);case 5:if(z=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:if((t=t.clone()).data={type:"CIMSymbolReference",symbol:z},t.data.primitiveOverrides=void 0,F=[],o.B$.fetchResources(z,c.resourceManager,F),e.t0=F.length>0,!e.t0){e.next=15;break}return e.next=15,Promise.all(F);case 15:G=o.B$.getEnvelope(z,null,c.resourceManager),I=null===G||void 0===G?void 0:G.width,P=null===G||void 0===G?void 0:G.height,M.width="esriGeometryPolygon"===k?d:"esriGeometryPolyline"===k?y:null!=I&&isFinite(I)?Math.min(I,p):d,M.height="esriGeometryPolygon"===k?d:null!=P&&isFinite(P)?Math.max(Math.min(P,p),f):d;case 17:return e.next=19,c.rasterizeCIMSymbolAsync(t,S,M,w||"esriGeometryPolygon"!==k?a.GeometryStyle.Preview:a.GeometryStyle.Legend,C,k);case 19:if(W=e.sent){e.next=22;break}return e.abrupt("return",null);case 22:return R=W.width,j=W.height,(E=document.createElement("canvas")).width=R,E.height=j,E.getContext("2d").putImageData(W,0,0),O=(0,l.F2)(M.width),V=(0,l.F2)(M.height),(Z=new Image(O,V)).src=E.toDataURL(),null!=b&&(Z.style.opacity="".concat(b)),_=Z,null!=s.effectView&&(q={shape:{type:"image",x:0,y:0,width:O,height:V,src:Z.src},fill:null,stroke:null,offset:[0,0]},_=(0,h.wh)([[q]],[O,V],{effectView:s.effectView})),e.abrupt("return",(g&&_&&g.appendChild(_),_));case 30:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}}}]);
//# sourceMappingURL=4763.e1533234.chunk.js.map