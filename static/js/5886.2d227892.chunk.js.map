{"version":3,"file":"static/js/5886.2d227892.chunk.js","mappings":"2eAIi3D,SAAeA,EAACC,EAAAC,EAAAC,GAAA,OAAAC,EAAAC,MAAC,KAADC,UAAA,UAAAF,IAAosB,OAApsBA,GAAAG,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAhB,SAAAC,EAAiBC,EAAEC,EAAEC,GAAC,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAtB,EAAAA,EAAAA,KAAAuB,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAAqB,OAAbpB,EAAE,IAAIqB,EAAAA,EAAEC,EAAEvB,IAAGmB,EAAAE,KAAA,GAAUG,EAAAA,EAAAA,GAAEvB,EAAEF,EAAEC,GAAE,GAAG,OAApBE,EAACiB,EAAAM,KAAqBC,MAAMvB,EAAED,EAAEyB,KAAKC,QAAQxB,EAAE,IAAIyB,IAAIxB,EAAE,IAAIwB,IAAI3B,EAAE4B,SAASC,SAAS,SAACjC,EAAEC,GAAC,OAAGK,EAAE4B,IAAIjC,EAAEkC,EAAGnC,GAAG,IAAGI,EAAEgC,UAAUH,SAAS,SAACjC,EAAEC,GAAC,OAAGM,EAAE2B,IAAIjC,EAAEoC,EAAGrC,EAAEM,GAAG,IAASE,EAAE8B,EAAGjC,GAAEI,GAAA8B,EAAAA,EAAAA,GAAgB/B,EAAEgC,OAAK,IAAtB,IAAA/B,EAAAL,MAAAM,EAAAD,EAAAgC,KAAAC,MAAUD,EAAC/B,EAAAiC,MAAYC,EAAGpC,EAAEiC,EAAElC,EAAG,OAAAsC,GAAApC,EAAAT,EAAA6C,EAAA,SAAApC,EAAAK,GAAA,CAAyO,OAAzOF,EAAyDJ,EAAEsC,iBAA5CjC,EAACD,EAAVmC,SAAkBjC,EAACF,EAARoC,OAAiBjC,EAACH,EAATqC,QAAgBjC,EAACJ,EAAPsC,MAAkBjC,EAACL,EAAXuC,UAAgCjC,EAAE,CAAC6B,SAASlC,EAAEuC,YAAYJ,QAAOP,EAAAA,EAAAA,IAAE3B,GAAGA,EAAEsC,YAAY,KAAKH,SAAQR,EAAAA,EAAAA,IAAE1B,GAAGA,EAAEqC,YAAY,KAAKC,IAAGZ,EAAAA,EAAAA,IAAExB,GAAGA,EAAEmC,YAAY,KAAKF,OAAMT,EAAAA,EAAAA,IAAEzB,GAAGA,EAAEoC,YAAY,MAAMjC,GAAEmC,EAAAA,EAAAA,IAAEpC,EAAElB,EAAEE,GAAEmB,EAAAkC,OAAA,SAAO,CAACC,UAAUrC,EAAEqC,UAAUC,WAAWjD,EAAEiD,WAAWC,iBAAiB1D,EAAE0D,iBAAiBZ,iBAAiB,IAAIa,EAAAA,EAAE,CAACZ,SAAS5B,EAAE2B,iBAAiBC,SAASC,OAAO7B,EAAE2B,iBAAiBE,OAAOC,QAAQ9B,EAAE2B,iBAAiBG,QAAQC,MAAMhC,EAAEgC,MAAMG,GAAGnC,EAAEmC,OAAK,yBAAAhC,EAAAuC,OAAA,GAAA7D,EAAA,MAACL,MAAA,KAAAC,UAAA,UAAS8B,EAAEzB,GAAG,IAAME,EAAG,OAADF,QAAC,IAADA,OAAC,EAADA,EAAG6D,YAAY,OAAO3D,EAAE,CAAC4D,MAAK,EAAGC,QAAO,eAAAC,GAAApE,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAC,SAAAmE,EAAMjE,EAAEG,EAAEC,GAAC,IAAAC,EAAAC,EAAA,OAAAT,EAAAA,EAAAA,KAAAuB,MAAA,SAAA8C,GAAA,cAAAA,EAAA5C,KAAA4C,EAAA3C,MAAA,OAAyE,OAA/DlB,EAAEH,EAAEF,GAAGM,EAAE,UAAUH,EAAE,QAAQ,WAAWA,EAAE,eAAe,OAAM+D,EAAA3C,KAAA,GAActB,EAAAA,EAAAA,SAAEI,EAAE,CAAC8D,aAAa7D,EAAE8D,QAAO3B,EAAAA,EAAAA,IAAErC,GAAGA,EAAEgE,OAAO,OAAM,cAAAF,EAAAX,OAAA,SAAAW,EAAAvC,KAAE0C,MAAI,wBAAAH,EAAAN,OAAA,GAAAK,EAAA,KAAC,gBAAAK,EAAAC,EAAAC,GAAA,OAAAR,EAAAtE,MAAA,KAAAC,UAAA,EAAzJ,IAA2J,IAAI,CAAC,SAAS8E,EAAEzE,EAAEC,GAAG,IAAGK,EAAAA,EAAAA,IAAEN,GAAG,MAAM,IAAI,IAAMG,EAAEH,EAAEoD,YAAY,SAAAsB,QAASxE,EAAAA,EAAAA,IAAED,EAAEE,EAAEwE,QAAQ,kBAAI1E,EAAE2E,IAAI,IAAE,KAAAF,OAAIvE,EAAE0E,WAAU,KAAAH,OAAIvE,EAAE2E,WAAY,CAA6C,SAASxC,EAAGtC,GAAG,IAA8G+E,EAA1G9E,EAAE,EAAQ+E,EAAI,CAAC9B,OAAM,EAAGD,SAAQ,EAAGD,QAAO,EAAGG,WAAU,GAAIhD,EAAE,IAAI4B,IAAIU,EAAE,IAAIV,IAAI3B,EAAE,GAAG6E,GAAA1C,EAAAA,EAAAA,GAAevC,EAAEwC,OAAK,QAAA0C,EAAA,WAAC,IAAb7E,EAAC0E,EAAApC,MAAawC,EAAsE9E,EAAhE+E,WAAqBpF,EAACmF,EAAVpC,SAAkBzC,EAAC6E,EAARnC,OAAezC,EAAC4E,EAAPjC,MAAgB1C,EAAC2E,EAATlC,QAAoBpC,EAACsE,EAAXhC,UAAgBrC,EAAC,WAAA4D,OAAYD,EAAEzE,EAAEG,GAAE,aAAAuE,OAAYD,EAAEnE,EAAEH,GAAE,aAAAuE,OAAYD,EAAElE,EAAEJ,GAAE,aAAAuE,OAAYD,EAAEjE,EAAEL,GAAE,aAAAuE,OAAYD,EAAE5D,EAAEV,GAAE,aAAAuE,OAA9U,SAAY1E,GAAG,OAAOyC,EAAAA,EAAAA,IAAEzC,GAAGA,EAAEqF,WAAW,GAAG,CAA+SC,CAAGjF,EAAEmD,WAAU,UAAazC,GAAE,EAASC,GAAEd,EAAAA,EAAAA,IAAEuC,EAAE3B,GAAG,kBAAKC,GAAE,EAAG,CAACwE,MAAMtF,EAAEuF,OAAOxF,EAAEyF,MAAM,IAAI1E,IAAId,GAAGD,EAAEyF,OAAOnF,IAAI0E,EAAIhC,QAAO,GAAIzC,IAAIyE,EAAI9B,OAAM,GAAI1C,IAAIwE,EAAI/B,SAAQ,GAAIpC,IAAImE,EAAI7B,WAAU,GAAI/C,EAAEsF,KAAK,CAACC,KAAKtF,EAAEuF,cAAc7E,EAAE8E,OAAO7E,GAAG,EAAra,IAAAiE,EAAA7E,MAAA2E,EAAAE,EAAAxC,KAAAC,MAAAwC,GAAsa,OAAArC,GAAAoC,EAAAjF,EAAA6C,EAAA,SAAAoC,EAAAnE,GAAA,OAAM,CAACgC,iBAAiB,CAACC,UAAS+C,EAAAA,EAAAA,IAAEC,EAAAA,GAAE9F,GAAG+C,OAAOgC,EAAIhC,QAAO8C,EAAAA,EAAAA,IAAEE,EAAAA,GAAE/F,GAAG,KAAKgD,QAAQ+B,EAAI/B,SAAQ6C,EAAAA,EAAAA,IAAE5E,EAAAA,GAAEjB,GAAG,KAAKiD,MAAM8B,EAAI9B,OAAM4C,EAAAA,EAAAA,IAAE3E,EAAAA,GAAElB,GAAG,KAAKkD,UAAU6B,EAAI7B,WAAU2C,EAAAA,EAAAA,IAAEG,EAAAA,GAAEhG,GAAG,MAAMuC,MAAMpC,EAAEqD,WAAW,GAAG,CAAC,SAAStB,EAAGnC,GAAG,OAAO,IAAIiB,EAAAA,EAAE,CAACoD,OAAM6B,EAAAA,EAAAA,IAAElG,EAAEqE,MAAMrE,EAAEqE,MAAMjD,KAAK+E,EAAGnG,EAAEoG,WAAWhF,OAAO,CAAC,SAASiB,EAAGpC,EAAEC,GAAG,IAA26EF,EAAr6EG,EAAE,IAAIH,EAAAA,EAA21E,SAAYA,EAAEC,GAAG,OAAOa,EAAAA,EAAAA,GAAEuF,EAAGrG,EAAE,IAAIqG,EAAGrG,EAAE,IAAIqG,EAAGrG,EAAE,IAAIC,EAAE,CAAh5EqG,CAAGrG,EAAEiD,MAAMjD,EAAEsG,UAAU9D,EAAExC,EAAEuG,eAAe,IAAIxG,EAAAA,GAA+2EA,EAA12EC,EAAEuG,gBAAk3E3F,EAAAA,EAAAA,GAAEwF,EAAGrG,EAAE,IAAIqG,EAAGrG,EAAE,IAAIqG,EAAGrG,EAAE,OAA13E,KAAK,OAAO,IAAIgB,EAAAA,EAAE,CAACkC,MAAM/C,EAAEsG,cAAarG,EAAAA,EAAAA,KAAEC,EAAAA,EAAAA,IAAEJ,EAAEyG,cAAc,SAAA1G,GAAC,OAAEE,EAAEyG,IAAI3G,EAAE,KAAI4G,eAAcxG,EAAAA,EAAAA,KAAEC,EAAAA,EAAAA,IAAEJ,EAAE4G,eAAe,SAAA7G,GAAC,OAAEE,EAAEyG,IAAI3G,EAAE,KAAI8G,cAAcrE,EAAEsE,iBAAgB3G,EAAAA,EAAAA,KAAEC,EAAAA,EAAAA,IAAEJ,EAAE+G,iBAAiB,SAAAhH,GAAC,OAAEE,EAAEyG,IAAI3G,EAAE,KAAIiH,kBAAiB7G,EAAAA,EAAAA,KAAEC,EAAAA,EAAAA,IAAEJ,EAAEiH,kBAAkB,SAAAlH,GAAC,OAAEE,EAAEyG,IAAI3G,EAAE,KAAImH,UAAUC,EAAGnH,EAAEkH,WAAWE,YAAYpH,EAAEoH,YAAYC,YAAYrH,EAAEqH,YAAYC,SAAStH,EAAEuH,eAAeC,UAAUxH,EAAEyH,gBAAgBC,0BAAyBvH,EAAAA,EAAAA,KAAEC,EAAAA,EAAAA,IAAEJ,EAAE2H,0BAA0B,SAAA5H,GAAC,OAAEE,EAAEyG,IAAI3G,EAAE,KAAI6H,sBAAsB5H,EAAE4H,sBAAsBC,uBAAuB7H,EAAE6H,uBAAuBC,0BAA0B9H,EAAE8H,0BAA0BC,yBAAyB/H,EAAE+H,yBAAyBC,kCAAkChI,EAAEgI,mCAAmC,CAAC,SAASrF,EAAG5C,EAAEC,EAAEC,GAAGD,EAAE2F,eAAiP,SAAY5F,EAAEC,GAAG,IAAAiI,EAAyDlI,EAAE8C,iBAA5C5C,EAACgI,EAAVnF,SAAkB3C,EAAC8H,EAARlF,OAAiB3C,EAAC6H,EAATjF,QAAgB3C,EAAC4H,EAAPhF,MAAkBrC,EAACqH,EAAX/E,UAAgCrC,EAAEb,EAAE4F,OAAON,MAAK4C,EAA4BlI,EAAE0F,KAAjB5E,EAACoH,EAAZ/C,WAAuBpE,EAACmH,EAAX3E,UAAoBvC,EAAEF,EAAEgC,SAAS0C,MAAM,IAAG2C,EAAAA,EAAAA,GAAElI,EAAEmI,MAAMvH,EAAEG,GAAGF,EAAEgC,SAAS/B,IAAGyB,EAAAA,EAAAA,IAAE1B,EAAEiC,UAASP,EAAAA,EAAAA,IAAErC,GAAG,CAAC,IAAMJ,GAAEO,EAAAA,EAAAA,IAAEC,EAAAA,EAAAA,KAAIQ,GAAGf,EAAEG,EAAEiI,MAAMvH,EAAEG,IAAGqH,EAAAA,EAAAA,GAAErI,EAAEc,EAAEiC,OAAOhD,IAAGG,EAAAA,EAAAA,IAAEH,KAAIuI,EAAAA,EAAAA,GAAEtI,EAAEA,EAAE,MAAMwC,EAAAA,EAAAA,IAAErC,KAAIoI,EAAAA,EAAAA,GAAEpI,EAAE,EAAE,EAAE,EAAE,CAACqI,SAAS3H,EAAE2E,MAAMxE,IAAI,IAAGwB,EAAAA,EAAAA,IAAE1B,EAAEkC,WAAUR,EAAAA,EAAAA,IAAEpC,GAAG,CAAC,IAAML,GAAEO,EAAAA,EAAAA,IAAEC,EAAAA,EAAAA,KAAIQ,GAAGf,EAAEI,EAAEgI,MAAMvH,EAAEG,IAAGyH,EAAAA,EAAAA,GAAEzI,EAAEc,EAAEkC,QAAQjD,IAAGG,EAAAA,EAAAA,IAAEH,KAAI2I,EAAAA,EAAAA,GAAE1I,EAAEA,EAAE,MAAMwC,EAAAA,EAAAA,IAAEpC,KAAIuI,EAAAA,EAAAA,GAAEvI,EAAE,EAAE,EAAE,EAAE,EAAE,CAACoI,SAAS3H,EAAE2E,MAAMxE,IAAI,IAAGwB,EAAAA,EAAAA,IAAE1B,EAAEoC,aAAYV,EAAAA,EAAAA,IAAE5B,IAAGgI,EAAAA,EAAAA,GAAEhI,EAAEwH,MAAMvH,EAAEG,GAAGF,EAAEoC,YAAWV,EAAAA,EAAAA,IAAE5B,KAAIiI,EAAAA,EAAAA,GAAEjI,EAAE,EAAE,EAAE,CAAC4H,SAAS3H,EAAE2E,MAAMxE,KAAIwB,EAAAA,EAAAA,IAAE1B,EAAEmC,SAAQT,EAAAA,EAAAA,IAAEnC,GAAG,CAAC,IAAMN,EAAEe,EAAEmC,MAAMjD,EAAEK,EAAE+H,MAAMvH,EAAEG,GAAG,GAAG,IAAIjB,EAAE+I,aAAa/I,aAAakB,EAAAA,IAAE8H,EAAAA,EAAAA,GAAE/I,EAAED,EAAE,KAAKA,aAAamB,EAAAA,IAAE8H,EAAAA,EAAAA,GAAEhJ,EAAED,GAAGA,aAAakJ,EAAAA,KAAGC,EAAAA,EAAAA,GAAElJ,EAAED,EAAE,OAAO,EAAC4I,EAAAA,EAAAA,GAAE3I,EAAE,IAAI,IAAI,IAAI,KAAK,IAAMC,EAAEkJ,EAAAA,GAAAA,eAAiBnJ,EAAEmD,YAAYnD,EAAEoJ,mBAAmBrJ,aAAagG,EAAAA,IAAEsD,EAAAA,EAAAA,GAAEpJ,EAAEF,EAAE,KAAKA,aAAaoJ,EAAAA,IAAEG,EAAAA,EAAAA,GAAErJ,EAAEF,GAAGA,aAAawJ,EAAAA,KAAGC,EAAAA,EAAAA,GAAEvJ,EAAEF,EAAE,EAAE,CAAC,MAAMyC,EAAAA,EAAAA,IAAEnC,KAAIsI,EAAAA,EAAAA,GAAEtI,EAAE+H,MAAMvH,EAAEG,GAAG,IAAI,IAAI,IAAI,IAAI,CAAplCyI,CAAG1J,EAAEC,GAAG,IAAME,EAAEF,EAAE0F,KAAKlD,EAA8jC,SAAYzC,EAAEC,GAAG,OAAOA,GAAG,KAAK0J,EAAAA,GAAAA,UAAY,OAAOC,EAAAA,EAAAA,IAAE5J,EAAE6J,EAAAA,IAAG,KAAKF,EAAAA,GAAAA,eAAiB,OAAOG,EAAAA,EAAAA,IAAE9J,GAAG,KAAK2J,EAAAA,GAAAA,aAAe,OAAOI,EAAAA,EAAAA,IAAE/J,GAAG,CAAxrCgK,CAAG7J,EAAE8J,SAAS9J,EAAEiF,WAAWrC,SAAS0C,MAAMtF,EAAE+J,eAAe9J,EAAEH,EAAE4F,OAAON,MAAM,GAAGnF,EAAE,IAAI,IAAIC,EAAE,EAAEA,EAAEoC,EAAE+C,OAAOnF,IAAIoC,EAAEpC,IAAID,EAAEJ,EAAEyD,WAAWiC,KAAK,IAAI3E,EAAAA,EAAE,CAACoJ,MAAM1H,EAAE2H,SAASlK,EAAEyG,IAAIxG,EAAEiK,UAAUC,oBAAmB,IAAK,CAAi/B,SAASjD,EAAGpH,GAAG,OAAOA,GAAG,IAAI,SAAS,MAAM,SAAS,IAAI,OAAO,MAAM,OAAO,IAAI,QAAQ,MAAM,QAAQ,CAAC,SAASmG,EAAGnG,GAAG,MAAM,CAACsK,WAAWC,EAAGvK,EAAEI,GAAGoK,SAASD,EAAGvK,EAAEC,GAAG,CAAC,SAASsK,EAAGvK,GAAG,OAAOA,GAAG,KAAKyK,EAAAA,GAAAA,cAAgB,MAAM,QAAQ,KAAKA,EAAAA,GAAAA,gBAAkB,MAAM,SAAS,KAAKA,EAAAA,GAAAA,OAAS,MAAM,SAAS,CAAC,SAASpE,EAAGrG,GAAG,OAAgB,IAAT0K,KAAAC,IAAA3K,EAAI,EAAE4K,EAAAA,EAAM,C","sources":["../node_modules/@arcgis/core/geometry/support/meshUtils/loadGLTFMesh.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";import t from\"../../../request.js\";import{getOrCreateMapValue as r}from\"../../../core/MapUtils.js\";import{hasScaling as o}from\"../../../core/mathUtils.js\";import{isSome as n,unwrap as s,applySome as i,isNone as a}from\"../../../core/maybe.js\";import{b as c}from\"../../../chunks/mat3.js\";import{c as u}from\"../../../chunks/mat3f64.js\";import{f as l}from\"../../../chunks/vec3f64.js\";import{f}from\"../../../chunks/vec4f64.js\";import m from\"../MeshComponent.js\";import p from\"../MeshMaterialMetallicRoughness.js\";import d from\"../MeshTexture.js\";import{MeshVertexAttributes as g}from\"../MeshVertexAttributes.js\";import{BufferViewVec4f as x,BufferViewVec4u8 as T,BufferViewVec4u16 as h,BufferViewVec3u8 as v,BufferViewVec3f as w,BufferViewVec3u16 as b,BufferViewVec3f64 as j,BufferViewVec2f as y}from\"../buffer/BufferView.js\";import{t as A,a as M,n as C,s as R,b as E}from\"../../../chunks/vec32.js\";import{t as k,n as B,s as F,a as I}from\"../../../chunks/vec42.js\";import{createBuffer as $}from\"../buffer/utils.js\";import{georeferenceByTransform as L}from\"./georeference.js\";import{DefaultLoadingContext as S}from\"../../../views/3d/glTF/DefaultLoadingContext.js\";import{loadGLTF as N}from\"../../../views/3d/glTF/loader.js\";import{triangleFanToTriangles as O,triangleStripToTriangles as _,trianglesToTriangles as D}from\"../../../views/3d/glTF/internal/indexUtils.js\";import{isEncodedMeshTexture as G}from\"../../../views/3d/glTF/internal/resourceUtils.js\";import{generateIndexArray as P}from\"../../../views/3d/webgl-engine/lib/Indices.js\";import{COLOR_GAMMA as U}from\"../../../views/3d/webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";import{PrimitiveType as V,TextureWrapMode as q}from\"../../../views/webgl/enums.js\";import{f as z,c as K}from\"../../../chunks/vec33.js\";import{f as Q,c as H}from\"../../../chunks/vec43.js\";import{n as J,f as W}from\"../../../chunks/vec22.js\";async function X(e,t,r){const o=new S(Y(r)),s=(await N(o,t,r,!0)).model,i=s.lods.shift(),a=new Map,c=new Map;s.textures.forEach(((e,t)=>a.set(t,re(e)))),s.materials.forEach(((e,t)=>c.set(t,oe(e,a))));const u=te(i);for(const n of u.parts)ne(u,n,c);const{position:l,normal:f,tangent:m,color:p,texCoord0:d}=u.vertexAttributes,x={position:l.typedBuffer,normal:n(f)?f.typedBuffer:null,tangent:n(m)?m.typedBuffer:null,uv:n(d)?d.typedBuffer:null,color:n(p)?p.typedBuffer:null},T=L(x,e,r);return{transform:T.transform,components:u.components,spatialReference:e.spatialReference,vertexAttributes:new g({position:T.vertexAttributes.position,normal:T.vertexAttributes.normal,tangent:T.vertexAttributes.tangent,color:x.color,uv:x.uv})}}function Y(e){const r=e?.resolveFile;return r?{busy:!1,request:async(e,o,s)=>{const i=r(e),a=\"image\"===o?\"image\":\"binary\"===o?\"array-buffer\":\"json\";return(await t(i,{responseType:a,signal:n(s)?s.signal:null})).data}}:null}function Z(e,t){if(a(e))return\"-\";const o=e.typedBuffer;return`${r(t,o.buffer,(()=>t.size))}/${o.byteOffset}/${o.byteLength}`}function ee(e){return n(e)?e.toString():\"-\"}function te(e){let t=0;const has={color:!1,tangent:!1,normal:!1,texCoord0:!1},o=new Map,n=new Map,s=[];for(const i of e.parts){const{attributes:{position:e,normal:a,color:c,tangent:u,texCoord0:l}}=i,f=`\\n      ${Z(e,o)}/\\n      ${Z(a,o)}/\\n      ${Z(c,o)}/\\n      ${Z(u,o)}/\\n      ${Z(l,o)}/\\n      ${ee(i.transform)}\\n    `;let m=!1;const p=r(n,f,(()=>(m=!0,{start:t,length:e.count})));m&&(t+=e.count),a&&(has.normal=!0),c&&(has.color=!0),u&&(has.tangent=!0),l&&(has.texCoord0=!0),s.push({gltf:i,writeVertices:m,region:p})}return{vertexAttributes:{position:$(j,t),normal:has.normal?$(w,t):null,tangent:has.tangent?$(x,t):null,color:has.color?$(T,t):null,texCoord0:has.texCoord0?$(y,t):null},parts:s,components:[]}}function re(e){return new d({data:(G(e.data),e.data),wrap:ce(e.parameters.wrap)})}function oe(t,r){const o=new e(fe(t.color,t.opacity)),n=t.emissiveFactor?new e(me(t.emissiveFactor)):null;return new p({color:o,colorTexture:s(i(t.textureColor,(e=>r.get(e)))),normalTexture:s(i(t.textureNormal,(e=>r.get(e)))),emissiveColor:n,emissiveTexture:s(i(t.textureEmissive,(e=>r.get(e)))),occlusionTexture:s(i(t.textureOcclusion,(e=>r.get(e)))),alphaMode:ae(t.alphaMode),alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,metallic:t.metallicFactor,roughness:t.roughnessFactor,metallicRoughnessTexture:s(i(t.textureMetallicRoughness,(e=>r.get(e)))),colorTextureTransform:t.colorTextureTransform,normalTextureTransform:t.normalTextureTransform,occlusionTextureTransform:t.occlusionTextureTransform,emissiveTextureTransform:t.emissiveTextureTransform,metallicRoughnessTextureTransform:t.metallicRoughnessTextureTransform})}function ne(e,t,r){t.writeVertices&&se(e,t);const o=t.gltf,n=ie(o.indices||o.attributes.position.count,o.primitiveType),s=t.region.start;if(s)for(let i=0;i<n.length;i++)n[i]+=s;e.components.push(new m({faces:n,material:r.get(o.material),trustSourceNormals:!0}))}function se(e,t){const{position:r,normal:s,tangent:i,color:a,texCoord0:l}=e.vertexAttributes,f=t.region.start,{attributes:m,transform:p}=t.gltf,d=m.position.count;if(A(r.slice(f,d),m.position,p),n(m.normal)&&n(s)){const e=c(u(),p),t=s.slice(f,d);M(t,m.normal,e),o(e)&&C(t,t)}else n(s)&&z(s,0,0,1,{dstIndex:f,count:d});if(n(m.tangent)&&n(i)){const e=c(u(),p),t=i.slice(f,d);k(t,m.tangent,e),o(e)&&B(t,t)}else n(i)&&Q(i,0,0,1,1,{dstIndex:f,count:d});if(n(m.texCoord0)&&n(l)?J(l.slice(f,d),m.texCoord0):n(l)&&W(l,0,0,{dstIndex:f,count:d}),n(m.color)&&n(a)){const e=m.color,t=a.slice(f,d);if(4===e.elementCount)e instanceof x?F(t,e,255):e instanceof T?H(t,e):e instanceof h&&I(t,e,8);else{Q(t,255,255,255,255);const r=v.fromTypedArray(t.typedBuffer,t.typedBufferStride);e instanceof w?R(r,e,255):e instanceof v?K(r,e):e instanceof b&&E(r,e,8)}}else n(a)&&Q(a.slice(f,d),255,255,255,255)}function ie(e,t){switch(t){case V.TRIANGLES:return D(e,P);case V.TRIANGLE_STRIP:return _(e);case V.TRIANGLE_FAN:return O(e)}}function ae(e){switch(e){case\"OPAQUE\":return\"opaque\";case\"MASK\":return\"mask\";case\"BLEND\":return\"blend\"}}function ce(e){return{horizontal:ue(e.s),vertical:ue(e.t)}}function ue(e){switch(e){case q.CLAMP_TO_EDGE:return\"clamp\";case q.MIRRORED_REPEAT:return\"mirror\";case q.REPEAT:return\"repeat\"}}function le(e){return e**(1/U)*255}function fe(e,t){return f(le(e[0]),le(e[1]),le(e[2]),t)}function me(e){return l(le(e[0]),le(e[1]),le(e[2]))}export{X as loadGLTFMesh};\n"],"names":["X","_x","_x2","_x3","_X","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","e","t","r","o","s","i","a","c","u","_iterator2","_step2","_n","_u$vertexAttributes","l","f","m","p","d","x","T","wrap","_context2","prev","next","S","Y","N","sent","model","lods","shift","Map","textures","forEach","set","re","materials","oe","te","_createForOfIteratorHelper","parts","n","done","value","ne","err","vertexAttributes","position","normal","tangent","color","texCoord0","typedBuffer","uv","L","abrupt","transform","components","spatialReference","g","stop","resolveFile","busy","request","_request","_callee","_context","responseType","signal","data","_x4","_x5","_x6","Z","concat","buffer","size","byteOffset","byteLength","_step","has","_iterator","_loop","_i$attributes","attributes","toString","ee","start","length","count","push","gltf","writeVertices","region","$","j","w","y","G","ce","parameters","le","fe","opacity","emissiveFactor","colorTexture","textureColor","get","normalTexture","textureNormal","emissiveColor","emissiveTexture","textureEmissive","occlusionTexture","textureOcclusion","alphaMode","ae","alphaCutoff","doubleSided","metallic","metallicFactor","roughness","roughnessFactor","metallicRoughnessTexture","textureMetallicRoughness","colorTextureTransform","normalTextureTransform","occlusionTextureTransform","emissiveTextureTransform","metallicRoughnessTextureTransform","_e$vertexAttributes","_t$gltf","A","slice","M","C","z","dstIndex","k","B","Q","J","W","elementCount","F","H","h","I","v","typedBufferStride","R","K","b","E","se","V","D","P","_","O","ie","indices","primitiveType","faces","material","trustSourceNormals","horizontal","ue","vertical","q","Math","pow","U"],"sourceRoot":""}