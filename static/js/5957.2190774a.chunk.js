"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5957],{76046:function(e,t,r){r.d(t,{Z:function(){return P}});var n,a=r(29439),o=r(15671),i=r(43144),s=r(60136),l=r(29388),u=r(27366),c=r(46784),f=r(92026),p=r(49861),h=(r(25243),r(63780),r(69912)),v=r(14226),g=r(81949),d=r(48976),m=r(98131),y=r(11186),x=r(71353),w=r(585),b=r(79803),A=r(29691),C=r(45238),Z=r(25158),k=r(32035),R=r(92770),F=n=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).origin=(0,x.c)(),n.translation=(0,x.c)(),n.rotation=(0,C.Ue)(),n.scale=(0,x.f)(1,1,1),n.geographic=!0,n}return(0,i.Z)(r,[{key:"localMatrix",get:function(){var e=(0,g.c)();return(0,d.s)(M,(0,C.ZZ)(this.rotation),(0,C.WH)(this.rotation)),(0,v.g)(e,M,this.translation,this.scale),e}},{key:"localMatrixInverse",get:function(){return(0,v.a)((0,g.c)(),this.localMatrix)}},{key:"applyLocal",value:function(e,t){return(0,y.m)(t,e,this.localMatrix)}},{key:"applyLocalInverse",value:function(e,t){return(0,y.m)(t,e,this.localMatrixInverse)}},{key:"project",value:function(e,t){var r=new Float64Array(e.length),n=Z.fP.fromTypedArray(r),a=Z.fP.fromTypedArray(e);if(this.geographic){var o=(0,A.rS)(t),i=(0,g.c)();return(0,b.Bm)(t,this.origin,i,o),(0,v.m)(i,i,this.localMatrix),(0,k.t)(n,a,i),(0,b.CM)(r,o,0,r,t,0,r.length/3),r}var s=this.localMatrix,l=this.origin;(0,v.h)(s,g.I)?(0,R.c)(n,a):(0,k.t)(n,a,s);for(var u=0;u<r.length;u+=3)r[u+0]+=l[0],r[u+1]+=l[1],r[u+2]+=l[2];return r}},{key:"getOriginPoint",value:function(e){var t=(0,a.Z)(this.origin,3),r=t[0],n=t[1],o=t[2];return new w.Z({x:r,y:n,z:o,spatialReference:e})}},{key:"equals",value:function(e){return(0,f.pC)(e)&&this.geographic===e.geographic&&(0,y.k)(this.origin,e.origin)&&(0,v.j)(this.localMatrix,e.localMatrix)}},{key:"clone",value:function(){var e={origin:(0,x.a)(this.origin),translation:(0,x.a)(this.translation),rotation:(0,C.Ue)(this.rotation),scale:(0,x.a)(this.scale),geographic:this.geographic};return new n(e)}}]),r}(c.wq);(0,u._)([(0,p.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],F.prototype,"origin",void 0),(0,u._)([(0,p.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],F.prototype,"translation",void 0),(0,u._)([(0,p.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],F.prototype,"rotation",void 0),(0,u._)([(0,p.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],F.prototype,"scale",void 0),(0,u._)([(0,p.Cb)({type:Boolean,nonNullable:!0,json:{write:!0}})],F.prototype,"geographic",void 0),(0,u._)([(0,p.Cb)()],F.prototype,"localMatrix",null),(0,u._)([(0,p.Cb)()],F.prototype,"localMatrixInverse",null),F=n=(0,u._)([(0,h.j)("esri.geometry.support.MeshTransform")],F);var M=(0,m.a)(),P=F},26548:function(e,t,r){function n(e,t){var r;return e.isGeographic||e.isWebMercator&&(null===(r=null===t||void 0===t?void 0:t.geographic)||void 0===r||r)}r.d(t,{h:function(){return n}})},57898:function(e,t,r){r.d(t,{FF:function(){return x},I5:function(){return m},Yq:function(){return w},iv:function(){return d},w1:function(){return y}});var n=r(92026),a=r(68860),o=r(11873),i=r(14226),s=r(81949),l=r(22753),u=r(79803),c=r(29691),f=r(76046),p=r(25158),h=r(32035),v=r(26548),g=r(11700);function d(e,t,r){return(0,v.h)(t.spatialReference,r)?function(e,t,r){var n=t.spatialReference,a=Z(t,r,M),o=new Float64Array(e.position.length),i=function(e,t,r,n){(0,h.t)(p.fP.fromTypedArray(n),p.fP.fromTypedArray(e),t);var a=new Float64Array(e.length);return(0,g.To)(n,a,r)}(e.position,a,n,o),s=(0,l.b)(T,a);return{position:i,normal:b(i,o,e.normal,s,n),tangent:A(i,o,e.tangent,s,n)}}(e,t,r):function(e,t,r){for(var n=new Float64Array(e.position.length),a=e.position,o=t.x,i=t.y,s=t.z||0,l=F(r?r.unit:null,t.spatialReference),u=l.horizontal,c=l.vertical,f=0;f<a.length;f+=3)n[f+0]=a[f+0]*u+o,n[f+1]=a[f+1]*u+i,n[f+2]=a[f+2]*c+s;return{position:n,normal:e.normal,tangent:e.tangent}}(e,t,r)}function m(e,t,r){var a=e.position,o=e.normal,i=e.tangent;if((0,n.Wi)(t))return{position:a,normal:o,tangent:i};var s=t.localMatrix;return d({position:(0,g.zZ)(a,new Float64Array(a.length),s),normal:(0,n.pC)(o)?(0,g.w9)(o,new Float32Array(o.length),s):null,tangent:(0,n.pC)(i)?(0,g.VS)(i,new Float32Array(i.length),s):null},t.getOriginPoint(r),{geographic:t.geographic})}function y(e,t,r){var n;return null!==r&&void 0!==r&&r.useTransform?{vertexAttributes:{position:e.position,normal:e.normal,tangent:e.tangent},transform:new f.Z({origin:[t.x,t.y,null!==(n=t.z)&&void 0!==n?n:0],geographic:(0,v.h)(t.spatialReference,r)})}:{vertexAttributes:d(e,t,r),transform:null}}function x(e,t,r){return(0,v.h)(t.spatialReference,r)?function(e,t,r){var n=t.spatialReference;Z(t,r,M);var a=(0,i.a)(P,M),o=new Float64Array(e.position.length),s=function(e,t,r,n){var a=(0,g.XO)(e,t,n),o=p.fP.fromTypedArray(a),i=new Float64Array(a.length),s=p.fP.fromTypedArray(i);return(0,h.t)(s,o,r),i}(e.position,n,a,o),u=(0,l.b)(T,a);return{position:s,normal:k(e.normal,e.position,o,n,u),tangent:R(e.tangent,e.position,o,n,u)}}(e,t,r):C(e,t,r)}function w(e,t,r,a){if((0,n.Wi)(t))return x(e,r,a);var o=m(e,t,r.spatialReference);return r.equals(t.getOriginPoint(r.spatialReference))?C(o,r,a):x(o,r,a)}function b(e,t,r,a,o){if((0,n.Wi)(r))return null;var i=new Float32Array(r.length);return(0,h.a)(p.ct.fromTypedArray(i),p.ct.fromTypedArray(r),a),(0,g.Yk)(i,e,t,o,i),i}function A(e,t,r,a,o){if((0,n.Wi)(r))return null;var i=new Float32Array(r.length);(0,h.a)(p.ct.fromTypedArray(i,4*Float32Array.BYTES_PER_ELEMENT),p.ct.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),a);for(var s=3;s<i.length;s+=4)i[s]=r[s];return(0,g.M2)(i,e,t,o,i),i}function C(e,t,r){for(var n=new Float64Array(e.position.length),a=e.position,o=t.x,i=t.y,s=t.z||0,l=F(r?r.unit:null,t.spatialReference),u=l.horizontal,c=l.vertical,f=0;f<a.length;f+=3)n[f+0]=(a[f+0]-o)/u,n[f+1]=(a[f+1]-i)/u,n[f+2]=(a[f+2]-s)/c;return{position:n,normal:e.normal,tangent:e.tangent}}function Z(e,t,r){(0,u.Bm)(e.spatialReference,[e.x,e.y,e.z||0],r,(0,c.rS)(e.spatialReference));var n=F(t?t.unit:null,e.spatialReference),a=n.horizontal,o=n.vertical;return(0,i.k)(r,r,[a,a,o]),r}function k(e,t,r,a,o){if((0,n.Wi)(e))return null;var i=(0,g.Iz)(e,t,r,a,new Float32Array(e.length)),s=p.ct.fromTypedArray(i);return(0,h.a)(s,s,o),i}function R(e,t,r,a,o){if((0,n.Wi)(e))return null;var i=(0,g.wi)(e,t,r,a,new Float32Array(e.length)),s=p.ct.fromTypedArray(i,4*Float32Array.BYTES_PER_ELEMENT);return(0,h.a)(s,s,o),i}function F(e,t){if((0,n.Wi)(e))return E;var r=t.isGeographic?1:(0,a.c9)(t),o=t.isGeographic?1:(0,a._R)(t),i=(0,a.En)(1,e,"meters");return{horizontal:i*r,vertical:i*o}}var M=(0,s.c)(),P=(0,s.c)(),T=(0,o.c)(),E={horizontal:1,vertical:1}},45957:function(e,t,r){r.r(t),r.d(t,{meshFeatureSetFromJSON:function(){return Be}});var n=r(37762),a=r(52639),o=r(92026),i=r(53866),s=r(1413),l=r(74165),u=r(15861),c=r(15671),f=r(43144),p=r(60136),h=r(29388),v=r(27366),g=r(10064),d=r(41691),m=r(54472),y=r(32718),x=r(67426),w=r(66978),b=r(94172),A=r(49861),C=(r(25243),r(63780),r(69912)),Z=r(71353),k=r(32238),R=r(585),F=r(80885),M=r(45238),P=r(64995),T=r(76046),E=r(27474),L=r(91320),O=r(79803),z=r(26548),I=r(57898),_=y.Z.getLogger("esri.geometry.support.meshUtils.centerAt");function S(e,t,r){var n;if(e.vertexAttributes&&e.vertexAttributes.position){var a=null!==(n=null===r||void 0===r?void 0:r.origin)&&void 0!==n?n:e.origin;(0,o.pC)(e.transform)?(null!=(null===r||void 0===r?void 0:r.geographic)&&r.geographic!==e.transform.geographic&&_.warn("Specifying the 'geographic' parameter (".concat(r.geographic,") different from the Mesh transform setting (").concat(e.transform.geographic,") is not supported")),function(e,t,r){var n=t.x-r.x,a=t.y-r.y,o=t.hasZ&&r.hasZ?t.z-r.z:0,i=e.origin;e.origin=[i[0]+n,i[1]+a,i[2]+o]}(e.transform,t,a)):(0,z.h)(e.spatialReference,r)?function(e,t,r){var n=(0,I.FF)(e.vertexAttributes,r,{geographic:!0}),a=(0,I.iv)(n,t,{geographic:!0}),o=a.position,i=a.normal,s=a.tangent;e.vertexAttributes.position=o,e.vertexAttributes.normal=i,e.vertexAttributes.tangent=s,e.vertexAttributesChanged()}(e,t,a):function(e,t,r){var n=j,a=N;if((0,O.KC)(t,a,e.spatialReference)){if(!(0,O.KC)(r,n,e.spatialReference)){var o=e.origin;n[0]=o.x,n[1]=o.y,n[2]=o.z,_.error("Failed to project specified origin (wkid:".concat(r.spatialReference.wkid,") to mesh spatial reference (wkid:").concat(e.spatialReference.wkid,")."))}(function(e,t,r){if(e)for(var n=0;n<e.length;n+=3)for(var a=0;a<3;a++)e[n+a]+=t[a]-r[a]})(e.vertexAttributes.position,a,n),e.vertexAttributesChanged()}else _.error("Failed to project centerAt location (wkid:".concat(t.spatialReference.wkid,") to mesh spatial reference (wkid:").concat(e.spatialReference.wkid,")"))}(e,t,a)}}var N=(0,Z.c)(),j=(0,Z.c)(),U=r(35995);function W(){return W=(0,u.Z)((0,l.Z)().mark((function e(t,n,a){var i,s,u,c,f,p,h;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.Hl)(r.e(5886).then(r.bind(r,35886)),a);case 2:return i=e.sent,s=i.loadGLTFMesh,e.next=6,D(n,a);case 6:return u=e.sent,(c=s(new R.Z({x:0,y:0,z:0,spatialReference:t.spatialReference}),u.url,{resolveFile:B(u),useTransform:!0,signal:(0,o.pC)(a)?a.signal:null})).then((function(){return u.dispose()}),(function(){return u.dispose()})),e.next=11,c;case 11:f=e.sent,p=f.vertexAttributes,h=f.components,t.vertexAttributes=p,t.components=h;case 15:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function B(e){var t=(0,U.Yd)(e.url);return function(r){var n,a=(0,U.PF)(r,t,t),o=a?a.replace(/^ *\.\//,""):null;return null!==(n=o?e.files.get(o):null)&&void 0!==n?n:r}}function D(e,t){return G.apply(this,arguments)}function G(){return(G=(0,u.Z)((0,l.Z)().mark((function e(t,r){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t instanceof Blob?q.fromBlob(t):"string"==typeof t?new q(t):Array.isArray(t)?Y(t,r):V(t,r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t){return K.apply(this,arguments)}function K(){return K=(0,u.Z)((0,l.Z)().mark((function e(t,r){var a,i,s,c,f,p,h,v,d,m,y,x;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Map,i=null,e.next=4,(0,w.WW)(t.map(function(){var e=(0,u.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.name,e.next=3,D(t instanceof Blob?t:t.source,r);case 3:return e.t1=e.sent,e.abrupt("return",{name:e.t0,source:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:s=e.sent,c=[],f=(0,n.Z)(s);try{for(f.s();!(p=f.n()).done;)(h=p.value)&&((0,w.Hc)(r)?h.source.dispose():c.push(h))}catch(b){f.e(b)}finally{f.f()}for((0,w.k_)(r),v=0,d=c;v<d.length;v++)m=d[v],y=m.name,x=m.source,((0,o.Wi)(i)||/\.(gltf|glb)/i.test(y))&&(i=x.url),a.set(y,x.url),x.files&&x.files.forEach((function(e,t){return a.set(t,e)}));if(!(0,o.Wi)(i)){e.next=12;break}throw new g.Z("mesh-load-external:missing-files","Missing files to load external mesh source");case 12:return e.abrupt("return",new q(i,(function(){return c.forEach((function(e){return e.source.dispose()}))}),a));case 13:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}function V(e,t){return X.apply(this,arguments)}function X(){return X=(0,u.Z)((0,l.Z)().mark((function e(t,n){var a,o,i;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.Hl)(Promise.resolve().then(r.bind(r,76200)),n);case 2:if(a=e.sent,o=a.default,"string"!=typeof t.multipart[0]){e.next=10;break}return e.next=7,Promise.all(t.multipart.map(function(){var e=(0,u.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t,{responseType:"array-buffer"});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=t.multipart;case 11:return i=e.t0,e.abrupt("return",q.fromBlob(new Blob(i)));case 13:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}var q=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;(0,c.Z)(this,e),this.url=t,this.dispose=r,this.files=n}return(0,f.Z)(e,null,[{key:"fromBlob",value:function(t){var r=URL.createObjectURL(t);return new e(r,(function(){return URL.revokeObjectURL(r)}))}}]),e}(),H=r(22753),J=r(11873),Q=r(81949),$=r(11186),ee=r(29691),te=r(11700);function re(e,t,r){var n,a;e.vertexAttributes&&e.vertexAttributes.position&&((0,o.pC)(e.transform)?(null!=(null===r||void 0===r?void 0:r.geographic)&&r.geographic!==e.transform.geographic&&y.Z.getLogger("esri.geometry.support.meshUtils.offset").warn("Specifying the 'geographic' parameter (".concat(r.geographic,") different from the Mesh transform setting (").concat(e.transform.geographic,") is not supported")),function(e,t){var r=e.origin;e.origin=(0,$.a)((0,Z.c)(),r,t)}(e.transform,t)):(0,z.h)(e.spatialReference,r)?function(e,t){var r=e.spatialReference,n=e.vertexAttributes.position,a=e.vertexAttributes.normal,i=e.vertexAttributes.tangent,s=new Float64Array(n.length),l=(0,o.pC)(a)?new Float32Array(a.length):null,u=(0,o.pC)(i)?new Float32Array(i.length):null,c=e.extent.center,f=ae;(0,O.Bm)(r,[c.x,c.y,c.z],oe,(0,ee.rS)(r)),(0,H.f)(ie,oe),(0,$.t)(f,t,ie),(0,te.XO)(n,r,s),(0,o.pC)(a)&&(0,o.pC)(l)&&(0,te.Iz)(a,n,s,r,l),(0,o.pC)(i)&&(0,o.pC)(u)&&(0,te.wi)(i,n,s,r,u),ne(s,f),(0,te.To)(s,n,r),(0,o.pC)(a)&&(0,o.pC)(l)&&(0,te.Yk)(l,n,s,r,a),(0,o.pC)(i)&&(0,o.pC)(u)&&(0,te.M2)(u,n,s,r,i),e.vertexAttributesChanged()}(e,t):(a=t,ne((n=e).vertexAttributes.position,a),n.vertexAttributesChanged()))}function ne(e,t){if(e)for(var r=0;r<e.length;r+=3)for(var n=0;n<3;n++)e[r+n]+=t[n]}var ae=(0,Z.c)(),oe=(0,Q.c)(),ie=(0,J.c)();var se={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};function le(e,t,r){e.isPlane||function(e){for(var t=0;t<e.position.length;t+=3)e.position[t+2]+=.5}(e),function(e,t){if(null==t)return;var r="number"==typeof t?[t,t,t]:[null!=t.width?t.width:1,null!=t.depth?t.depth:1,null!=t.height?t.height:1];pe[0]=r[0],pe[4]=r[1],pe[8]=r[2];for(var n=0;n<e.position.length;n+=3){for(var a=0;a<3;a++)fe[a]=e.position[n+a];(0,$.t)(fe,fe,pe);for(var o=0;o<3;o++)e.position[n+o]=fe[o]}if(r[0]!==r[1]||r[1]!==r[2]){pe[0]=1/r[0],pe[4]=1/r[1],pe[8]=1/r[2];for(var i=0;i<e.normal.length;i+=3){for(var s=0;s<3;s++)fe[s]=e.normal[i+s];(0,$.t)(fe,fe,pe),(0,$.n)(fe,fe);for(var l=0;l<3;l++)e.normal[i+l]=fe[l]}}}(e,null===r||void 0===r?void 0:r.size);var n=(0,I.w1)(e,t,r),a=n.vertexAttributes,o=n.transform;return{vertexAttributes:new E.Q((0,s.Z)((0,s.Z)({},a),{},{uv:e.uv})),transform:o,components:[new P.Z({faces:e.faces,material:r&&r.material||null})],spatialReference:t.spatialReference}}var ue={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},ce={south:0,east:1,north:2,west:3,up:4,down:5},fe=(0,Z.c)(),pe=(0,J.c)(),he=r(14226),ve=y.Z.getLogger("esri.geometry.support.meshUtils.rotate");function ge(e,t,r){if(e.vertexAttributes&&e.vertexAttributes.position&&0!==t[3]){var n=e.spatialReference;if((0,o.pC)(e.transform)){var a;null!=(null===r||void 0===r?void 0:r.geographic)&&r.geographic!==e.transform.geographic&&ve.warn("Specifying the 'geographic' parameter (".concat(r.geographic,") different from the Mesh transform setting (").concat(e.transform.geographic,") is not supported"));var i=null!==(a=null===r||void 0===r?void 0:r.origin)&&void 0!==a?a:e.transform.getOriginPoint(n);!function(e,t,r){var n=(0,$.s)(me,r.x,r.y,r.z),a=(0,$.b)(me,n,e.origin);e.applyLocalInverse(a,ye),e.rotation=(0,M.qC)(e.rotation,t,(0,M.Ue)()),e.applyLocalInverse(a,a),(0,$.b)(a,a,ye),e.translation=(0,$.a)((0,Z.c)(),e.translation,a)}(e.transform,t,i)}else{var s,l=null!==(s=null===r||void 0===r?void 0:r.origin)&&void 0!==s?s:e.origin;(0,z.h)(e.spatialReference,r)?function(e,t,r){var n=e.spatialReference,a=(0,ee.rS)(n),i=Ae;(0,O.KC)(r,i,a)||(0,O.KC)(e.origin,i,a);var s=e.vertexAttributes.position,l=e.vertexAttributes.normal,u=e.vertexAttributes.tangent,c=new Float64Array(s.length),f=(0,o.pC)(l)?new Float32Array(l.length):null,p=(0,o.pC)(u)?new Float32Array(u.length):null;(0,O.Bm)(a,i,we,a),(0,H.f)(be,we);var h=xe;(0,$.t)((0,M.ZZ)(xe),(0,M.ZZ)(t),be),h[3]=t[3],(0,te.XO)(s,n,c),(0,o.pC)(l)&&(0,o.pC)(f)&&(0,te.Iz)(l,s,c,n,f),(0,o.pC)(u)&&(0,o.pC)(p)&&(0,te.wi)(u,s,c,n,p),de(c,h,3,i),(0,te.To)(c,s,n),(0,o.pC)(l)&&(0,o.pC)(f)&&(de(f,h,3),(0,te.Yk)(f,s,c,n,l)),(0,o.pC)(u)&&(0,o.pC)(p)&&(de(p,h,4),(0,te.M2)(p,s,c,n,u)),e.vertexAttributesChanged()}(e,t,l):function(e,t,r){var n=Ae;if(!(0,O.KC)(r,n,e.spatialReference)){var a=e.origin;n[0]=a.x,n[1]=a.y,n[2]=a.z,ve.error("Failed to project specified origin (wkid:".concat(r.spatialReference.wkid,") to mesh spatial reference (wkid:").concat(e.spatialReference.wkid,")."))}de(e.vertexAttributes.position,t,3,n),de(e.vertexAttributes.normal,t,3),de(e.vertexAttributes.tangent,t,4),e.vertexAttributesChanged()}(e,t,l)}}}function de(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Z.Z;if(!(0,o.Wi)(e)){(0,he.d)(we,(0,M.WH)(t),(0,M.ZZ)(t));for(var a=0;a<e.length;a+=r){for(var i=0;i<3;i++)me[i]=e[a+i]-n[i];(0,$.m)(me,me,we);for(var s=0;s<3;s++)e[a+s]=me[s]+n[s]}}}var me=(0,Z.c)(),ye=(0,Z.c)(),xe=(0,M.Ue)(),we=(0,Q.c)(),be=(0,J.c)(),Ae=(0,Z.c)(),Ce=y.Z.getLogger("esri.geometry.support.meshUtils.scale");function Ze(e,t,r){if(e.vertexAttributes&&e.vertexAttributes.position){var n=e.spatialReference;if((0,o.pC)(e.transform)){var a;null!=(null===r||void 0===r?void 0:r.geographic)&&r.geographic!==e.transform.geographic&&Ce.warn("Specifying the 'geographic' parameter (".concat(r.geographic,") different from the Mesh transform setting (").concat(e.transform.geographic,") is not supported"));var i=null!==(a=null===r||void 0===r?void 0:r.origin)&&void 0!==a?a:e.transform.getOriginPoint(n);!function(e,t,r){var n=(0,$.s)(Fe,r.x,r.y,r.z),a=(0,$.b)(Fe,n,e.origin);e.applyLocalInverse(a,Me);var o=(0,$.g)((0,Z.c)(),e.scale,t);e.scale=o,e.applyLocalInverse(a,a),(0,$.b)(a,a,Me),e.translation=(0,$.a)((0,Z.c)(),e.translation,a)}(e.transform,t,i)}else{var s=(0,z.h)(e.spatialReference,r),l=r&&r.origin||e.origin;s?function(e,t,r){var n=e.spatialReference,a=(0,ee.rS)(n),i=Pe;(0,O.KC)(r,i,a)||(0,O.KC)(e.origin,i,a);var s=e.vertexAttributes.position,l=e.vertexAttributes.normal,u=e.vertexAttributes.tangent,c=new Float64Array(s.length),f=(0,o.pC)(l)?new Float32Array(l.length):null,p=(0,o.pC)(u)?new Float32Array(u.length):null;(0,te.XO)(s,n,c),(0,o.pC)(l)&&(0,o.pC)(f)&&(0,te.Iz)(l,s,c,n,f),(0,o.pC)(u)&&(0,o.pC)(p)&&(0,te.wi)(u,s,c,n,p),ke(c,t,i),(0,te.To)(c,s,n),(0,o.pC)(l)&&(0,o.pC)(f)&&(0,te.Yk)(f,s,c,n,l),(0,o.pC)(u)&&(0,o.pC)(p)&&(0,te.M2)(p,s,c,n,u),e.vertexAttributesChanged()}(e,t,l):function(e,t,r){var n=Pe;if(!(0,O.KC)(r,n,e.spatialReference)){var a=e.origin;n[0]=a.x,n[1]=a.y,n[2]=a.z,Ce.error("Failed to project specified origin (wkid:".concat(r.spatialReference.wkid,") to mesh spatial reference (wkid:").concat(e.spatialReference.wkid,")."))}ke(e.vertexAttributes.position,t,n),e.vertexAttributesChanged()}(e,t,l)}}}function ke(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z.Z;if(e)for(var n=0;n<e.length;n+=3){for(var a=0;a<3;a++)Fe[a]=e[n+a]-r[a];(0,$.g)(Fe,Fe,t);for(var o=0;o<3;o++)e[n+o]=Fe[o]+r[o]}}var Re,Fe=(0,Z.c)(),Me=(0,Z.c)(),Pe=(0,Z.c)(),Te="esri.geometry.Mesh",Ee=Re=function(e){(0,p.Z)(a,e);var t=(0,h.Z)(a);function a(e){var r;return(0,c.Z)(this,a),(r=t.call(this,e)).components=null,r.transform=null,r.external=null,r.hasZ=!0,r.hasM=!1,r.vertexAttributes=new E.Q,r.type="mesh",r}return(0,f.Z)(a,[{key:"initialize",value:function(){var e=this;((0,o.Wi)(this.external)||this.vertexAttributes.position.length)&&(this.loadStatus="loaded"),this.when((function(){e.handles.add((0,b.YP)((function(){var t;return{vertexAttributes:e.vertexAttributes,components:null===(t=e.components)||void 0===t?void 0:t.map((function(e){return e.clone()}))}}),(function(){return e._set("external",null)}),{once:!0,sync:!0}))}))}},{key:"hasExtent",get:function(){return!this.loaded&&(0,o.pC)(this.external)&&(0,o.pC)(this.external.extent)||this.loaded&&this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0)}},{key:"_boundingInfo",get:function(){var e=this.vertexAttributes.position,t=this.spatialReference;if(0===e.length||this.components&&0===this.components.length)return{extent:new i.Z({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:t}),center:new R.Z({x:0,y:0,z:0,spatialReference:t})};for(var r=(0,o.pC)(this.transform)?this.transform.project(e,t):e,n=1/0,a=1/0,s=1/0,l=-1/0,u=-1/0,c=-1/0,f=0,p=0,h=0,v=r.length,g=1/(v/3),d=0;d<v;){var m=r[d++],y=r[d++],x=r[d++];n=Math.min(n,m),a=Math.min(a,y),s=Math.min(s,x),l=Math.max(l,m),u=Math.max(u,y),c=Math.max(c,x),f+=g*m,p+=g*y,h+=g*x}return{extent:new i.Z({xmin:n,ymin:a,zmin:s,xmax:l,ymax:u,zmax:c,spatialReference:t}),center:new R.Z({x:f,y:p,z:h,spatialReference:t})}}},{key:"anchor",get:function(){if((0,o.pC)(this.transform))return this.transform.getOriginPoint(this.spatialReference);var e=this._boundingInfo;return new R.Z({x:e.center.x,y:e.center.y,z:e.extent.zmin,spatialReference:this.spatialReference})}},{key:"origin",get:function(){return(0,o.pC)(this.transform)?this.transform.getOriginPoint(this.spatialReference):this._boundingInfo.center}},{key:"extent",get:function(){return!this.loaded&&(0,o.pC)(this.external)&&(0,o.pC)(this.external.extent)?this.external.extent.clone():this._boundingInfo.extent}},{key:"addComponent",value:function(e){this.loaded?(this.components||(this.components=[]),this.components.push(P.Z.from(e)),this.notifyChange("components")):y.Z.getLogger(this.declaredClass).error("addComponent()","Mesh must be loaded before applying operations")}},{key:"removeComponent",value:function(e){if(this.loaded){if(this.components){var t=this.components.indexOf(e);if(-1!==t)return this.components.splice(t,1),void this.notifyChange("components")}y.Z.getLogger(this.declaredClass).error("removeComponent()","Provided component is not part of the list of components")}else y.Z.getLogger(this.declaredClass).error("removeComponent()","Mesh must be loaded before applying operations")}},{key:"rotate",value:function(e,t,r,n){return(0,M.uT)(ze.x,e,Ie),(0,M.uT)(ze.y,t,_e),(0,M.uT)(ze.z,r,Se),(0,M.qC)(Ie,_e,Ie),(0,M.qC)(Ie,Se,Ie),ge(this,Ie,n),this}},{key:"offset",value:function(e,t,r,n){return this.loaded?(Ne[0]=e,Ne[1]=t,Ne[2]=r,re(this,Ne,n),this):(y.Z.getLogger(this.declaredClass).error("offset()","Mesh must be loaded before applying operations"),this)}},{key:"scale",value:function(e,t){return this.loaded?(Ze(this,e,t),this):(y.Z.getLogger(this.declaredClass).error("scale()","Mesh must be loaded before applying operations"),this)}},{key:"centerAt",value:function(e,t){return this.loaded?(S(this,e,t),this):(y.Z.getLogger(this.declaredClass).error("centerAt()","Mesh must be loaded before applying operations"),this)}},{key:"load",value:function(e){return(0,o.pC)(this.external)&&this.addResolvingPromise(function(e,t,r){return W.apply(this,arguments)}(this,this.external.source,e)),Promise.resolve(this)}},{key:"updateExternalSource",value:function(e){this._set("external",e)}},{key:"clone",value:function(){var e=null;if(this.components){var t=new Map,r=new Map;e=this.components.map((function(e){return e.cloneWithDeduplication(t,r)}))}var n={components:e,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),transform:(0,o.pC)(this.transform)?this.transform.clone():null,external:(0,o.pC)(this.external)?{source:this.external.source,extent:(0,o.pC)(this.external.extent)?this.external.extent.clone():null}:null};return new Re(n)}},{key:"vertexAttributesChanged",value:function(){this.notifyChange("vertexAttributes")}},{key:"toBinaryGLTF",value:function(){var e=(0,u.Z)((0,l.Z)().mark((function e(t){var n,a,o,i;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.e(5477).then(r.bind(r,95477)),a=this.load(),e.next=4,Promise.all([n,a]);case 4:return o=e.sent,i=o[0].toBinaryGLTF,e.abrupt("return",i(this,t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"createBox",value:function(e,t){if(!(e instanceof R.Z))return y.Z.getLogger(Te).error(".createBox()","expected location to be a Point instance"),null;var r=new Re(le(function(){for(var e=ue.faceDescriptions,t=ue.faceVertexOffsets,r=ue.uvScales,a=4*e.length,o=new Float64Array(3*a),i=new Float32Array(3*a),s=new Float32Array(2*a),l=new Uint32Array(2*e.length*3),u=0,c=0,f=0,p=0,h=0;h<e.length;h++){var v,g=e[h],d=u/3,m=(0,n.Z)(t);try{for(m.s();!(v=m.n()).done;){var y=v.value;l[p++]=d+y}}catch(Z){m.e(Z)}finally{m.f()}for(var x=g.corners,w=0;w<4;w++){var b=x[w],A=0;s[f++]=.25*r[w][0]+g.uvOrigin[0],s[f++]=g.uvOrigin[1]-.25*r[w][1];for(var C=0;C<3;C++)0!==g.axis[C]?(o[u++]=.5*g.axis[C],i[c++]=g.axis[C]):(o[u++]=.5*b[A++],i[c++]=0)}}return{position:o,normal:i,uv:s,faces:l}}(),e,t));return t&&t.imageFace&&"all"!==t.imageFace?function(e,t){for(var r=e.components[0],n=r.faces,a=ce[t],i=6*a,s=new Array(6),l=new Array(n.length-6),u=0,c=0,f=0;f<n.length;f++)f>=i&&f<i+6?s[u++]=n[f]:l[c++]=n[f];if((0,o.pC)(e.vertexAttributes.uv)){for(var p=new Float32Array(e.vertexAttributes.uv),h=4*a*2,v=[0,1,1,1,1,0,0,0],g=0;g<v.length;g++)p[h+g]=v[g];e.vertexAttributes.uv=p}return e.components=[new P.Z({faces:s,material:r.material}),new P.Z({faces:l})],e}(r,t.imageFace):r}},{key:"createSphere",value:function(e,t){return e instanceof R.Z?new Re(le(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Math.round(8*Math.pow(2,e)),r=2*t,n=(t-1)*(r+1)+2*r,a=new Float64Array(3*n),o=new Float32Array(3*n),i=new Float32Array(2*n),s=new Uint32Array((t-1)*r*2*3),l=0,u=0,c=0,f=0,p=0;p<=t;p++){var h=p/t*Math.PI+.5*Math.PI,v=Math.cos(h),g=Math.sin(h);fe[2]=g;for(var d=0===p||p===t,m=d?r-1:r,y=0;y<=m;y++){var x=y/m*2*Math.PI;fe[0]=-Math.sin(x)*v,fe[1]=Math.cos(x)*v;for(var w=0;w<3;w++)a[l]=.5*fe[w],o[l]=fe[w],++l;i[u++]=(y+(d?.5:0))/r,i[u++]=p/t,0!==p&&y!==r&&(p!==t&&(s[c++]=f,s[c++]=f+1,s[c++]=f-r),1!==p&&(s[c++]=f,s[c++]=f-r,s[c++]=f-r-1)),f++}}return{position:a,normal:o,uv:i,faces:s}}(t&&t.densificationFactor||0),e,t)):(y.Z.getLogger(Te).error(".createSphere()","expected location to be a Point instance"),null)}},{key:"createCylinder",value:function(e,t){return e instanceof R.Z?new Re(le(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Math.round(16*Math.pow(2,e)),r=4*(t+1)+2*t,n=new Float64Array(3*r),a=new Float32Array(3*r),o=new Float32Array(2*r),i=new Uint32Array(4*t*3),s=0,l=0,u=0,c=0,f=0,p=0;p<=5;p++)for(var h=0===p||5===p,v=p<=1||p>=4,g=2===p||4===p,d=h?t-1:t,m=0;m<=d;m++){var y=m/d*2*Math.PI,x=h?0:.5;fe[0]=x*Math.sin(y),fe[1]=x*-Math.cos(y),fe[2]=p<=2?.5:-.5;for(var w=0;w<3;w++)n[s++]=fe[w],a[l++]=v?2===w?p<=1?1:-1:0:2===w?0:fe[w]/x;o[u++]=(m+(h?.5:0))/t,o[u++]=p<=1?1*p/3:p<=3?1*(p-2)/3+1/3:1*(p-4)/3+2/3,g||0===p||m===t||(5!==p&&(i[c++]=f,i[c++]=f+1,i[c++]=f-t),1!==p&&(i[c++]=f,i[c++]=f-t,i[c++]=f-t-1)),f++}return{position:n,normal:a,uv:o,faces:i}}(t&&t.densificationFactor||0),e,t)):(y.Z.getLogger(Te).error(".createCylinder()","expected location to be a Point instance"),null)}},{key:"createPlane",value:function(e,t){var r;if(!(e instanceof R.Z))return y.Z.getLogger(Te).error(".createPlane()","expected location to be a Point instance"),null;var n=null!==(r=null===t||void 0===t?void 0:t.facing)&&void 0!==r?r:"up",a=function(e,t){var r="number"==typeof t?t:null!=t?t.width:1,n="number"==typeof t?t:null!=t?t.height:1;switch(e){case"up":case"down":return{width:r,depth:n};case"north":case"south":return{width:r,height:n};case"east":case"west":return{depth:r,height:n}}}(n,null===t||void 0===t?void 0:t.size);return new Re(le(function(e){for(var t=se.facingAxisOrderSwap[e],r=se.position,n=se.normal,a=new Float64Array(r.length),o=new Float32Array(n.length),i=0,s=0;s<4;s++)for(var l=i,u=0;u<3;u++){var c=t[u],f=Math.abs(c)-1,p=c>=0?1:-1;a[i]=r[l+f]*p,o[i]=n[l+f]*p,i++}return{position:a,normal:o,uv:new Float32Array(se.uv),faces:new Uint32Array(se.faces),isPlane:!0}}(n),e,(0,s.Z)((0,s.Z)({},t),{},{size:a})))}},{key:"createFromPolygon",value:function(e,t){var r;if(!(e instanceof F.Z))return y.Z.getLogger(Te).error(".createFromPolygon()","expected polygon to be a Polygon instance"),null;var n=(0,L.bT)(e);return new Re({vertexAttributes:new E.Q({position:n.position}),components:[new P.Z({faces:n.faces,shading:"flat",material:null!==(r=null===t||void 0===t?void 0:t.material)&&void 0!==r?r:null})],spatialReference:e.spatialReference})}},{key:"createFromGLTF",value:function(){var e=(0,u.Z)((0,l.Z)().mark((function e(t,n,a){var o,i;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof R.Z){e.next=2;break}throw y.Z.getLogger(Te).error(".createfromGLTF()","expected location to be a Point instance"),new g.Z("invalid-input","Expected location to be a Point instance");case 2:return e.next=4,(0,w.Hl)(r.e(5886).then(r.bind(r,35886)),a);case 4:return o=e.sent,i=o.loadGLTFMesh,e.t0=Re,e.next=9,i(t,n,a);case 9:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 11:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"createWithExternalSource",value:function(e,t,r){var n,a,o,i,s=null!==(n=null===r||void 0===r?void 0:r.extent)&&void 0!==n?n:null,l=null!==(a=null===r||void 0===r||null===(o=r.transform)||void 0===o?void 0:o.clone())&&void 0!==a?a:new T.Z;l.origin=[e.x,e.y,null!==(i=e.z)&&void 0!==i?i:0];var u=e.spatialReference;return new Re({external:{source:t,extent:s},transform:l,spatialReference:u})}},{key:"createIncomplete",value:function(e,t){var r,n,a,o=null!==(r=null===t||void 0===t||null===(n=t.transform)||void 0===n?void 0:n.clone())&&void 0!==r?r:new T.Z;o.origin=[e.x,e.y,null!==(a=e.z)&&void 0!==a?a:0];var i=e.spatialReference,s=new Re({transform:o,spatialReference:i});return s.addResolvingPromise(Promise.reject(new g.Z("mesh-incomplete","Mesh resources are not complete"))),s}}]),a}((0,d.p)(m.Z.LoadableMixin((0,x.v)(k.Z))));(0,v._)([(0,A.Cb)({type:[P.Z],json:{write:!0}})],Ee.prototype,"components",void 0),(0,v._)([(0,A.Cb)({type:T.Z,json:{write:!0}})],Ee.prototype,"transform",void 0),(0,v._)([(0,A.Cb)({constructOnly:!0})],Ee.prototype,"external",void 0),(0,v._)([(0,A.Cb)({readOnly:!0})],Ee.prototype,"hasExtent",null),(0,v._)([(0,A.Cb)({readOnly:!0})],Ee.prototype,"_boundingInfo",null),(0,v._)([(0,A.Cb)({readOnly:!0})],Ee.prototype,"anchor",null),(0,v._)([(0,A.Cb)({readOnly:!0})],Ee.prototype,"origin",null),(0,v._)([(0,A.Cb)({readOnly:!0,json:{read:!1}})],Ee.prototype,"extent",null),(0,v._)([(0,A.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!0}})],Ee.prototype,"hasZ",void 0),(0,v._)([(0,A.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!1}})],Ee.prototype,"hasM",void 0),(0,v._)([(0,A.Cb)({type:E.Q,nonNullable:!0,json:{write:!0}})],Ee.prototype,"vertexAttributes",void 0),Ee=Re=(0,v._)([(0,C.j)(Te)],Ee);var Le,Oe,ze={x:(0,Z.f)(1,0,0),y:(0,Z.f)(0,1,0),z:(0,Z.f)(0,0,1)},Ie=(0,M.Ue)(),_e=(0,M.Ue)(),Se=(0,M.Ue)(),Ne=(0,Z.c)(),je=Ee,Ue=r(78952),We=r(49818);function Be(e,t,r){var i,s=r.features;r.features=[],delete r.geometryType;var l=We.Z.fromJSON(r);if(l.geometryType="mesh",!r.assetMaps)return l;var u,c,f=function(e,t){var r,a=new Map,o=(0,n.Z)(t);try{for(o.s();!(r=o.n()).done;){var i=r.value,s=i.parentGlobalId;if(null!=s){var l=i.assetName,u=i.assetURL,c=i.conversionStatus,f=a.get(s);if(null==f)switch(f={name:l,status:Le.FAILED,url:u,projectVertices:Ge(i.flags).projectVertices},a.set(s,f),c){case"COMPLETED":case"SUBMITTED":f.status=Le.COMPLETED;break;case"INPROGRESS":f.status=Le.PENDING;break;default:f.status=Le.FAILED}else console.warn("Multiple asset parts not expected. Ignoring additional parts. conflicting assetname: ".concat(i.assetName))}}}catch(p){o.e(p)}finally{o.f()}return a}(0,r.assetMaps),p=null!==(i=l.spatialReference)&&void 0!==i?i:Ue.Z.WGS84,h=r.globalIdFieldName,v=e.outFields,g=(0,o.pC)(v)&&v.length>0?(u=v.includes("*")?null:new Set(v),function(e){var t=e.attributes;if(!t)return{};if(!u)return t;for(var r in t)u.has(r)||delete t[r];return t}):function(){return{}},d=(0,n.Z)(s);try{for(d.s();!(c=d.n()).done;){var m=c.value,y=De(m,h,p,t,f);(0,o.pC)(y)&&l.features.push(new a.Z({geometry:y,attributes:g(m)}))}}catch(x){d.e(x)}finally{d.f()}return l}function De(e,t,r,n,a){var o=e.attributes[t],s=a.get(o);if(null==s||s.status===Le.FAILED||null==s.url)return null;var l=function(e,t,r){var n=e.attributes,a=r.transformFieldRoles;return new R.Z({x:n[a.originX],y:n[a.originY],z:n[a.originZ],spatialReference:t})}(e,r,n),u=i.Z.fromJSON(e.geometry);u.spatialReference=r;var c=function(e,t,r){var n=t.transformFieldRoles;return new T.Z({translation:[e[n.translationX],-e[n.translationZ],e[n.translationY]],rotation:(0,M.uT)([e[n.rotationX],e[n.rotationZ],e[n.rotationY]],e[n.rotationDeg]),scale:[e[n.scaleX],e[n.scaleY],e[n.scaleZ]],geographic:r})}(e.attributes,n,s.projectVertices);return s.status===Le.PENDING?je.createIncomplete(l,{extent:u,transform:c}):je.createWithExternalSource(l,[{name:s.name,source:s.url}],{extent:u,transform:c})}function Ge(e){return{projectVertices:e.includes("PROJECT_VERTICES")}}(Oe=Le||(Le={}))[Oe.FAILED=0]="FAILED",Oe[Oe.PENDING=1]="PENDING",Oe[Oe.COMPLETED=2]="COMPLETED"}}]);
//# sourceMappingURL=5957.2190774a.chunk.js.map