{"version":3,"file":"static/js/7199.c145a5ef.chunk.js","mappings":"iJAIIA,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,E,2JAAG,SAASL,GAAGA,EAAEA,EAAEM,OAAO,GAAG,SAASN,EAAEA,EAAEO,KAAK,GAAG,MAAM,CAArD,CAAuDP,IAAIA,EAAE,CAAC,IAAI,SAASA,GAAGA,EAAEA,EAAEQ,UAAU,GAAG,YAAYR,EAAEA,EAAES,UAAU,GAAG,YAAYT,EAAEA,EAAEU,SAAS,GAAG,WAAWV,EAAEA,EAAEW,aAAa,GAAG,eAAeX,EAAEA,EAAEY,QAAQ,GAAG,UAAUZ,EAAEA,EAAEa,cAAc,GAAG,eAAe,CAAjM,CAAmMZ,IAAIA,EAAE,CAAC,IAAI,SAASD,GAAGA,EAAEA,EAAEc,KAAK,GAAG,OAAOd,EAAEA,EAAEe,MAAM,GAAG,QAAQf,EAAEA,EAAEgB,KAAK,GAAG,MAAM,CAAtE,CAAwEd,IAAIA,EAAE,CAAC,IAAI,SAASF,GAAGA,EAAEA,EAAEiB,IAAI,GAAG,MAAMjB,EAAEA,EAAEkB,OAAO,GAAG,SAASlB,EAAEA,EAAEmB,KAAK,GAAG,MAAM,CAAtE,CAAwEhB,IAAIA,EAAE,CAAC,IAAI,SAASH,GAAGA,EAAEA,EAAEc,KAAK,GAAG,OAAOd,EAAEA,EAAEoB,eAAe,GAAG,iBAAiBpB,EAAEA,EAAEqB,OAAO,GAAG,SAASrB,EAAEA,EAAEsB,gBAAgB,GAAG,kBAAkBtB,EAAEA,EAAEuB,WAAW,GAAG,aAAavB,EAAEA,EAAEwB,WAAW,IAAI,aAAaxB,EAAEA,EAAEyB,QAAQ,IAAI,UAAUzB,EAAEA,EAAE0B,YAAY,IAAI,cAAc1B,EAAEA,EAAE2B,uBAAuB,KAAK,yBAAyB3B,EAAEA,EAAE4B,sBAAsB,KAAK,wBAAwB5B,EAAEA,EAAE6B,YAAY,KAAK,cAAc7B,EAAEA,EAAE8B,gBAAgB,MAAM,kBAAkB9B,EAAEA,EAAE+B,iBAAiB,MAAM,mBAAmB/B,EAAEA,EAAEgC,oBAAoB,MAAM,sBAAsBhC,EAAEA,EAAEiC,WAAW,MAAM,aAAajC,EAAEA,EAAEkC,aAAa,OAAO,eAAelC,EAAEA,EAAEmC,eAAe,OAAO,iBAAiBnC,EAAEA,EAAEoC,aAAa,OAAO,eAAepC,EAAEA,EAAEqC,cAAc,QAAQ,eAAe,CAAtuB,CAAwuBjC,IAAIA,EAAE,CAAC,IAAI,SAASJ,GAAGA,EAAEA,EAAEsC,YAAY,GAAG,cAActC,EAAEA,EAAEsB,gBAAgB,GAAG,kBAAkBtB,EAAEA,EAAEoB,eAAe,GAAG,gBAAgB,CAA5H,CAA8Hf,IAAIA,EAAE,CAAC,I,eCApjC,SAASJ,EAAED,GAAG,OAAOE,EAAAA,EAAAA,GAAE,iBAADqC,OAAkBvC,GAAI,C,ICAowCwC,E,uHAAvDC,EAAExC,EAAAA,EAAAA,UAAY,sCAA4C,SAASD,GAAGA,EAAEA,EAAE0C,SAAS,GAAG,WAAW1C,EAAEA,EAAE2C,gBAAgB,GAAG,kBAAkB3C,EAAEA,EAAE4C,UAAU,GAAG,YAAY5C,EAAEA,EAAE6C,MAAM,GAAG,OAAO,CAAjI,CAAmIL,IAAIA,EAAE,CAAC,IAAI,IAAMM,EAAC,WAAC,SAAAA,EAAY9C,IAAE+C,EAAAA,EAAAA,GAAA,KAAAD,GAACE,KAAKC,2BAA0B,EAAGD,KAAKE,8BAA6B,EAAGF,KAAKG,4BAA2B,EAAGH,KAAKI,kBAAkB,KAAKJ,KAAKK,oBAAoB,KAAKL,KAAKM,uBAAuB,KAAKN,KAAKO,uBAAuB,KAAKP,KAAKQ,qBAAqB,KAAKR,KAAKS,YAAY,KAAKT,KAAKU,KAAK,KAAKV,KAAKW,iBAAgB,EAAGX,KAAKY,aAAY,EAAGZ,KAAKa,gBAAgB,EAAEb,KAAKc,iBAAiB,EAAEd,KAAKe,WAAW,GAAGf,KAAKgB,QAAQ,IAAIC,IAAIjB,KAAKkB,cAAcC,EAAAA,EAAAA,MAAQnB,KAAKoB,YAAYC,EAAAA,EAAAA,MAAQrB,KAAKsB,MAAM,KAAKtB,KAAKuB,uBAAuB,KAAKvB,KAAKwB,yBAAwB,EAAGxB,KAAKyB,mBAAmB,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,MAAM,MAAM,OAAOzB,KAAK0B,eAAe,IAAIT,IAAIjB,KAAK2B,UAAU,IAAIC,IAAI5B,KAAK6B,iBAAgB,EAAG7B,KAAK8B,SAAS,KAAK9B,KAAK+B,sBAAsB,EAAE/B,KAAKgC,oBAAoB,KAAKhC,KAAKiC,KAAKC,EAAAA,GAAAA,MAAQlC,KAAKmC,mBAAkB,EAAGnC,KAAKoC,UAAS,EAAGpC,KAAKqC,SAAS,GAAGrC,KAAKsC,MAAMtF,EAAEgD,KAAKuC,aAAa,CAA+4qB,OAA94qBC,EAAAA,EAAAA,GAAA1C,EAAA,EAAA2C,IAAA,YAAAC,IAAA,WAAgB,QAAQ1C,KAAKU,MAAM,UAAUV,KAAKsC,MAAMK,WAAW,GAAC,CAAAF,IAAA,OAAAG,MAAA,SAAK5F,EAAEE,GAAG8C,KAAK2B,UAAUkB,IAAI7F,KAAKA,IAAIwC,EAAEK,MAAMJ,EAAEqD,MAAM5F,GAAGuC,EAAEsD,KAAK7F,GAAG,GAAC,CAAAuF,IAAA,sBAAAG,MAAA,WAAsB5C,KAAKW,iBAAiBX,KAAKsC,MAAMU,SAAShD,KAAKiD,KAAKzD,EAAEE,SAAS,0BAA0BM,KAAKsC,MAAMU,OAAOE,mBAAmBlD,OAAOA,KAAKW,iBAAgB,CAAE,GAAC,CAAA8B,IAAA,cAAAG,MAAA,WAAa,IAAAO,EAAA,KAACnD,KAAKiD,KAAKzD,EAAEE,SAAS,kBAAkB,IAAsC0D,EAAtCC,GAAAC,EAAAA,EAAAA,GAAetD,KAAKyB,oBAAkB,IAAtC,IAAA4B,EAAAE,MAAAH,EAAAC,EAAAlG,KAAAqG,MAAuC,KAA7BxG,EAACoG,EAAAR,MAA4B5C,KAAK0B,eAAe+B,IAAIzG,EAAE,EAAE,CAAC,OAAA0G,GAAAL,EAAArG,EAAA0G,EAAA,SAAAL,EAAAM,GAAA,CAAA3D,KAAKI,mBAAkB/C,EAAAA,EAAAA,KAAG,kBAAI8F,EAAKb,MAAMsB,KAAK,IAAG,SAAA5G,GAAIA,GAAG,UAAUmG,EAAKb,MAAMK,aAAaQ,EAAKF,KAAKzD,EAAEE,SAAS,+EAA+EyD,EAAKb,MAAMU,OAAOa,gBAAgB,CAACV,EAAK/B,aAAa+B,GAAMA,EAAKxC,iBAAgB,IAAKwC,EAAKF,KAAKzD,EAAEE,SAAS,6DAA6DyD,EAAKW,sBAAsB,GAAG,CAACC,SAAQ,IAAK/D,KAAKK,qBAAoBhD,EAAAA,EAAAA,KAAG,eAAA2G,EAAA,OAAc,QAAdA,EAAIb,EAAKb,aAAK,IAAA0B,OAAA,EAAVA,EAAYC,cAAc,IAAG,SAAAjH,GAAImG,EAAKF,KAAKzD,EAAEI,UAAU,6BAA6B5C,GAAGmG,EAAKzC,MAAMyC,EAAKzC,KAAKwD,YAAYf,EAAKgB,eAAenH,GAAG,GAAG,CAAC+G,SAAQ,IAAK/D,KAAKO,wBAAuBlD,EAAAA,EAAAA,KAAG,eAAA+G,EAAA,OAAc,QAAdA,EAAIjB,EAAKb,aAAK,IAAA8B,OAAA,EAAVA,EAAYC,UAAU,IAAG,WAAK,GAAGlB,EAAKzC,KAAK,KAAA4D,EAAOtH,EAAEmG,EAAKoB,aAAuB,QAAXD,EAACnB,EAAKb,aAAK,IAAAgC,OAAA,EAAVA,EAAYD,YAAYlB,EAAKF,KAAKzD,EAAEI,UAAU,2CAA2C5C,EAAEwH,QAAQ,OAAOxH,EAAEyH,UAAU,OAAOzH,EAAE0H,SAASvB,EAAKzC,KAAKiE,sBAAsB3H,EAAEyH,UAAUzH,EAAE0H,QAAQ1H,EAAEwH,SAASrB,EAAK3C,qBAAqBoE,eAAe,CAAC,GAAG,CAACb,SAAQ,IAAK/D,KAAKM,wBAAuBjD,EAAAA,EAAAA,KAAG,eAAAwH,EAAA,OAAc,QAAdA,EAAI1B,EAAKb,aAAK,IAAAuC,OAAA,EAAVA,EAAYC,UAAU,IAAG,SAAA9H,GAAImG,EAAKzC,MAAM1D,IAAImG,EAAK3B,yBAAyB2B,EAAK3C,qBAAqBoE,eAAe,GAAG,GAAC,CAAAnC,IAAA,0BAAAG,MAAA,SAAwB5F,GAAGgD,KAAKiD,KAAKzD,EAAEE,SAAS,+BAA+B,IAAMxC,EAAEF,EAAE+H,cAAcC,KAAK9H,EAAE+E,OAAOgD,EAAAA,GAAAA,QAAUjF,KAAKQ,qBAAqBxD,EAAEgD,KAAKsB,MAAMtE,EAAE+H,cAAcC,KAAKhF,KAAKC,4BAA4BD,KAAKsB,MAAM4D,aAAaC,cAAcnF,KAAKE,6BAA6BF,KAAKsB,MAAM4D,aAAaE,mBAAmBpF,KAAKqF,gBAAgBnI,EAAEoI,KAAKtF,KAAKiD,KAAKzD,EAAEK,MAAM,wBAAwB,GAAC,CAAA4C,IAAA,4BAAAG,MAAA,WAA4B5C,KAAKQ,qBAAqB,KAAKR,KAAKsB,MAAM,KAAKtB,KAAKiD,KAAKzD,EAAEE,SAAS,gCAAgC,GAAC,CAAA+C,IAAA,sBAAAG,MAAA,WAAsB,GAAI5C,KAAKuB,uBAAT,CAAuC,IAAMvE,EAAEgD,KAAKuB,uBAAuBgE,IAAI,GAAMvF,KAAKsB,MAAX,CAAoFtB,KAAKsB,MAAMkE,gBAAgBxI,GAAE,GAAI,IAAME,EAAE8C,KAAKuB,uBAAuBkE,SAASzF,KAAKsB,MAAMoE,YAAYxI,EAAEyI,EAAEzI,EAAE0I,EAAE1I,EAAE2I,MAAM3I,EAAE4I,OAAxH,MAAtD9F,KAAKiD,KAAKzD,EAAEK,MAAM,oCAAxF,CAA2P,GAAC,CAAA4C,IAAA,2BAAAG,MAAA,SAAyB5F,EAAEE,GAAG,IAAMD,IAAI+C,KAAKsB,MAAMyE,IAAI/F,KAAKuB,uBAAuB,IAAItE,IAAI8I,EAAE,OAAO,EAAE,IAAMxC,EAAEvD,KAAKuB,uBAAuBgE,IAAIS,oBAAoB,OAAOzC,GAAG,IAAIrG,EAAE8C,KAAKsB,MAAM2E,YAAY,KAAKjJ,GAAE,GAAIgD,KAAKsB,MAAM2E,YAAY1C,EAAEvG,GAAE,GAAI,IAAIgD,KAAKiD,KAAKzD,EAAEK,MAAM,oCAAoC,EAAE,GAAC,CAAA4C,IAAA,uBAAAG,MAAA,SAAqB5F,EAAEE,EAAED,GAAG,GAAI+C,KAAKsB,MAAT,CAAoG,IAAMyE,EAAE/I,EAAE,IAAIC,EAAE+C,KAAKsB,MAAM4E,gBAAgBC,UAAUJ,EAAE7I,GAAG8C,KAAKsB,MAAM4E,gBAAgBE,UAAUL,EAAE7I,EAAlG,MAAxE8C,KAAKiD,KAAKzD,EAAEK,MAAM,sDAA0J,GAAC,CAAA4C,IAAA,iBAAAG,MAAA,SAAe5F,EAAEE,EAAED,EAAE8I,GAAG/F,KAAKsB,OAAOtB,KAAKsB,MAAM+E,mBAAmB,IAAIrJ,GAAGgD,KAAKsB,MAAMgF,iBAAiBpJ,EAAED,GAAG+C,KAAKsB,MAAMiF,iBAAiBR,IAAI/F,KAAKiD,KAAKzD,EAAEK,MAAM,mDAAmD,GAAC,CAAA4C,IAAA,gBAAAG,MAAA,SAAc5F,GAAGgD,KAAKsB,MAAMtB,KAAKsB,MAAMkF,aAAaxJ,GAAGgD,KAAKiD,KAAKzD,EAAEK,MAAM,kDAAkD,GAAC,CAAA4C,IAAA,gCAAAG,MAAA,SAA8B5F,EAAEE,EAAED,GAAG+C,KAAKsB,OAAOtB,KAAKsB,MAAMmF,iBAAiBxJ,GAAG+C,KAAKsB,MAAMoF,oBAAoB,IAAI1J,GAAGgD,KAAKsB,MAAMqF,qBAAqB,IAAIzJ,GAAG8C,KAAKsB,MAAMsF,uBAAsB,GAAI5G,KAAKsB,MAAMuF,mBAAmBC,EAAAA,GAAAA,OAAS,EAAE,KAAK9G,KAAKsB,MAAMyF,qBAAqBC,EAAAA,GAAAA,MAAQC,EAAAA,GAAAA,KAAOA,EAAAA,GAAAA,KAAOA,EAAAA,GAAAA,MAAQjH,KAAKsB,MAAMyF,qBAAqBC,EAAAA,GAAAA,KAAOC,EAAAA,GAAAA,KAAOA,EAAAA,GAAAA,KAAOA,EAAAA,GAAAA,OAASjH,KAAKiD,KAAKzD,EAAEK,MAAM,kEAAkE,GAAC,CAAA4C,IAAA,sBAAAG,MAAA,SAAoB5F,GAAG,GAAGgD,KAAKsB,MAAM,OAAOtE,GAAG,KAAKkK,EAAAA,KAAOlH,KAAKsB,MAAM6F,uBAAsB,GAAI,MAAM,KAAKD,EAAAA,KAAOlH,KAAKsB,MAAM8F,YAAYJ,EAAAA,GAAAA,MAAQhH,KAAKsB,MAAM6F,uBAAsB,GAAI,MAAM,KAAKD,EAAAA,MAAQlH,KAAKsB,MAAM8F,YAAYJ,EAAAA,GAAAA,OAAShH,KAAKsB,MAAM6F,uBAAsB,QAASnH,KAAKiD,KAAKzD,EAAEK,MAAM,wDAAwD,GAAC,CAAA4C,IAAA,eAAAG,MAAA,SAAa5F,EAAEE,EAAED,EAAE8I,GAAG/F,KAAKsB,MAAMtB,KAAKsB,MAAMoE,YAAY1I,EAAEE,EAAED,EAAE8I,GAAG/F,KAAKiD,KAAKzD,EAAEK,MAAM,iDAAiD,GAAC,CAAA4C,IAAA,qBAAAG,MAAA,WAAoB,IAAAyE,EAAA,KAACrH,KAAKgB,QAAQsG,SAAS,SAACtK,EAAEE,GAAK,GAAGF,EAAEuK,sBAAsB,CAAC,IAAMtK,EAAEoK,EAAK3G,KAAK8G,sBAAsBtK,GAAGD,GAAG,IAAID,EAAEuK,uBAAsB,EAAGvK,EAAEyK,UAAUC,cAAczK,GAAG,CAAC,GAAG,GAAC,CAAAwF,IAAA,yBAAAG,MAAA,WAAwB,IAAA+E,EAAA,KAAC3H,KAAKgB,QAAQsG,SAAS,SAACtK,EAAEC,GAAK,IAAM8I,EAAE,GAAG/I,EAAE4K,UAAUN,SAAS,SAACpK,EAAEqG,GAAKwC,EAAE8B,KAAKtE,GAAGoE,EAAK1E,KAAKzD,EAAEG,gBAAgB,4BAA4B4D,EAAE,SAASrG,EAAE4K,MAAMH,EAAKjH,KAAKqH,QAAQ9K,EAAEsG,EAAErG,GAAGA,EAAE8K,cAAcC,EAAAA,WAAa/K,EAAE8K,cAAcC,EAAAA,UAAYjL,EAAEuK,uBAAsB,EAAG,IAAwB,IAApB,IAAMhE,EAAEvG,EAAE4K,UAAUM,EAAA,EAAAC,EAAepC,EAACmC,EAAAC,EAAAC,OAAAF,IAAA,CAAZ,IAAMhL,EAACiL,EAAAD,GAAM3E,EAAE8E,OAAOnL,EAAG,KAAME,EAAEuK,EAAKjH,KAAK4H,iBAAiBrL,GAAGI,EAAEL,EAAEuL,gBAAgBC,OAAOC,EAAA,SAAAC,GAAkB1L,EAAE2L,yBAAyB,EAAE,IAAI3L,EAAE2L,yBAAyB3L,EAAEyK,UAAUmB,sBAAsB,IAAM3L,EAAEG,EAAEyL,GAAG9C,EAAE,CAAC+C,aAAa,eAAeN,OAAOnL,GAAGsK,EAAK1E,KAAKzD,EAAEG,gBAAgB,oBAAoBkJ,EAAE,QAAQ5L,EAAE8L,MAAK7L,EAAAA,EAAAA,SAAED,EAAE8L,IAAIhD,GAAGiD,MAAM,SAAA9L,GAAIF,EAAE2L,yBAAyB,EAAE,IAAI3L,EAAE2L,yBAAyB3L,EAAEyK,UAAUmB,sBAAsBjB,EAAK1E,KAAKzD,EAAEG,gBAAgB,+BAA+BkJ,GAAG,IAAI9C,EAAE,EAAE,GAAG7I,EAAE+L,KAAKC,WAAW,EAAE,CAACnD,EAAE4B,EAAKjH,KAAKyI,QAAQjM,EAAE+L,KAAKC,YAAyG,IAA7F,IAAMlM,EAAE,IAAIoM,WAAWzB,EAAKjH,KAAK2I,OAAOC,OAAOvD,EAAE7I,EAAE+L,KAAKC,YAAYjM,EAAE,IAAImM,WAAWlM,EAAE+L,MAAclD,EAAE,EAAEA,EAAE7I,EAAE+L,KAAKC,aAAanD,EAAE/I,EAAE+I,GAAG9I,EAAE8I,EAAE,CAACxC,EAAEE,KAAKoF,EAAE,CAACC,aAAa7L,EAAE6L,aAAaS,IAAIxD,EAAE+B,KAAK5K,EAAE+L,KAAKC,WAAWM,SAAQ,EAAGxB,YAAY/K,EAAE+K,aAAa,IAAIyB,OAAO,SAAAvM,GAAIF,EAAE2L,yBAAyB,EAAE,IAAI3L,EAAE2L,yBAAyB3L,EAAEyK,UAAUmB,uBAAsBzL,EAAAA,EAAAA,IAAED,KAAKyK,EAAK1E,KAAKzD,EAAEK,MAAK,aAAAN,OAAcsJ,EAAC,mBAAAtJ,OAAkBrC,EAAEwM,aAAcnG,EAAEE,KAAKoF,EAAE,CAACC,aAAa7L,EAAE6L,aAAaS,IAAI,EAAEzB,KAAK,EAAE0B,SAAQ,EAAGxB,YAAY/K,EAAE+K,cAAc,GAAG,EAAt+B,IAAI,IAAMa,KAAKzL,EAACqL,EAAAC,EAAu9B,GAAG,GAAC,CAAAjG,IAAA,mBAAAG,MAAA,SAAiB5F,GAAGgD,KAAKU,KAAKiJ,sBAAsBC,MAAM5J,KAAKU,KAAK1D,EAAE6M,kBAAkB7J,KAAKU,KAAKoJ,gBAAgBF,MAAM5J,KAAKU,KAAK1D,EAAE+M,YAAY/J,KAAKU,KAAKsJ,aAAahN,EAAEiN,KAAKjN,EAAEkN,IAAI,GAAC,CAAAzH,IAAA,aAAAG,MAAA,SAAW5F,GAAG,IAAIgD,KAAKU,MAAMV,KAAKS,YAAY,OAAM,EAAG,IAAMvD,EAAE8C,KAAKgB,QAAQ0B,IAAI1F,GAAG,QAAQE,GAAGA,EAAEyL,wBAAwB,CAAC,GAAC,CAAAlG,IAAA,gBAAAG,MAAA,SAAc5F,GAAE,IAAAmN,EAAA,KAAOjN,EAAE,GAAG,OAAO8C,KAAKgB,QAAQsG,SAAS,SAACrK,EAAE8I,GAAK,GAAG9I,EAAEwK,UAAU2C,cAAcpN,EAAEoN,YAAkF,IAArE,IAAMnN,EAAEkN,EAAKzJ,KAAK2J,sBAAsBtE,EAAE/I,EAAEsN,MAAMC,mBAA2BvN,EAAE,EAAEA,EAAEC,EAAEmL,SAASpL,EAAEE,EAAE2K,KAAK5K,EAAED,GAAI,IAAIE,CAAC,GAAC,CAAAuF,IAAA,2BAAAG,MAAA,SAAyB5F,GAAE,IAAAwN,EAAA,KAAKtN,EAAE,EAAE,OAAO8C,KAAKgB,QAAQsG,SAAS,SAACrK,EAAE8I,GAAK9I,EAAEwK,UAAU2C,cAAcpN,EAAEoN,cAAclN,EAAEsN,EAAK9J,KAAK+J,0BAA0B1E,GAAG,IAAI7I,CAAC,GAAC,CAAAuF,IAAA,aAAAG,MAAA,SAAW5F,EAAEE,GAAE,IAAAwN,EAAA,KAAC1K,KAAKgB,QAAQsG,SAAS,SAACrK,EAAE8I,GAAK9I,EAAEwK,UAAU2C,cAAcpN,EAAEoN,cAAcM,EAAKhK,KAAKiK,YAAY5E,EAAE7I,GAAGD,EAAEsK,uBAAsB,EAAGmD,EAAKlK,qBAAqBoE,gBAAgB,GAAG,GAAC,CAAAnC,IAAA,oBAAAG,MAAA,SAAkB5F,EAAEE,GAAG,IAAMD,EAAE,CAAC2N,KAAKC,EAAAA,eAAiBC,eAAe5N,GAAG,OAAO8C,KAAK+K,kBAAkB/N,EAAEC,GAAE,EAAG,GAAC,CAAAwF,IAAA,qBAAAG,MAAA,SAAmB5F,EAAEE,GAAG,IAAMD,EAAE,CAAC2N,KAAKC,EAAAA,gBAAkBG,gBAAgB9N,GAAG,OAAO8C,KAAK+K,kBAAkB/N,EAAEC,GAAE,EAAG,GAAC,CAAAwF,IAAA,gBAAAG,MAAA,SAAc5F,EAAEE,GAAG,IAAMD,EAAE,CAAC2N,KAAKC,EAAAA,WAAaI,WAAW/N,GAAG,OAAO8C,KAAK+K,kBAAkB/N,EAAEC,GAAE,EAAG,GAAC,CAAAwF,IAAA,mCAAAG,MAAA,SAAiC5F,EAAEE,EAAED,EAAE8I,GAAG,IAAMxC,EAAE,CAACqH,KAAKC,EAAAA,sBAAwBK,aAAa,CAACC,SAASjO,EAAEkO,qBAAqBnO,EAAEoO,eAAetF,IAAI,OAAO/F,KAAK+K,kBAAkB/N,EAAEuG,GAAE,EAAG,GAAC,CAAAd,IAAA,oBAAAG,MAAA,SAAkB5F,EAAEE,GAAG,IAAMD,EAAE,CAAC2N,KAAKC,EAAAA,eAAiBS,eAAepO,GAAG,OAAO8C,KAAK+K,kBAAkB/N,EAAEC,GAAE,EAAG,GAAC,CAAAwF,IAAA,kBAAAG,MAAA,SAAgB5F,EAAEE,GAAG,IAAMD,EAAE,CAAC2N,KAAKC,EAAAA,aAAeU,aAAarO,GAAG,OAAO8C,KAAK+K,kBAAkB/N,EAAEC,GAAE,EAAG,GAAC,CAAAwF,IAAA,2BAAAG,MAAA,SAAyB5F,EAAEE,GAAG,IAAMD,EAAE,CAAC2N,KAAKC,EAAAA,oBAAsBW,mBAAmBtO,EAAEuO,UAAU9H,EAAAA,iBAAmB,OAAO3D,KAAK+K,kBAAkB/N,EAAEC,GAAE,EAAG,GAAC,CAAAwF,IAAA,uBAAAG,MAAA,SAAqB5F,EAAEE,GAAG,IAAMD,EAAE,CAAC2N,KAAKC,EAAAA,oBAAsBW,mBAAmBtO,EAAEuO,UAAU9H,EAAAA,aAAe,OAAO3D,KAAK+K,kBAAkB/N,EAAEC,GAAE,EAAG,GAAC,CAAAwF,IAAA,oBAAAG,MAAA,SAAkB5F,EAAEE,GAAG,IAAMD,EAAE,CAAC2N,KAAKC,EAAAA,oBAAsBW,mBAAmBtO,EAAEuO,UAAU9H,EAAAA,gBAAkB,OAAO3D,KAAK+K,kBAAkB/N,EAAEC,GAAE,EAAG,GAAC,CAAAwF,IAAA,mBAAAG,MAAA,SAAiB5F,EAAEE,EAAED,EAAE8I,GAAG,IAAMxC,EAAE,CAACqH,KAAKC,EAAAA,cAAgBa,cAAc,CAACC,MAAM1O,EAAE2O,OAAO7F,EAAE8F,QAAQ3O,IAAI,OAAO8C,KAAK+K,kBAAkB/N,EAAEuG,GAAE,EAAG,GAAC,CAAAd,IAAA,oBAAAG,MAAA,SAAkB5F,EAAEE,EAAED,GAAE,IAAA6O,EAAA,KAAC,IAAI9L,KAAKU,KAAK,OAAM,EAAG,IAAIqF,GAAE,EAAG,OAAO/F,KAAKgB,QAAQsG,SAAS,SAACrK,EAAEsG,GAAK,GAAGtG,EAAEwK,UAAU2C,cAAcpN,EAAEoN,YAAY,CAAC,IAAMpN,EAAE,CAAC+O,IAAIxO,KAAKyO,UAAU9O,GAAG+O,UAAU,EAAE1C,IAAI,EAAE2C,YAAW,GAAIJ,EAAKK,eAAenP,KAAK+I,EAAE,IAAI+F,EAAKpL,KAAK0L,wBAAwB7I,EAAEvG,EAAEuM,IAAIvM,EAAEiP,WAAWjP,EAAEkP,YAAYJ,EAAKpL,KAAK2L,MAAMrP,EAAEuM,KAAK,CAAC,IAAIxD,GAAG9I,GAAG+C,KAAKQ,qBAAqBoE,gBAAgBmB,CAAC,GAAC,CAAAtD,IAAA,2BAAAG,MAAA,SAAyB5F,EAAEE,EAAED,EAAE8I,EAAExC,GAAG,OAAOvG,EAAE,EAAEE,EAAE,GAAGD,EAAE,GAAGD,EAAE,EAAEE,EAAE,GAAGD,EAAE,GAAGD,EAAE,EAAEE,EAAE,GAAGD,EAAE,GAAGD,EAAE,GAAGE,GAAG,GAAG,GAAG6I,EAAE,GAAG/I,EAAE,EAAEE,EAAE,GAAG6I,EAAE,GAAG/I,EAAE,EAAEE,EAAE,GAAG6I,EAAE,GAAG/I,EAAE,GAAGE,GAAG,GAAG,GAAGqG,EAAE,GAAGvG,EAAE,EAAEE,EAAE,GAAGqG,EAAE,GAAGvG,EAAE,EAAEE,EAAE,GAAGqG,EAAE,GAAGrG,EAAG,CAAC,GAAC,CAAAuF,IAAA,yBAAAG,MAAA,SAAuB5F,EAAEE,EAAED,GAAG,OAAOD,EAAE,EAAEE,EAAE,GAAGD,EAAE,GAAGD,EAAE,EAAEE,EAAE,GAAGD,EAAE,GAAGD,EAAE,EAAEE,EAAE,GAAGD,EAAE,GAAGC,EAAG,CAAC,GAAC,CAAAuF,IAAA,oBAAAG,MAAA,WAAoB,GAAI5C,KAAKU,KAAT,CAAqB,IAAM1D,EAAE,GAASC,EAAE+C,KAAKU,KAAKyI,QAAQ,IAAImD,aAAaC,mBAAmBxG,EAAE,IAAIuG,aAAatM,KAAKU,KAAK8L,QAAQlD,OAAOrM,EAAE,KAAKsG,EAAEvD,KAAKU,KAAKyI,QAAQ,GAAImD,aAAaC,mBAAmBnP,EAAE,IAAIkP,aAAatM,KAAKU,KAAK8L,QAAQlD,OAAO/F,EAAEvG,GAAGG,EAAE6C,KAAK8B,SAAS2K,OAAOC,EAAAA,GAAAA,kBAAoBrP,EAAE2C,KAAK8B,SAAS2K,OAAOC,EAAAA,GAAAA,mBAAqB7D,EAAE7I,KAAK8B,SAAS2K,OAAOC,EAAAA,GAAAA,gBAAkBC,EAAE3M,KAAK8B,SAAS2K,OAAOC,EAAAA,GAAAA,eAAiBE,EAAE5M,KAAK8B,SAAS2K,OAAOC,EAAAA,GAAAA,iBAAmBxF,EAAElH,KAAK8B,SAAS2K,OAAOC,EAAAA,GAAAA,kBAAoBzE,EAAEjI,KAAK8B,SAAS2K,OAAOC,EAAAA,GAAAA,eAAiB7B,EAAE7K,KAAK8B,SAAS2K,OAAOC,EAAAA,GAAAA,cAAoB/I,EAAE,EAAEkJ,EAAE,EAAQlH,EAAE3F,KAAK8B,SAASgL,OAAOC,EAAAA,GAAAA,MAAQpJ,EAAE3D,KAAKgN,yBAAyBjH,EAAEpC,EAAEkF,EAAExL,EAAEF,GAAG0P,EAAE7M,KAAKiN,uBAAuB7P,EAAEyP,EAAElH,GAAGhC,EAAE3D,KAAKgN,yBAAyBjH,EAAEpC,EAAExG,EAAEwP,EAAE9D,GAAGgE,EAAE7M,KAAKiN,uBAAuB7P,EAAEyP,EAAElH,GAAG,IAAMC,EAAE5F,KAAK8B,SAASgL,OAAOC,EAAAA,GAAAA,KAAOpJ,EAAE3D,KAAKgN,yBAAyBjH,EAAEpC,EAAEiJ,EAAE1F,EAAEe,GAAG4E,EAAE7M,KAAKiN,uBAAuB7P,EAAEyP,EAAEjH,GAAGjC,EAAE3D,KAAKgN,yBAAyBjH,EAAEpC,EAAEsE,EAAE4C,EAAE+B,GAAGC,EAAE7M,KAAKiN,uBAAuB7P,EAAEyP,EAAEjH,GAAG,IAAMsH,EAAElN,KAAK8B,SAASgL,OAAOC,EAAAA,GAAAA,KAAOpJ,EAAE3D,KAAKgN,yBAAyBjH,EAAEpC,EAAEsE,EAAEY,EAAE8D,GAAGE,EAAE7M,KAAKiN,uBAAuB7P,EAAEyP,EAAEK,GAAGvJ,EAAE3D,KAAKgN,yBAAyBjH,EAAEpC,EAAEgJ,EAAE9B,EAAE5C,GAAG4E,EAAE7M,KAAKiN,uBAAuB7P,EAAEyP,EAAEK,GAAG,IAAMC,EAAEnN,KAAK8B,SAASgL,OAAOC,EAAAA,GAAAA,QAAUpJ,EAAE3D,KAAKgN,yBAAyBjH,EAAEpC,EAAExG,EAAEE,EAAE6J,GAAG2F,EAAE7M,KAAKiN,uBAAuB7P,EAAEyP,EAAEM,GAAGxJ,EAAE3D,KAAKgN,yBAAyBjH,EAAEpC,EAAEuD,EAAE0F,EAAEzP,GAAG0P,EAAE7M,KAAKiN,uBAAuB7P,EAAEyP,EAAEM,GAAG,IAAMhM,EAAEnB,KAAK8B,SAASgL,OAAOC,EAAAA,GAAAA,MAAQpJ,EAAE3D,KAAKgN,yBAAyBjH,EAAEpC,EAAEgJ,EAAExP,EAAEyP,GAAGC,EAAE7M,KAAKiN,uBAAuB7P,EAAEyP,EAAE1L,GAAGwC,EAAE3D,KAAKgN,yBAAyBjH,EAAEpC,EAAEiJ,EAAE/B,EAAE8B,GAAGE,EAAE7M,KAAKiN,uBAAuB7P,EAAEyP,EAAE1L,GAAG,IAAMiM,EAAEpN,KAAK8B,SAASgL,OAAOC,EAAAA,GAAAA,OAASpJ,EAAE3D,KAAKgN,yBAAyBjH,EAAEpC,EAAEkF,EAAEZ,EAAEf,GAAG2F,EAAE7M,KAAKiN,uBAAuB7P,EAAEyP,EAAEO,GAAGzJ,EAAE3D,KAAKgN,yBAAyBjH,EAAEpC,EAAEuD,EAAE7J,EAAEwL,GAAGgE,EAAE7M,KAAKiN,uBAAuB7P,EAAEyP,EAAEO,IAAI,IAAIpN,KAAK+B,sBAAsB/B,KAAKU,KAAK2M,oBAAoBrN,KAAK+B,sBAAsB/B,KAAK+B,qBAAqB/B,KAAKU,KAAK4M,iBAAiBrQ,EAAE,IAAIsG,EAAEvG,EAAE,IAAI,EAAE,EAAE,IAAIgD,KAAKU,KAAK2L,MAAMpP,GAAG+C,KAAKU,KAAK2L,MAAM9I,GAAGvD,KAAK6B,iBAAgB,EAAG7B,KAAKQ,qBAAqBoE,eAAz9D,CAAw+D,GAAC,CAAAnC,IAAA,iBAAAG,MAAA,WAAiB,OAAO5C,KAAKgC,sBAAsBhC,KAAKgC,oBAAoBmL,EAAAA,EAAAA,OAASxH,EAAAA,GAAAA,OAAQiH,EAAAA,EAAAA,KAAE,EAAG5M,KAAKsC,MAAMiL,oBAAoB,OAAOvN,KAAK8B,WAAW9B,KAAK8B,SAAS,IAAIoL,EAAAA,EAAElN,KAAKgC,sBAAsBhC,KAAK6B,iBAAgB,EAAG,OAAO7B,KAAKQ,sBAAsBR,KAAKQ,qBAAqBoE,eAAe,GAAC,CAAAnC,IAAA,6BAAAG,MAAA,SAA2B5F,GAAE,IAAAwQ,EAAA,KAACxN,KAAKU,MAAMV,KAAKgB,QAAQsG,SAAS,SAACpK,EAAED,GAAKC,EAAEuK,UAAU2C,cAAcpN,EAAEoN,cAAcoD,EAAK9M,KAAK+M,+BAA+BxQ,GAAGuQ,EAAKhN,qBAAqBoE,gBAAgB,GAAG,GAAC,CAAAnC,IAAA,gBAAAG,MAAA,SAAc5F,GAAG,IAAIgD,KAAKU,KAAK,CAAC,IAAMxD,EAAE,CAACuK,UAAUzK,EAAE0Q,gBAAgB,KAAKC,eAAe,MAAM1Q,EAAE,IAAI2Q,SAAS,SAAC5Q,EAAEC,GAAKC,EAAEwQ,gBAAgB1Q,EAAEE,EAAEyQ,eAAe1Q,CAAC,IAAI,OAAO+C,KAAKe,WAAW8G,KAAK3K,GAAGD,CAAC,CAAC,IAAMC,EAAE8C,KAAK6N,eAAe7Q,GAAG,OAAOE,EAAE,EAAE0Q,QAAQE,QAAQ,GAAGF,QAAQG,QAAQ7Q,EAAE,GAAC,CAAAuF,IAAA,mBAAAG,MAAA,SAAiB5F,GAAE,IAAAgR,EAAA,KAAC,IAAIhO,KAAKU,KAAK,CAAC,IAAMxD,EAAE8C,KAAKe,WAAWkN,WAAW,SAAA/Q,GAAC,OAAEF,EAAEkR,MAAMhR,EAAEuK,UAAUyG,GAAG,IAAGhR,GAAG,IAAI8C,KAAKe,WAAW7D,GAAGwQ,iBAAiB,GAAG1N,KAAKe,WAAWoN,OAAOjR,EAAE,IAAI,IAAMD,EAAE+C,KAAKe,WAAWqH,OAAO,OAAO,IAAInL,IAAI+C,KAAKiD,KAAKzD,EAAEE,SAAS,sFAAsFM,KAAKoO,WAAWnR,CAAC,CAAC,IAAIC,GAAG,EAAE8C,KAAKgB,QAAQsG,SAAS,SAACrK,EAAE8I,GAAK,GAAG9I,EAAEwK,UAAU2C,cAAcpN,EAAEoN,YAAY,CAAClN,EAAE6I,EAAE9I,EAAEsL,gBAAgB8F,QAAQL,EAAKtN,KAAK4N,aAAapR,GAAG,IAAMqG,EAAEyK,EAAK3L,SAASkM,QAAQvR,EAAEsN,MAAM4D,MAAM,IAAI3K,GAAGyK,EAAK3L,SAAS8L,OAAO5K,EAAE,EAAE,CAAC,IAAIrG,GAAG,GAAG8C,KAAKgB,QAAQqH,OAAOnL,GAAG,IAAMD,EAAE+C,KAAKgB,QAAQ8G,KAAK,OAAO,IAAI7K,IAAI+C,KAAKiD,KAAKzD,EAAEE,SAAS,sFAAsFM,KAAKoO,WAAWnR,CAAC,GAAC,CAAAwF,IAAA,gBAAAG,MAAA,SAAc5F,GAAE,IAAuCwR,EAAvCC,GAAAnL,EAAAA,EAAAA,GAAgBtD,KAAKyB,oBAAkB,IAAtC,IAAAgN,EAAAlL,MAAAiL,EAAAC,EAAAtR,KAAAqG,MAAuC,KAA7BtG,EAACsR,EAAA5L,MAA4B,GAAG5F,EAAEE,EAAE,OAAOA,CAAC,CAAC,OAAAwG,GAAA+K,EAAAzR,EAAA0G,EAAA,SAAA+K,EAAA9K,GAAA,QAAO,CAAC,GAAC,CAAAlB,IAAA,iBAAAG,MAAA,SAAe5F,GAAGA,EAAEiP,UAAUjM,KAAKU,KAAKgO,gBAAgB1R,EAAE+O,KAAK,EAAE,IAAM7O,EAAE8C,KAAK2O,cAAc3R,EAAEiP,WAAW,OAAO/O,EAAE,GAAGF,EAAEkP,YAAW,EAAGlP,EAAEuM,IAAIvJ,KAAKU,KAAKyI,QAAQnM,EAAEiP,aAAajP,EAAEkP,YAAW,EAAGlP,EAAEuM,IAAIvJ,KAAK0B,eAAegB,IAAIxF,GAAG,IAAIF,EAAEuM,MAAMvM,EAAEuM,IAAIvJ,KAAKU,KAAKyI,QAAQjM,GAAG8C,KAAK0B,eAAe+B,IAAIvG,EAAEF,EAAEuM,OAAO,IAAIvM,EAAEuM,MAAMvJ,KAAKU,KAAKkO,aAAa5R,EAAE+O,IAAI/O,EAAEuM,IAAIvM,EAAEiP,YAAW,EAAG,GAAC,CAAAxJ,IAAA,eAAAG,MAAA,SAAa5F,GAAG,IAAIE,GAAG2R,OAAOC,UAAU7R,EAAE4R,OAAOC,UAAUvL,GAAE,EAAG,OAAOwC,EAAAA,EAAAA,IAAE/I,KAAKA,EAAE+R,UAAUxL,GAAE,IAAIwC,EAAAA,EAAAA,IAAE/I,EAAEgS,SAASzL,GAAE,EAAGrG,EAAEF,EAAEgS,MAAMC,UAAU,MAAKlJ,EAAAA,EAAAA,IAAE/I,EAAEkS,OAAO3L,GAAE,EAAGtG,EAAED,EAAEkS,IAAID,UAAU,OAAO,CAACxK,UAAUvH,EAAEwH,QAAQzH,EAAEuH,QAAQjB,EAAE,GAAC,CAAAd,IAAA,iBAAAG,MAAA,SAAe5F,GAAE,IAAAmS,EAAqBlS,EAAdC,EAAEF,EAAEsN,MAAqBvE,EAAE7I,EAAEkS,mBAAmB,GAAGrJ,EAAEqC,OAAO,EAAE,OAAO,EAAE,IAAM7E,EAAE,CAACwI,IAAIhG,EAAEkG,UAAU,EAAE1C,IAAI,EAAE2C,YAAW,GAAI,IAAIlM,KAAKmM,eAAe5I,GAAG,OAAO,EAAE,IAAMnG,EAAE4C,KAAKuE,aAAuB,QAAX4K,EAACnP,KAAKsC,aAAK,IAAA6M,OAAA,EAAVA,EAAY9K,YAAYlH,EAAE6C,KAAKsC,MAAMiL,iBAAiB8B,SAASnS,EAAEqQ,iBAAiB8B,QAAQ,mBAAmB,EAAE,GAAGpS,EAAE+C,KAAKU,KAAK4O,UAAUpS,EAAEqS,YAAYhM,EAAEgG,IAAIhG,EAAE0I,UAAU9O,EAAEA,EAAEC,EAAEqH,UAAUrH,EAAEsH,QAAQtH,EAAEoH,QAAQxE,KAAKmE,eAAenE,KAAKsC,MAAM2B,iBAAiBV,EAAE2I,YAAYlM,KAAKU,KAAK2L,MAAM9I,EAAEgG,KAAKtM,GAAG,EAAE,KAAAuS,GAAO,QAANA,EAAAtS,EAAEuS,YAAI,IAAAD,OAAA,EAANA,EAAQE,qBAAoB1P,KAAK2P,oBAAoB,EAAE,IAAI,KAAK3P,KAAK2P,oBAAoB,EAAE,GAAG,IAAI3P,KAAK2P,oBAAoB,EAAE,IAAI,MAAM,IAAM5J,EAAE,IAAI6J,gBAAgB,GAAG5P,KAAKgB,QAAQyC,IAAIxG,EAAE,CAACwK,UAAUzK,EAAE4K,UAAU,IAAI3G,IAAI0H,wBAAwB,EAAEJ,gBAAgBxC,EAAEwB,uBAAsB,IAAKvH,KAAKqC,SAASwF,KAAK7K,EAAEsN,MAAM4D,MAAMlO,KAAKC,4BAA2B4C,EAAAA,EAAAA,GAAI,OAAO,CAAC,IAAoDgN,EAA9C3S,EAAE,GAAOD,EAAE,GAAG6S,GAAAxM,EAAAA,EAAAA,GAAetG,EAAEsN,MAAMyF,WAAS,IAAhC,IAAAD,EAAAvM,MAAAsM,EAAAC,EAAA3S,KAAAqG,MAAiC,KAAvBuC,EAAC8J,EAAAjN,MAAsB,UAAUmD,EAAEiK,gBAAgB/N,MAAM,WAAW8D,EAAEiK,gBAAgB/N,OAAO/E,EAAE2K,KAAK9B,EAAEkK,MAAMlK,EAAEmK,KAAKlT,EAAEsN,MAAMC,oBAAoBtN,EAAE8I,EAAEkK,MAAM,CAAC,OAAAvM,GAAAoM,EAAA9S,EAAA0G,EAAA,SAAAoM,EAAAnM,GAAA,MAAK1G,GAAGwC,EAAEqD,MAAM,yBAAyB9F,EAAEsN,MAAK,oBAAA/K,OAAqBvC,EAAEsN,MAAM6F,MAAK,0CAAA5Q,OAAyCtC,EAAC,sBAAqBC,EAAEkL,OAAO,GAAG3I,EAAEsD,KAAK,2BAA2B/F,EAAEsN,MAAK,oBAAA/K,OAAqBvC,EAAEsN,MAAM6F,MAAK,mCAAA5Q,OAAkCrC,EAAEwM,WAAU,qBAAoB,CAAC,IAAI1J,KAAKE,6BAA6B,CAAC,IAAoDkQ,EAA9ClT,EAAE,GAAOD,EAAE,GAAGoT,GAAA/M,EAAAA,EAAAA,GAAetG,EAAEsN,MAAMyF,WAAS,IAAhC,IAAAM,EAAA9M,MAAA6M,EAAAC,EAAAlT,KAAAqG,MAAiC,KAAvBuC,EAACqK,EAAAxN,MAAsB,YAAYmD,EAAEiK,gBAAgB/N,OAAO/E,EAAE2K,KAAK9B,EAAEkK,MAAMlK,EAAEmK,KAAKlT,EAAEsN,MAAMC,oBAAoBtN,EAAE8I,EAAEkK,MAAM,CAAC,OAAAvM,GAAA2M,EAAArT,EAAA0G,EAAA,SAAA2M,EAAA1M,GAAA,MAAK1G,GAAGwC,EAAEqD,MAAM,yBAAyB9F,EAAEsN,MAAK,oBAAA/K,OAAqBvC,EAAEsN,MAAM6F,MAAK,0CAAA5Q,OAAyCtC,EAAC,sBAAqBC,EAAEkL,OAAO,GAAG3I,EAAEsD,KAAK,2BAA2B/F,EAAEsN,MAAK,oBAAA/K,OAAqBvC,EAAEsN,MAAM6F,MAAK,mCAAA5Q,OAAkCrC,EAAEwM,WAAU,qBAAoB,CAAC,OAAO7G,EAAAA,EAAAA,GAAI,gBAAgBpD,EAAE6Q,SAAS,qFAAqFrT,CAAC,CAAC,OAAO,CAAC,GAAC,CAAAwF,IAAA,gBAAAG,MAAA,SAAc5F,GAAG,GAAIgD,KAAKU,KAAT,CAAqB,IAAMxD,EAAEF,EAAEuT,eAAeC,OAAOC,YAAYxT,EAAED,EAAEuT,eAAeC,OAAOE,IAAI1Q,KAAKU,KAAKiQ,gCAAgC1T,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAI,IAAM6I,EAAE/F,KAAKU,KAAKkQ,OAAO5Q,KAAKiD,KAAKzD,EAAEG,gBAAgB,wBAAwBoG,GAAG/F,KAAKY,YAAYmF,EAAE,EAAE/F,KAAKG,2BAA2B,IAAIH,KAAKe,WAAWqH,OAAOpI,KAAK6Q,oBAAzT,CAA6U,GAAC,CAAApO,IAAA,SAAAG,MAAA,SAAO5F,GAAG,GAAIgD,KAAKU,MAAM1D,EAAE8T,SAAS9Q,KAAKkB,eAAelE,EAAEuT,eAAeQ,OAAO/Q,KAAKoB,YAA3E,CAA8F,IAA8B4P,EAA9BC,GAAA3N,EAAAA,EAAAA,GAAetD,KAAKe,YAAU,IAA9B,IAAAkQ,EAAA1N,MAAAyN,EAAAC,EAAA9T,KAAAqG,MAA+B,KAArBvG,EAAC+T,EAAApO,MAA2B5F,EAAEgD,KAAK6N,eAAe5Q,EAAEwK,YAAY,IAAIzK,EAAEC,EAAE0Q,gBAAgB,GAAG1Q,EAAEyQ,gBAAgB1Q,EAAE,CAAC,OAAA0G,GAAAuN,EAAAjU,EAAA0G,EAAA,SAAAuN,EAAAtN,GAAA,IAAG3D,KAAKe,WAAW,GAAG,IAAIf,KAAKgB,QAAQ8G,KAAvC,CAAiJ9H,KAAKwB,wBAAwBxB,KAAKsC,MAAMwC,WAAW9E,KAAKkR,yBAAyBlR,KAAKmR,cAAcnR,KAAKU,KAAK0Q,mBAAmBpR,KAAKsC,MAAMU,OAAOqO,SAASC,iBAAiBC,EAAAA,EAAAA,kBAAoBvU,EAAEuT,eAAeiB,SAASC,UAAUC,UAAU,GAAG1U,EAAEuT,eAAeiB,SAASC,UAAUC,UAAU,GAAG1U,EAAEuT,eAAeiB,SAASC,UAAUC,UAAU,IAAI,IAAMxU,EAAE8C,KAAKuB,uBAAuBkE,SAASvI,EAAE2I,QAAQ7F,KAAKa,gBAAgB3D,EAAE4I,SAAS9F,KAAKc,kBAAkBd,KAAKa,eAAe3D,EAAE2I,MAAM7F,KAAKc,gBAAgB5D,EAAE4I,OAAO9F,KAAKU,KAAKiR,aAAazU,EAAE2I,MAAM3I,EAAE4I,QAAQ9F,KAAKgB,QAAQsG,SAAS,SAAAtK,GAAIA,EAAEuK,uBAAsB,CAAE,KAAK,IAAIrK,EAAEyI,GAAG,IAAIzI,EAAE0I,GAAG5F,KAAKiD,KAAKzD,EAAEK,MAAM,6CAA6CG,KAAK4R,iBAAiB5U,EAAEuT,eAAeC,QAAQxQ,KAAK6B,kBAAkB7B,KAAK8B,SAAS+P,OAAO7U,EAAEuT,eAAeC,QAAQxQ,KAAK8R,qBAAqB9R,KAAKU,KAAKqR,OAAO/R,KAAKgS,cAAchS,KAAKY,cAAcZ,KAAKG,4BAA4BH,KAAKgB,QAAQ8G,KAAK,IAAI9H,KAAKQ,qBAAqBoE,eAAv8B,MAAxF5E,KAAKiD,KAAKzD,EAAEK,MAAM,sEAArM,CAAiuC,GAAC,CAAA4C,IAAA,UAAAG,MAAA,WAAS,IAAAqP,EAAA,KAACjS,KAAKiD,KAAKzD,EAAEE,SAAS,eAAeM,KAAK8D,sBAAsB9D,KAAKI,mBAAkBmD,EAAAA,EAAAA,IAAEvD,KAAKI,mBAAmBJ,KAAKK,qBAAoBkD,EAAAA,EAAAA,IAAEvD,KAAKK,qBAAqBL,KAAKO,wBAAuBgD,EAAAA,EAAAA,IAAEvD,KAAKO,wBAAwBP,KAAKM,wBAAuBiD,EAAAA,EAAAA,IAAEvD,KAAKM,wBAAwBN,KAAKU,OAAOV,KAAKgB,QAAQsG,SAAS,SAAAtK,GAAIA,EAAEuL,gBAAgB8F,OAAO,IAAIrO,KAAK0B,eAAe4F,SAAS,SAAAtK,GAAI,IAAIA,GAAGiV,EAAKvR,KAAK2L,MAAMrP,EAAE,IAAIgD,KAAKU,KAAKwR,0BAA0BlS,KAAKU,KAAK,KAAK,GAAC,CAAA+B,IAAA,kBAAAG,MAAA,SAAgB5F,GAAE,IAAAmV,EAAA,KAAC,OAAOnS,KAAKU,KAAKkN,QAAQG,WAAW/N,KAAKS,cAAcT,KAAKS,YDAnxmB,SAAWvD,GAAG,OAAO,IAAI0Q,SAAS,SAAA5Q,GAAC,OAAE,+BAAmCgM,MAAM,SAAA9L,GAAC,OAAEA,EAAEgQ,CAAC,IAAGlE,MAAM,SAAAoJ,GAAe,IAAOrM,GAAE5I,EAAbiV,EAATC,SAAwB,CAACC,WAAWrV,EAAEsV,2BAA2BrV,EAAEsV,qBAAqB,kBAAIxV,EAAE+I,EAAE,GAAE,GAAG,IAAG0D,OAAO,SAAAvM,GAAI,MAAMA,CAAC,GAAG,CCAmkmB2P,CAAE7P,GAAGgM,MAAM,SAAAhM,GAAG,IAAAyV,EAAC,GAAGN,EAAKzR,KAAK1D,EAAEmV,EAAK1R,YAAY,KAAK0R,EAAKpR,WAAWqH,QAAQ,EAAE,OAAO+J,EAAKlP,KAAKzD,EAAEE,SAAS,0FAA0FyS,EAAK/D,UAAU,IAAMlR,EAAEiV,EAAK5N,aAAuB,QAAXkO,EAACN,EAAK7P,aAAK,IAAAmQ,OAAA,EAAVA,EAAYpO,YAAYpH,EAAEkV,EAAKzR,KAAKgS,YAAYP,EAAKQ,oBAAoBC,KAAKT,GAAM,KAAKpM,EAAEoM,EAAKzR,KAAKgS,YAAYP,EAAKU,eAAeD,KAAKT,GAAM,SAAS5O,EAAE4O,EAAKzR,KAAKgS,YAAYP,EAAKW,cAAcF,KAAKT,GAAM,MAAM/U,EAAE+U,EAAKzR,KAAKgS,YAAYP,EAAKY,oBAAoBH,KAAKT,GAAM,MAAMhV,EAAEgV,EAAKzR,KAAKgS,YAAYP,EAAKa,8BAA8BJ,KAAKT,GAAM,QAAQ9U,EAAE8U,EAAKzR,KAAKgS,YAAYP,EAAKc,aAAaL,KAAKT,GAAM,SAAStJ,EAAEsJ,EAAKzR,KAAKgS,YAAYP,EAAKe,yBAAyBN,KAAKT,GAAM,OAAOxF,EAAEwF,EAAKzR,KAAKgS,YAAYP,EAAKgB,qBAAqBP,KAAKT,GAAM,QAAQvF,EAAEuF,EAAKlS,6BAA4B4C,EAAAA,EAAAA,GAAI,OAAO6J,EAAEyF,EAAKjS,6BAA6BiS,EAAKzR,KAAK0S,sBAAsBnW,EAAE8I,EAAExC,EAAEnG,EAAED,EAAEE,EAAEwL,EAAE8D,EAAEzP,EAAEuH,UAAUvH,EAAEwH,QAAQxH,EAAEsH,QAAQoI,EAAEF,GAAGyF,EAAK3R,sBAAsB2R,EAAK3R,qBAAqBoE,eAAe,IAAI6E,OAAO,WAAI,IAA+B4J,EAA/BC,GAAAhQ,EAAAA,EAAAA,GAAgB6O,EAAKpR,YAAU,IAA9B,IAAAuS,EAAA/P,MAAA8P,EAAAC,EAAAnW,KAAAqG,MAA+B,CAApB6P,EAAAzQ,MAAsB+K,gBAAgB,EAAE,CAAC,OAAAjK,GAAA4P,EAAAtW,EAAA0G,EAAA,SAAA4P,EAAA3P,GAAA,CAAAwO,EAAKlP,KAAKzD,EAAEK,MAAM,kEAAkEsS,EAAK/D,SAAS,KAAKpO,KAAKS,YAAY,GAAC,CAAAgC,IAAA,YAAAG,MAAA,SAAU5F,EAAEE,EAAED,GAAG,IAAI+C,KAAKU,OAAOV,KAAKsB,OAAO,IAAItB,KAAKgB,QAAQ8G,KAAK,OAAO,KAAK,IAAM/B,EAAE9I,EAAEwI,SAAS,GAAGvI,EAAE,GAAGF,EAAE,GAAGA,EAAEC,EAAEwI,SAAS,IAAIvI,EAAE,GAAGA,EAAED,EAAEwI,SAAS,GAAG,OAAOzF,KAAKiD,KAAKzD,EAAEK,MAAK,yCAAAN,OAA0CvC,EAAEuW,QAAQ,GAAE,MAAAhU,OAAKwG,EAAEwN,QAAQ,GAAE,OAAM,KAAKvT,KAAKmR,cAAc,IAAM5N,EAAEtG,EAAEwT,YAAYrT,EAAEH,EAAEyT,IAAI1Q,KAAKU,KAAKiQ,gCAAgCvT,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGmG,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAIvD,KAAK4R,iBAAiB3U,GAAG+C,KAAKU,KAAK8S,cAAc,IAAMrW,EAAE6C,KAAKU,KAAK+S,WAAWzW,EAAE+I,GAAG,OAAG/F,KAAKgS,aAAa7U,EAAEqM,QAAgBrM,EAAEuW,iBAAwB,IAAI,GAAC,CAAAjR,IAAA,aAAAG,MAAA,SAAW5F,EAAEE,EAAED,EAAE8I,GAAG,IAAI/F,KAAKU,OAAOV,KAAKsB,OAAO,IAAItB,KAAKgB,QAAQ8G,KAAK,OAAO,KAAK,IAAMvE,EAAEoQ,KAAKC,MAAM5W,GAAGI,EAAEuW,KAAKC,MAAM1W,GAAG,GAAGqG,EAAE,GAAGA,EAAEtG,EAAEwI,SAAS,IAAIrI,EAAE,GAAGA,EAAEH,EAAEwI,SAAS,GAAG,OAAOzF,KAAKiD,KAAKzD,EAAEK,MAAK,0CAAAN,OAA2CgE,EAAC,MAAAhE,OAAKnC,EAAC,WAAAmC,OAAUtC,EAAEwI,SAASiE,WAAU,MAAK,KAAK1J,KAAKmR,cAAc,IAAMhU,EAAEF,EAAEwT,YAAYpT,EAAEJ,EAAEyT,IAAI1Q,KAAKU,KAAKiQ,gCAAgCtT,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGF,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAI6C,KAAK4R,iBAAiB3U,GAAG+C,KAAKU,KAAK8S,cAAc,IAAI3K,EAAE,KAAK,GAAG,IAAI9C,EAAEqC,OAAOS,EAAE7I,KAAKU,KAAKmT,YAAYtQ,EAAEnG,EAAE,EAAE,OAAO,CAAC,IAAMJ,EAAE,CAAC+O,IAAIxO,KAAKyO,UAAU,CAAC8H,SAAS/N,IAAIkG,UAAU,EAAE1C,IAAI,EAAE2C,YAAW,GAAIlM,KAAKmM,eAAenP,KAAK6L,EAAE7I,KAAKU,KAAKmT,YAAYtQ,EAAEnG,EAAEJ,EAAEuM,IAAIvM,EAAEiP,WAAWjP,EAAEkP,YAAYlM,KAAKU,KAAK2L,MAAMrP,EAAEuM,KAAK,CAAC,OAAOvJ,KAAKgS,aAAanJ,CAAC,GAAC,CAAApG,IAAA,cAAAG,MAAA,WAAc5C,KAAKuB,uBAAuB,CAACgE,IAAIvF,KAAKsB,MAAMyS,4BAA4BtO,SAASzF,KAAKsB,MAAM0S,eAAehU,KAAKsB,MAAM2S,6BAA4B,GAAIjU,KAAKsB,MAAM4S,uBAAsB,GAAIlU,KAAKsB,MAAM6S,cAAa,GAAG,GAAG,GAAG,EAAG,GAAC,CAAA1R,IAAA,aAAAG,MAAA,WAAa5C,KAAKuB,uBAAuBgE,IAAI,KAAKvF,KAAKsB,MAAM8S,0BAA0BpU,KAAKU,KAAK2T,mCAAmCrU,KAAKU,KAAK4T,2BAA2BtU,KAAKsB,MAAMiT,kCAAkCvU,KAAKsB,MAAMkT,6BAA6BxU,KAAKsB,MAAMmT,uBAAuB,GAAC,CAAAhS,IAAA,YAAAG,MAAA,SAAU5F,EAAEE,EAAED,EAAE8I,EAAExC,GAAE,IAAAmR,EAAA,KAAC,GAAI1U,KAAKU,MAAOV,KAAKsB,OAAO,IAAItB,KAAKgB,QAAQ8G,MAAO9K,EAAE2X,QAAQC,gBAAe5X,EAAE2X,QAAQE,WAAvF,CAAyG,GAAGtR,EAAE,GAAG,GAAGA,EAAE,GAAGvG,EAAEwT,OAAO/K,SAAS,IAAIlC,EAAE,GAAG,GAAGA,EAAE,GAAGvG,EAAEwT,OAAO/K,SAAS,GAAG,OAAOzF,KAAKiD,KAAKzD,EAAEK,MAAK,2DAAAN,OAA4DgE,EAAE,GAAGgQ,QAAQ,GAAE,MAAAhU,OAAKgE,EAAE,GAAGgQ,QAAQ,GAAE,MAAK,KAAK,IAAMpW,EAAE,GAAG6C,KAAKgB,QAAQsG,SAAS,SAAApK,GAAIF,EAAE2X,QAAQG,kBAAkBC,SAAS7X,EAAEuK,UAAU6C,MAAM4D,MAAM/Q,EAAE0K,KAAK3K,EAAEuK,UAAU2C,YAAY,IAAI,IAAM/M,EAAE2C,KAAKgV,WAAWzR,EAAE,GAAGA,EAAE,GAAGvG,EAAEwT,OAAOrT,GAAG,KAAGC,EAAAA,EAAAA,IAAEC,KAAK,IAAIA,EAAE4X,QAAhB,CAA+B,IAAMrI,EAAE5M,KAAKgB,QAAQ0B,IAAIrF,EAAE4X,SAAS,GAAGrI,EAAE,CAAC,IAAM1P,EAAE0P,EAAEnF,UAAU6C,MAAM4D,IAAI3K,EAAElG,EAAEqW,kBAAiB7K,EAAAA,EAAAA,GAAE5L,EAAE8I,GAAG3I,GAAEuP,EAAAA,EAAAA,KAAIvP,EAAE,GAAGC,EAAE6X,OAAO9X,EAAE,GAAGC,EAAE8X,OAAO/X,EAAE,GAAGC,EAAE+X,OAAO,IAAMjY,EAAE,CAAC,EAAE,GAAG,IAAIE,EAAEgY,YAAYjN,OAAOjL,EAAE,sBAAqB,GAAAoC,OAAIlC,EAAEiY,gBAAgBC,iBAAgB,KAAAhW,OAAIlC,EAAEmY,sBAAuBrY,EAAE,sBAAsBE,EAAEgY,YAAYlY,EAAE,8BAA8BE,EAAEoY,cAActY,EAAE,kBAAkBE,EAAEqY,mBAAmBrY,EAAEsY,WAAWvN,OAAO,EAAE,CAAC,IAAMpL,EAAE,IAAI4Y,KAAKvY,EAAEwY,WAAW1Y,EAAE,0BAA0BH,EAAE0M,WAAWvM,EAAE,2BAA2BE,EAAEsY,UAAU,CAACtY,EAAEyY,WAAW3Y,EAAE,sBAAqB,GAAAoC,OAAIlC,EAAE0Y,MAAMR,iBAAgB,KAAAhW,OAAIlC,EAAE2Y,aAAc,IAAMtJ,EAAErP,EAAE4Y,WAAW9Y,EAAE,uBAAsB,IAAAoC,OAAKnC,EAAE,GAAE,MAAAmC,OAAKnC,EAAE,GAAE,MAAAmC,OAAKnC,EAAE,GAAE,KAAI,IAAM2P,EAAE,SAAA/P,GAAI,IAAMC,EAAE,IAAI2I,EAAAA,GAAExI,EAAEF,GAAG,kBAAIwX,EAAKwB,oBAAoBtJ,EAAEnF,UAAU6C,MAAMnN,EAAE,IAAGH,EAAEyG,IAAIiR,EAAKzS,KAAKhF,EAAEsG,EAAEmJ,EAAE,EAAExF,EAAElK,EAAEmZ,QAAQlO,EAAEjL,EAAE2X,QAAQyB,QAAQC,EAAAA,GAAAA,IAAM,IAAI,MAAMnP,EAAEoP,IAAIC,MAAMhT,EAAE2D,EAAEoP,IAAIC,OAAOxJ,EAAE7F,EAAEoP,MAAM,MAAMpP,EAAEsP,IAAID,MAAMhT,EAAE2D,EAAEsP,IAAID,OAAOxJ,EAAE7F,EAAEsP,KAAKvO,EAAE,CAAC,IAAM/K,GAAEkQ,EAAAA,EAAAA,IAAEpQ,EAAEyZ,KAAK1J,EAAE7P,GAAGF,EAAEmZ,QAAQO,IAAI7O,KAAK3K,EAAE,CAAC,CAAt9B,CAA3Z,CAAk3C,GAAC,CAAAuF,IAAA,sBAAAG,MAAA,SAAoB1F,EAAED,GAAG,OAAO,IAAID,EAAAA,EAAE,CAACsN,MAAMpN,EAAEyZ,YAAYzZ,EAAE0Z,WAAW3Z,GAAG,GAAC,CAAAwF,IAAA,iBAAAG,MAAA,SAAe5F,GAAG,OAAOA,GAAG,IAAI,MAAM,OAAO,EAAE,IAAI,SAAS,OAAO,EAAE,IAAI,OAAO,OAAO,EAAE,GAAC,CAAAyF,IAAA,sBAAAG,MAAA,SAAoB5F,EAAEE,EAAED,GAAG+C,KAAKU,MAAMV,KAAKU,KAAKmW,qBAAqB7Z,EAAEE,EAAED,EAAE,KAAC6C,CAAA,CAA3xsB,E","sources":["../node_modules/@arcgis/core/libs/vxl/enums.js","../node_modules/@arcgis/core/libs/vxl/VxlModule.js","../node_modules/@arcgis/core/layers/VoxelWasmPerSceneView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nvar e,i,t,n,a,o;!function(e){e[e.Binary=0]=\"Binary\",e[e.JSON=1]=\"JSON\"}(e||(e={})),function(e){e[e.TreeIndex=0]=\"TreeIndex\",e[e.TreeStats=1]=\"TreeStats\",e[e.TreeData=2]=\"TreeData\",e[e.BrickBundles=3]=\"BrickBundles\",e[e.Section=4]=\"Section\",e[e.VariableStats=5]=\"VariableStats\"}(i||(i={})),function(e){e[e.None=1]=\"None\",e[e.Front=2]=\"Front\",e[e.Back=3]=\"Back\"}(t||(t={})),function(e){e[e.Low=0]=\"Low\",e[e.Medium=1]=\"Medium\",e[e.High=2]=\"High\"}(n||(n={})),function(e){e[e.None=0]=\"None\",e[e.StaticSections=1]=\"StaticSections\",e[e.Slices=2]=\"Slices\",e[e.DynamicSections=4]=\"DynamicSections\",e[e.GhostShell=8]=\"GhostShell\",e[e.Isosurface=16]=\"Isosurface\",e[e.Quality=32]=\"Quality\",e[e.SunLocation=64]=\"SunLocation\",e[e.StaticSectionSelection=128]=\"StaticSectionSelection\",e[e.ExaggerationAndOffset=256]=\"ExaggerationAndOffset\",e[e.CurrentTime=512]=\"CurrentTime\",e[e.CurrentVariable=1024]=\"CurrentVariable\",e[e.DeleteIsosurface=2048]=\"DeleteIsosurface\",e[e.ContainerVisibility=4096]=\"ContainerVisibility\",e[e.RenderMode=8192]=\"RenderMode\",e[e.Optimization=16384]=\"Optimization\",e[e.VariableStyles=32768]=\"VariableStyles\",e[e.VolumeStyles=65536]=\"VolumeStyles\",e[e.AnalysisSlice=131072]=\"AnalysisSlice\"}(a||(a={})),function(e){e[e.Isosurfaces=0]=\"Isosurfaces\",e[e.DynamicSections=1]=\"DynamicSections\",e[e.StaticSections=2]=\"StaticSections\"}(o||(o={}));export{o as ContainerType,a as UpdateFlags,i as VoxelRequestType,t as WasmCullMode,n as WasmRenderingQuality,e as WasmResponseType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as t}from\"../../assets.js\";function e(t){return new Promise((e=>import(\"../../chunks/vxlLayer.js\").then((t=>t.v)).then((({default:n})=>{const r=n({locateFile:i,preinitializedWebGLContext:t,onRuntimeInitialized:()=>e(r)})})))).catch((t=>{throw t}))}function i(e){return t(`esri/libs/vxl/${e}`)}export{e as loadVoxelWASM};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../Graphic.js\";import t from\"../request.js\";import has from\"../core/has.js\";import i from\"../core/Logger.js\";import{isSome as r,removeMaybe as s,isNone as a}from\"../core/maybe.js\";import{isAbortError as n}from\"../core/promiseUtils.js\";import{watch as o}from\"../core/reactiveUtils.js\";import{i as l}from\"../chunks/vec3.js\";import{c as h}from\"../chunks/vec3f64.js\";import{renderSRFromViewSR as d}from\"../geometry/support/coordinateSystem.js\";import{PointIndex as _,PlaneIndex as u}from\"../geometry/support/frustum.js\";import{WasmCullMode as c,VoxelRequestType as m,UpdateFlags as g,ContainerType as f}from\"../libs/vxl/enums.js\";import{loadVoxelWASM as p}from\"../libs/vxl/VxlModule.js\";import{ViewingMode as x}from\"../views/ViewingMode.js\";import{VoxelTarget as y}from\"../views/3d/layers/i3s/Intersector.js\";import{Frustum as v}from\"../views/3d/state/Frustum.js\";import{RenderCoordsHelper as b}from\"../views/3d/support/RenderCoordsHelper.js\";import{ShaderOutput as w}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{newIntersectorResult as T}from\"../views/3d/webgl-engine/lib/Intersector.js\";import{IntersectorType as R,StoreResults as E}from\"../views/3d/webgl-engine/lib/IntersectorInterfaces.js\";import{RenderFeature as L}from\"../views/3d/webgl-engine/lib/RenderFeature.js\";import{RenderSlot as C}from\"../views/3d/webgl-engine/lib/RenderSlot.js\";import{ContextType as F}from\"../views/webgl/context-util.js\";import{CompareFunction as S,Face as V,StencilOperation as P}from\"../views/webgl/enums.js\";const W=i.getLogger(\"esri.layers.VoxelWasmPerSceneView\");var I;!function(e){e[e.Lifetime=1]=\"Lifetime\",e[e.RequestResponse=2]=\"RequestResponse\",e[e.Rendering=3]=\"Rendering\",e[e.Error=4]=\"Error\"}(I||(I={}));class k{constructor(e){this._halfIntTexturesAvailable=!1,this._textureFloatLinearAvailable=!1,this._havePreparedWithAllLayers=!1,this._readyWatchHandle=null,this._qualityWatchHandle=null,this._stationaryWatchHandle=null,this._timeExtentWatchHandle=null,this._renderPluginContext=null,this._vxlPromise=null,this._vxl=null,this._pluginIsActive=!1,this._moreToLoad=!1,this._viewportWidth=-1,this._viewportHeight=-1,this._newLayers=[],this._layers=new Map,this._shaderOutput=w.Color,this._renderSlot=C.VOXEL,this._rctx=null,this._renderTargetToRestore=null,this._lastFrameWasStationary=!1,this._wasmMemBlockSizes=[512,1024,2048,4096,8192,16384,32768,65536],this._wasmMemBlocks=new Map,this._dbgFlags=new Set,this._captureFrustum=!1,this._frustum=null,this._frustumRenderableId=-1,this._renderCoordsHelper=null,this.type=R.VOXEL,this.slicePlaneEnabled=!0,this.isGround=!1,this.layerUid=[],this._view=e,this._initialize()}get canRender(){return!!this._vxl&&\"local\"===this._view.viewingMode}_dbg(e,t){this._dbgFlags.has(e)&&(e===I.Error?W.error(t):W.warn(t))}_removeRenderPlugin(){this._pluginIsActive&&this._view._stage&&(this._dbg(I.Lifetime,\"--removeRenderPlugin--\"),this._view._stage.removeRenderPlugin(this)),this._pluginIsActive=!1}_initialize(){this._dbg(I.Lifetime,\"--initialize--\");for(const e of this._wasmMemBlockSizes)this._wasmMemBlocks.set(e,0);this._readyWatchHandle=o((()=>this._view.ready),(e=>{e&&\"local\"===this._view.viewingMode?(this._dbg(I.Lifetime,\"view ready status changed to ready on a local view, calling addRenderPlugin\"),this._view._stage.addRenderPlugin([this._renderSlot],this),this._pluginIsActive=!0):(this._dbg(I.Lifetime,\"view ready status changed, not ready or not a local view!\"),this._removeRenderPlugin())}),{initial:!0}),this._qualityWatchHandle=o((()=>this._view?.qualityProfile),(e=>{this._dbg(I.Rendering,\"qualityProfile changed to \"+e),this._vxl&&this._vxl.set_quality(this._toWasmQuality(e))}),{initial:!0}),this._timeExtentWatchHandle=o((()=>this._view?.timeExtent),(()=>{if(this._vxl){const e=this._getTimeArgs(this._view?.timeExtent);this._dbg(I.Rendering,\"sceneView timeExtent changed to useTime=\"+e.useTime+\" st=\"+e.startTime+\" et=\"+e.endTime),this._vxl.set_scene_time_extent(e.startTime,e.endTime,e.useTime),this._renderPluginContext.requestRender()}}),{initial:!0}),this._stationaryWatchHandle=o((()=>this._view?.stationary),(e=>{this._vxl&&e&&!this._lastFrameWasStationary&&this._renderPluginContext.requestRender()}))}initializeRenderContext(e){this._dbg(I.Lifetime,\"--initializeRenderContext--\");const t=e.renderContext.rctx;t.type===F.WEBGL2?(this._renderPluginContext=e,this._rctx=e.renderContext.rctx,this._halfIntTexturesAvailable=!!this._rctx.capabilities.textureNorm16,this._textureFloatLinearAvailable=this._rctx.capabilities.textureFloatLinear,this._initializeWasm(t.gl)):this._dbg(I.Error,\"WebGL 1 context only!\")}uninitializeRenderContext(){this._renderPluginContext=null,this._rctx=null,this._dbg(I.Lifetime,\"--uninitializeRenderContext--\")}_restoreFramebuffer(){if(!this._renderTargetToRestore)return;const e=this._renderTargetToRestore.fbo;if(!!!this._rctx)return void this._dbg(I.Error,\"no context in restoreFramebuffer!\");this._rctx.bindFramebuffer(e,!0);const t=this._renderTargetToRestore.viewport;this._rctx.setViewport(t.x,t.y,t.width,t.height)}_bindPreviousDepthToSlot(e,t){const i=!!this._rctx,r=!!this._renderTargetToRestore;if(!i||!r)return 0;const s=this._renderTargetToRestore.fbo.depthStencilTexture;return s?(0===t?this._rctx.bindTexture(null,e,!0):this._rctx.bindTexture(s,e,!0),1):(this._dbg(I.Error,\"no depth/stencil texture exists!\"),0)}_modifyResourceCount(e,t,i){if(!this._rctx)return void this._dbg(I.Error,\"modifyAllocation callback has no rendering context!\");const r=e;1===i?this._rctx.instanceCounter.increment(r,t):this._rctx.instanceCounter.decrement(r,t)}_setBlendState(e,t,i,r){this._rctx?(this._rctx.setBlendingEnabled(1===e),this._rctx.setBlendFunction(t,i),this._rctx.setBlendEquation(r)):this._dbg(I.Error,\"setBlendState callback has no rendering context!\")}_setFrontFace(e){this._rctx?this._rctx.setFrontFace(e):this._dbg(I.Error,\"setFrontFace callback has no rendering context!\")}_setDepthStencilStateFunction(e,t,i){this._rctx?(this._rctx.setDepthFunction(i),this._rctx.setDepthTestEnabled(1===e),this._rctx.setDepthWriteEnabled(1===t),this._rctx.setStencilTestEnabled(!1),this._rctx.setStencilFunction(S.ALWAYS,0,255),this._rctx.setStencilOpSeparate(V.FRONT,P.KEEP,P.INCR,P.KEEP),this._rctx.setStencilOpSeparate(V.BACK,P.KEEP,P.DECR,P.KEEP)):this._dbg(I.Error,\"setDepthStencilStateFunction callback has no rendering context!\")}_setRasterizerState(e){if(this._rctx)switch(e){case c.None:this._rctx.setFaceCullingEnabled(!1);break;case c.Back:this._rctx.setCullFace(V.BACK),this._rctx.setFaceCullingEnabled(!0);break;case c.Front:this._rctx.setCullFace(V.FRONT),this._rctx.setFaceCullingEnabled(!0)}else this._dbg(I.Error,\"setRasterizerState callback has no rendering context!\")}_setViewport(e,t,i,r){this._rctx?this._rctx.setViewport(e,t,i,r):this._dbg(I.Error,\"setViewport callback has no rendering context!\")}_updateMemoryUsage(){this._layers.forEach(((e,t)=>{if(e.needMemoryUsageUpdate){const i=this._vxl.estimate_memory_usage(t);i>=0&&(e.needMemoryUsageUpdate=!1,e.layerView.setUsedMemory(i))}}))}_syncRequestsResponses(){this._layers.forEach(((e,i)=>{const r=[];e.responses.forEach(((t,s)=>{r.push(s),this._dbg(I.RequestResponse,\"responding for requestID:\"+s+\" size:\"+t.size),this._vxl.respond(i,s,t),t.requestType!==m.TreeIndex&&t.requestType!==m.Section||(e.needMemoryUsageUpdate=!0)}));const s=e.responses;for(const t of r)s.delete(t);const a=this._vxl.get_new_requests(i),o=e.abortController.signal;for(const l in a){e.outstandingRequestCount+=1,1===e.outstandingRequestCount&&e.layerView.updatingFlagChanged();const i=a[l],r={responseType:\"array-buffer\",signal:o};this._dbg(I.RequestResponse,\"making requestID:\"+l+\" url:\"+i.url),t(i.url,r).then((t=>{e.outstandingRequestCount-=1,0===e.outstandingRequestCount&&e.layerView.updatingFlagChanged(),this._dbg(I.RequestResponse,\"have response for requestID:\"+l);let r=0;if(t.data.byteLength>0){r=this._vxl._malloc(t.data.byteLength);const e=new Uint8Array(this._vxl.HEAPU8.buffer,r,t.data.byteLength),i=new Uint8Array(t.data);for(let r=0;r<t.data.byteLength;++r)e[r]=i[r]}s.set(+l,{responseType:i.responseType,ptr:r,size:t.data.byteLength,success:!0,requestType:i.requestType})})).catch((t=>{e.outstandingRequestCount-=1,0===e.outstandingRequestCount&&e.layerView.updatingFlagChanged(),n(t)||(this._dbg(I.Error,`requestID:${l} failed, error=${t.toString()}`),s.set(+l,{responseType:i.responseType,ptr:0,size:0,success:!1,requestType:i.requestType}))}))}}))}updateWasmCamera(e){this._vxl.set_projection_matrix.apply(this._vxl,e.projectionMatrix),this._vxl.set_view_matrix.apply(this._vxl,e.viewMatrix),this._vxl.set_near_far(e.near,e.far)}isUpdating(e){if(!this._vxl&&this._vxlPromise)return!0;const t=this._layers.get(e);return!!t&&t.outstandingRequestCount>0}getLayerTimes(e){const t=[];return this._layers.forEach(((i,r)=>{if(i.layerView.wasmLayerId===e.wasmLayerId){const i=this._vxl.get_layer_epoch_times(r,e.layer.currentVariableId);for(let e=0;e<i.length;++e)t.push(i[e])}})),t}getCurrentLayerTimeIndex(e){let t=0;return this._layers.forEach(((i,r)=>{i.layerView.wasmLayerId===e.wasmLayerId&&(t=this._vxl.get_layer_current_time_id(r))})),t}setEnabled(e,t){this._layers.forEach(((i,r)=>{i.layerView.wasmLayerId===e.wasmLayerId&&(this._vxl.set_enabled(r,t),i.needMemoryUsageUpdate=!0,this._renderPluginContext.requestRender())}))}setStaticSections(e,t){const i={mask:g.StaticSections,staticSections:t};return this._doMaskedUIUpdate(e,i,!0)}setCurrentVariable(e,t){const i={mask:g.CurrentVariable,currentVariable:t};return this._doMaskedUIUpdate(e,i,!0)}setRenderMode(e,t){const i={mask:g.RenderMode,renderMode:t};return this._doMaskedUIUpdate(e,i,!0)}setVerticalExaggerationAndOffset(e,t,i,r){const s={mask:g.ExaggerationAndOffset,volStyleDesc:{volumeId:t,verticalExaggeration:i,verticalOffset:r}};return this._doMaskedUIUpdate(e,s,!0)}setVariableStyles(e,t){const i={mask:g.VariableStyles,variableStyles:t};return this._doMaskedUIUpdate(e,i,!0)}setVolumeStyles(e,t){const i={mask:g.VolumeStyles,volumeStyles:t};return this._doMaskedUIUpdate(e,i,!0)}setEnableDynamicSections(e,t){const i={mask:g.ContainerVisibility,containerIsVisible:t,container:f.DynamicSections};return this._doMaskedUIUpdate(e,i,!0)}setEnableIsosurfaces(e,t){const i={mask:g.ContainerVisibility,containerIsVisible:t,container:f.Isosurfaces};return this._doMaskedUIUpdate(e,i,!0)}setEnableSections(e,t){const i={mask:g.ContainerVisibility,containerIsVisible:t,container:f.StaticSections};return this._doMaskedUIUpdate(e,i,!0)}setAnalysisSlice(e,t,i,r){const s={mask:g.AnalysisSlice,analysisSlice:{point:i,normal:r,enabled:t}};return this._doMaskedUIUpdate(e,s,!0)}_doMaskedUIUpdate(e,t,i){if(!this._vxl)return!1;let r=!1;return this._layers.forEach(((i,s)=>{if(i.layerView.wasmLayerId===e.wasmLayerId){const e={str:JSON.stringify(t),byteCount:0,ptr:0,isReusable:!1};this._allocateBlock(e)&&(r=1===this._vxl.handle_masked_ui_update(s,e.ptr,e.byteCount),e.isReusable||this._vxl._free(e.ptr))}})),r&&i&&this._renderPluginContext.requestRender(),r}_addTriangleToWasmBuffer(e,t,i,r,s){return e[3*t+0]=i[0],e[3*t+1]=i[1],e[3*t+2]=i[2],e[3*(t+=1)+0]=r[0],e[3*t+1]=r[1],e[3*t+2]=r[2],e[3*(t+=1)+0]=s[0],e[3*t+1]=s[1],e[3*t+2]=s[2],t+=1}_addNormalToWasmBuffer(e,t,i){return e[3*t+0]=i[0],e[3*t+1]=i[1],e[3*t+2]=i[2],t+=1}_doCaptureFrustum(){if(!this._vxl)return;const e=36,t=e/3,i=this._vxl._malloc(3*e*Float32Array.BYTES_PER_ELEMENT),r=new Float32Array(this._vxl.HEAPF32.buffer,i,3*e),s=this._vxl._malloc(3*t*Float32Array.BYTES_PER_ELEMENT),a=new Float32Array(this._vxl.HEAPF32.buffer,s,e),n=this._frustum.points[_.NEAR_BOTTOM_LEFT],o=this._frustum.points[_.NEAR_BOTTOM_RIGHT],l=this._frustum.points[_.NEAR_TOP_RIGHT],h=this._frustum.points[_.NEAR_TOP_LEFT],d=this._frustum.points[_.FAR_BOTTOM_LEFT],c=this._frustum.points[_.FAR_BOTTOM_RIGHT],m=this._frustum.points[_.FAR_TOP_RIGHT],g=this._frustum.points[_.FAR_TOP_LEFT];let f=0,p=0;const x=this._frustum.planes[u.NEAR];f=this._addTriangleToWasmBuffer(r,f,l,o,n),p=this._addNormalToWasmBuffer(a,p,x),f=this._addTriangleToWasmBuffer(r,f,n,h,l),p=this._addNormalToWasmBuffer(a,p,x);const y=this._frustum.planes[u.FAR];f=this._addTriangleToWasmBuffer(r,f,d,c,m),p=this._addNormalToWasmBuffer(a,p,y),f=this._addTriangleToWasmBuffer(r,f,m,g,d),p=this._addNormalToWasmBuffer(a,p,y);const v=this._frustum.planes[u.TOP];f=this._addTriangleToWasmBuffer(r,f,m,l,h),p=this._addNormalToWasmBuffer(a,p,v),f=this._addTriangleToWasmBuffer(r,f,h,g,m),p=this._addNormalToWasmBuffer(a,p,v);const b=this._frustum.planes[u.BOTTOM];f=this._addTriangleToWasmBuffer(r,f,n,o,c),p=this._addNormalToWasmBuffer(a,p,b),f=this._addTriangleToWasmBuffer(r,f,c,d,n),p=this._addNormalToWasmBuffer(a,p,b);const w=this._frustum.planes[u.LEFT];f=this._addTriangleToWasmBuffer(r,f,h,n,d),p=this._addNormalToWasmBuffer(a,p,w),f=this._addTriangleToWasmBuffer(r,f,d,g,h),p=this._addNormalToWasmBuffer(a,p,w);const T=this._frustum.planes[u.RIGHT];f=this._addTriangleToWasmBuffer(r,f,l,m,c),p=this._addNormalToWasmBuffer(a,p,T),f=this._addTriangleToWasmBuffer(r,f,c,o,l),p=this._addNormalToWasmBuffer(a,p,T),-1!==this._frustumRenderableId&&this._vxl.remove_generic_mesh(this._frustumRenderableId),this._frustumRenderableId=this._vxl.add_generic_mesh(i,3*e,s,e,255,0,0,64),this._vxl._free(i),this._vxl._free(s),this._captureFrustum=!1,this._renderPluginContext.requestRender()}captureFrustum(){null===this._renderCoordsHelper&&(this._renderCoordsHelper=b.create(x.Local,d(!1,this._view.spatialReference))),null===this._frustum&&(this._frustum=new v(this._renderCoordsHelper)),this._captureFrustum=!0,null!==this._renderPluginContext&&this._renderPluginContext.requestRender()}toggleFullVolumeExtentDraw(e){this._vxl&&this._layers.forEach(((t,i)=>{t.layerView.wasmLayerId===e.wasmLayerId&&(this._vxl.toggle_full_volume_extent_draw(i),this._renderPluginContext.requestRender())}))}addVoxelLayer(e){if(!this._vxl){const t={layerView:e,resolveCallback:null,rejectCallback:null},i=new Promise(((e,i)=>{t.resolveCallback=e,t.rejectCallback=i}));return this._newLayers.push(t),i}const t=this._addVoxelLayer(e);return t<0?Promise.reject(-1):Promise.resolve(t)}removeVoxelLayer(e){if(!this._vxl){const t=this._newLayers.findIndex((t=>e.uid===t.layerView.uid));t>=0&&(this._newLayers[t].resolveCallback(-1),this._newLayers.splice(t,1));const i=this._newLayers.length;return 0===i&&(this._dbg(I.Lifetime,\" no voxel layers left after removing a layer, removing RenderPlugin and destroying\"),this.destroy()),i}let t=-1;this._layers.forEach(((i,r)=>{if(i.layerView.wasmLayerId===e.wasmLayerId){t=r,i.abortController.abort(),this._vxl.remove_layer(t);const s=this.layerUid.indexOf(e.layer.uid);-1!==s&&this.layerUid.splice(s,1)}})),t>=0&&this._layers.delete(t);const i=this._layers.size;return 0===i&&(this._dbg(I.Lifetime,\" no voxel layers left after removing a layer, removing RenderPlugin and destroying\"),this.destroy()),i}_getBlockSize(e){for(const t of this._wasmMemBlockSizes)if(e<t)return t;return-1}_allocateBlock(e){e.byteCount=this._vxl.lengthBytesUTF8(e.str)+1;const t=this._getBlockSize(e.byteCount);return t<0?(e.isReusable=!1,e.ptr=this._vxl._malloc(e.byteCount)):(e.isReusable=!0,e.ptr=this._wasmMemBlocks.get(t),0===e.ptr&&(e.ptr=this._vxl._malloc(t),this._wasmMemBlocks.set(t,e.ptr))),0!==e.ptr&&(this._vxl.stringToUTF8(e.str,e.ptr,e.byteCount),!0)}_getTimeArgs(e){let t=-Number.MAX_VALUE,i=Number.MAX_VALUE,s=!1;return r(e)&&(e.isAllTime?s=!0:(r(e.start)&&(s=!0,t=e.start.getTime()/1e3),r(e.end)&&(s=!0,i=e.end.getTime()/1e3))),{startTime:t,endTime:i,useTime:s}}_addVoxelLayer(e){const t=e.layer;let i=-1;const r=t.getConfiguration();if(r.length<1)return-1;const s={str:r,byteCount:0,ptr:0,isReusable:!1};if(!this._allocateBlock(s))return-1;const a=this._getTimeArgs(this._view?.timeExtent),n=this._view.spatialReference.isWGS84&&t.spatialReference.isWGS84?111319.49079327357:1;if(i=this._vxl.add_layer(t.serviceRoot,s.ptr,s.byteCount,n,n,a.startTime,a.endTime,a.useTime,this._toWasmQuality(this._view.qualityProfile)),s.isReusable||this._vxl._free(s.ptr),i>=0){t.test?.constantUpscaling&&(this._setUpscalingLimits(0,.25,.25),this._setUpscalingLimits(1,.5,.5),this._setUpscalingLimits(2,.75,.75));const r=new AbortController;if(this._layers.set(i,{layerView:e,responses:new Map,outstandingRequestCount:0,abortController:r,needMemoryUsageUpdate:!1}),this.layerUid.push(e.layer.uid),!this._halfIntTexturesAvailable||has(\"mac\")){const t=[];let i=\"\";for(const r of e.layer.variables)\"Int16\"!==r.renderingFormat.type&&\"UInt16\"!==r.renderingFormat.type||(t.push(r.name),r.id===e.layer.currentVariableId&&(i=r.name));\"\"!==i&&W.error(\"#addVoxelLayer_error()\",e.layer,`The voxel layer '${e.layer.title}' cannot render the current variable '${i}' in this browser`),t.length>0&&W.warn(\"#addVoxelLayer_warning()\",e.layer,`The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in this browser`)}if(!this._textureFloatLinearAvailable){const t=[];let i=\"\";for(const r of e.layer.variables)\"Float32\"===r.renderingFormat.type&&(t.push(r.name),r.id===e.layer.currentVariableId&&(i=r.name));\"\"!==i&&W.error(\"#addVoxelLayer_error()\",e.layer,`The voxel layer '${e.layer.title}' cannot render the current variable '${i}' in this browser`),t.length>0&&W.warn(\"#addVoxelLayer_warning()\",e.layer,`The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in this browser`)}return has(\"esri-mobile\")&&W.warnOnce(\"Mobile support differs across devices. Voxel layer might not display as expected.\"),i}return-1}prepareRender(e){if(!this._vxl)return;const t=e.bindParameters.camera.viewForward,i=e.bindParameters.camera.eye;this._vxl.update_camera_pos_and_direction(i[0],i[1],i[2],t[0],t[1],t[2]);const r=this._vxl.cull();this._dbg(I.RequestResponse,\"missingResourceCount=\"+r),this._moreToLoad=r>0,this._havePreparedWithAllLayers=0===this._newLayers.length,this._updateMemoryUsage()}render(e){if(!this._vxl||e.output!==this._shaderOutput||e.bindParameters.slot!==this._renderSlot)return;for(const i of this._newLayers){const e=this._addVoxelLayer(i.layerView);-1===e?i.rejectCallback(-1):i.resolveCallback(e)}if(this._newLayers=[],0===this._layers.size)return void this._dbg(I.Error,\"No voxel layers but RenderPlugin instance is being asked to render!\");this._lastFrameWasStationary=this._view.stationary,this._syncRequestsResponses(),this._beforeDraw(),this._vxl.begin_color_frame(!this._view._stage.renderer.isFeatureEnabled(L.HighQualityVoxel),e.bindParameters.lighting.mainLight.direction[0],e.bindParameters.lighting.mainLight.direction[1],e.bindParameters.lighting.mainLight.direction[2]);const t=this._renderTargetToRestore.viewport;t.width===this._viewportWidth&&t.height===this._viewportHeight||(this._viewportWidth=t.width,this._viewportHeight=t.height,this._vxl.set_viewport(t.width,t.height),this._layers.forEach((e=>{e.needMemoryUsageUpdate=!0}))),0===t.x&&0===t.y||this._dbg(I.Error,\"Unsupported viewport parameters detected!\"),this.updateWasmCamera(e.bindParameters.camera),this._captureFrustum&&(this._frustum.update(e.bindParameters.camera),this._doCaptureFrustum()),this._vxl.draw(),this._afterDraw(),(this._moreToLoad||!this._havePreparedWithAllLayers&&this._layers.size>0)&&this._renderPluginContext.requestRender()}destroy(){this._dbg(I.Lifetime,\"--destroy--\"),this._removeRenderPlugin(),this._readyWatchHandle=s(this._readyWatchHandle),this._qualityWatchHandle=s(this._qualityWatchHandle),this._timeExtentWatchHandle=s(this._timeExtentWatchHandle),this._stationaryWatchHandle=s(this._stationaryWatchHandle),this._vxl&&(this._layers.forEach((e=>{e.abortController.abort()})),this._wasmMemBlocks.forEach((e=>{0!==e&&this._vxl._free(e)})),this._vxl.uninitialize_voxel_wasm(),this._vxl=null)}_initializeWasm(e){return this._vxl?Promise.resolve():(this._vxlPromise||(this._vxlPromise=p(e).then((e=>{if(this._vxl=e,this._vxlPromise=null,this._newLayers.length<=0)return this._dbg(I.Lifetime,\" no voxel layers left after WASM downloaded, removing RenderPlugin and destroying\"),void this.destroy();const t=this._getTimeArgs(this._view?.timeExtent),i=this._vxl.addFunction(this._restoreFramebuffer.bind(this),\"v\"),r=this._vxl.addFunction(this._setBlendState.bind(this),\"viiii\"),s=this._vxl.addFunction(this._setFrontFace.bind(this),\"vi\"),a=this._vxl.addFunction(this._setRasterizerState.bind(this),\"vi\"),n=this._vxl.addFunction(this._setDepthStencilStateFunction.bind(this),\"viii\"),o=this._vxl.addFunction(this._setViewport.bind(this),\"viiii\"),l=this._vxl.addFunction(this._bindPreviousDepthToSlot.bind(this),\"iii\"),h=this._vxl.addFunction(this._modifyResourceCount.bind(this),\"viii\"),d=this._halfIntTexturesAvailable&&!has(\"mac\"),_=this._textureFloatLinearAvailable;this._vxl.initialize_voxel_wasm(i,r,s,a,n,o,l,h,t.startTime,t.endTime,t.useTime,d,_),this._renderPluginContext&&this._renderPluginContext.requestRender()})).catch((()=>{for(const e of this._newLayers)e.rejectCallback(-2);this._dbg(I.Error,\" WASM failed to download, removing RenderPlugin and destroying\"),this.destroy()}))),this._vxlPromise)}pickDepth(e,t,i){if(!this._vxl||!this._rctx||0===this._layers.size)return null;const r=i.viewport[3]-t;if(e<0||e>i.viewport[2]||t<0||t>i.viewport[3])return this._dbg(I.Error,`[js] pickDepth: outOfRange, screenXY=[${e.toFixed(0)}, ${r.toFixed(0)}]]`),null;this._beforeDraw();const s=i.viewForward,a=i.eye;this._vxl.update_camera_pos_and_direction(a[0],a[1],a[2],s[0],s[1],s[2]),this.updateWasmCamera(i),this._vxl.begin_frame();const n=this._vxl.pick_depth(e,r);if(this._afterDraw(),n.success){return n.distanceToCamera}return null}pickObject(e,t,i,r){if(!this._vxl||!this._rctx||0===this._layers.size)return null;const s=Math.round(e),a=Math.round(t);if(s<0||s>i.viewport[2]||a<0||a>i.viewport[3])return this._dbg(I.Error,`[js] pickObject: outOfRange, screenXY=[${s}, ${a}], vp=[${i.viewport.toString()}]`),null;this._beforeDraw();const n=i.viewForward,o=i.eye;this._vxl.update_camera_pos_and_direction(o[0],o[1],o[2],n[0],n[1],n[2]),this.updateWasmCamera(i),this._vxl.begin_frame();let l=null;if(0===r.length)l=this._vxl.pick_object(s,a,0,0);else{const e={str:JSON.stringify({layerIds:r}),byteCount:0,ptr:0,isReusable:!1};this._allocateBlock(e)&&(l=this._vxl.pick_object(s,a,e.ptr,e.byteCount),e.isReusable||this._vxl._free(e.ptr))}return this._afterDraw(),l}_beforeDraw(){this._renderTargetToRestore={fbo:this._rctx.getBoundFramebufferObject(),viewport:this._rctx.getViewport()},this._rctx.setPolygonOffsetFillEnabled(!1),this._rctx.setScissorTestEnabled(!1),this._rctx.setColorMask(!0,!0,!0,!0)}_afterDraw(){this._renderTargetToRestore.fbo=null,this._rctx.externalTextureUnitUpdate(this._vxl.get_texture_units_bound_in_frame(),this._vxl.get_active_texture_unit()),this._rctx.externalVertexArrayObjectUpdate(),this._rctx.externalVertexBufferUpdate(),this._rctx.externalProgramUpdate()}intersect(e,t,i,r,s){if(!this._vxl||!this._rctx||0===this._layers.size||!e.options.selectionMode||e.options.isFiltered)return;if(s[0]<0||s[0]>e.camera.viewport[2]||s[1]<0||s[1]>e.camera.viewport[3])return this._dbg(I.Error,`[js] VoxelWasmPerScene.intersect: outOfRange, screenXY=[${s[0].toFixed(0)}, ${s[1].toFixed(0)}]`),null;const n=[];this._layers.forEach((t=>{e.options.filteredLayerUids.includes(t.layerView.layer.uid)&&n.push(t.layerView.wasmLayerId)}));const o=this.pickObject(s[0],s[1],e.camera,n);if(a(o)||-1===o.layerId)return;const d=this._layers.get(o.layerId);if(d){const t=d.layerView.layer.uid,s=o.distanceToCamera/l(i,r),a=h();a[0]=o.worldX,a[1]=o.worldY,a[2]=o.worldZ;const n={};if(0===o.uniqueValue.length?n[\"Voxel.ServiceValue\"]=`${o.continuousValue.toLocaleString()} ${o.continuousValueUnits}`:n[\"Voxel.ServiceValue\"]=o.uniqueValue,n[\"Voxel.ServiceVariableLabel\"]=o.variableLabel,n[\"Voxel.Position\"]=o.voxelSpacePosition,o.nativeTime.length>0){const e=new Date(o.epochTime);n[\"Voxel.ServiceLocalTime\"]=e.toString(),n[\"Voxel.ServiceNativeTime\"]=o.nativeTime}o.hasDepth&&(n[\"Voxel.ServiceDepth\"]=`${o.depth.toLocaleString()} ${o.depthUnits}`);const _=o.faceNormal;n[\"Voxel.WorldPosition\"]=`[${a[0]}, ${a[1]}, ${a[2]}]`;const u=e=>{const i=new y(a,t,(()=>this._createVoxelGraphic(d.layerView.layer,n)));e.set(this.type,i,s,_)},c=e.results,m=e.options.store===E.ALL;if((null==c.min.dist||s<c.min.dist)&&u(c.min),(null==c.max.dist||s>c.max.dist)&&u(c.max),m){const t=T(e.ray);u(t),e.results.all.push(t)}}}_createVoxelGraphic(t,i){return new e({layer:t,sourceLayer:t,attributes:i})}_toWasmQuality(e){switch(e){case\"low\":return 0;case\"medium\":return 1;case\"high\":return 2}}_setUpscalingLimits(e,t,i){this._vxl&&this._vxl.set_upscaling_limits(e,t,i)}}export{k as default};\n"],"names":["e","i","t","n","a","o","Binary","JSON","TreeIndex","TreeStats","TreeData","BrickBundles","Section","VariableStats","None","Front","Back","Low","Medium","High","StaticSections","Slices","DynamicSections","GhostShell","Isosurface","Quality","SunLocation","StaticSectionSelection","ExaggerationAndOffset","CurrentTime","CurrentVariable","DeleteIsosurface","ContainerVisibility","RenderMode","Optimization","VariableStyles","VolumeStyles","AnalysisSlice","Isosurfaces","concat","I","W","Lifetime","RequestResponse","Rendering","Error","k","_classCallCheck","this","_halfIntTexturesAvailable","_textureFloatLinearAvailable","_havePreparedWithAllLayers","_readyWatchHandle","_qualityWatchHandle","_stationaryWatchHandle","_timeExtentWatchHandle","_renderPluginContext","_vxlPromise","_vxl","_pluginIsActive","_moreToLoad","_viewportWidth","_viewportHeight","_newLayers","_layers","Map","_shaderOutput","w","_renderSlot","C","_rctx","_renderTargetToRestore","_lastFrameWasStationary","_wasmMemBlockSizes","_wasmMemBlocks","_dbgFlags","Set","_captureFrustum","_frustum","_frustumRenderableId","_renderCoordsHelper","type","R","slicePlaneEnabled","isGround","layerUid","_view","_initialize","_createClass","key","get","viewingMode","value","has","error","warn","_stage","_dbg","removeRenderPlugin","_this","_step","_iterator","_createForOfIteratorHelper","s","done","set","err","f","ready","addRenderPlugin","_removeRenderPlugin","initial","_this$_view","qualityProfile","set_quality","_toWasmQuality","_this$_view2","timeExtent","_this$_view3","_getTimeArgs","useTime","startTime","endTime","set_scene_time_extent","requestRender","_this$_view4","stationary","renderContext","rctx","F","capabilities","textureNorm16","textureFloatLinear","_initializeWasm","gl","fbo","bindFramebuffer","viewport","setViewport","x","y","width","height","r","depthStencilTexture","bindTexture","instanceCounter","increment","decrement","setBlendingEnabled","setBlendFunction","setBlendEquation","setFrontFace","setDepthFunction","setDepthTestEnabled","setDepthWriteEnabled","setStencilTestEnabled","setStencilFunction","S","setStencilOpSeparate","V","P","c","setFaceCullingEnabled","setCullFace","_this2","forEach","needMemoryUsageUpdate","estimate_memory_usage","layerView","setUsedMemory","_this3","responses","push","size","respond","requestType","m","_i2","_r","length","delete","get_new_requests","abortController","signal","_loop","_l","outstandingRequestCount","updatingFlagChanged","l","responseType","url","then","data","byteLength","_malloc","Uint8Array","HEAPU8","buffer","ptr","success","catch","toString","set_projection_matrix","apply","projectionMatrix","set_view_matrix","viewMatrix","set_near_far","near","far","_this4","wasmLayerId","get_layer_epoch_times","layer","currentVariableId","_this5","get_layer_current_time_id","_this6","set_enabled","mask","g","staticSections","_doMaskedUIUpdate","currentVariable","renderMode","volStyleDesc","volumeId","verticalExaggeration","verticalOffset","variableStyles","volumeStyles","containerIsVisible","container","analysisSlice","point","normal","enabled","_this7","str","stringify","byteCount","isReusable","_allocateBlock","handle_masked_ui_update","_free","Float32Array","BYTES_PER_ELEMENT","HEAPF32","points","_","h","d","p","planes","u","_addTriangleToWasmBuffer","_addNormalToWasmBuffer","v","b","T","remove_generic_mesh","add_generic_mesh","spatialReference","_this8","toggle_full_volume_extent_draw","resolveCallback","rejectCallback","Promise","_addVoxelLayer","reject","resolve","_this9","findIndex","uid","splice","destroy","abort","remove_layer","indexOf","_step2","_iterator2","lengthBytesUTF8","_getBlockSize","stringToUTF8","Number","MAX_VALUE","isAllTime","start","getTime","end","_this$_view5","getConfiguration","isWGS84","add_layer","serviceRoot","_t$test","test","constantUpscaling","_setUpscalingLimits","AbortController","_step3","_iterator3","variables","renderingFormat","name","id","title","_step4","_iterator4","warnOnce","bindParameters","camera","viewForward","eye","update_camera_pos_and_direction","cull","_updateMemoryUsage","output","slot","_step5","_iterator5","_syncRequestsResponses","_beforeDraw","begin_color_frame","renderer","isFeatureEnabled","L","lighting","mainLight","direction","set_viewport","updateWasmCamera","update","_doCaptureFrustum","draw","_afterDraw","_this10","uninitialize_voxel_wasm","_this11","_ref","default","locateFile","preinitializedWebGLContext","onRuntimeInitialized","_this11$_view","addFunction","_restoreFramebuffer","bind","_setBlendState","_setFrontFace","_setRasterizerState","_setDepthStencilStateFunction","_setViewport","_bindPreviousDepthToSlot","_modifyResourceCount","initialize_voxel_wasm","_step6","_iterator6","toFixed","begin_frame","pick_depth","distanceToCamera","Math","round","pick_object","layerIds","getBoundFramebufferObject","getViewport","setPolygonOffsetFillEnabled","setScissorTestEnabled","setColorMask","externalTextureUnitUpdate","get_texture_units_bound_in_frame","get_active_texture_unit","externalVertexArrayObjectUpdate","externalVertexBufferUpdate","externalProgramUpdate","_this12","options","selectionMode","isFiltered","filteredLayerUids","includes","pickObject","layerId","worldX","worldY","worldZ","uniqueValue","continuousValue","toLocaleString","continuousValueUnits","variableLabel","voxelSpacePosition","nativeTime","Date","epochTime","hasDepth","depth","depthUnits","faceNormal","_createVoxelGraphic","results","store","E","min","dist","max","ray","all","sourceLayer","attributes","set_upscaling_limits"],"sourceRoot":""}