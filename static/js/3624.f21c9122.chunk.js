"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3624],{41978:function(t,e,i){i.d(e,{AM:function(){return y}});var n=i(93433),o=i(15671),l=i(43144),r=i(60136),s=i(29388),h=i(27366),a=i(85015),u=i(93169),c=i(84652),f=i(32718),d=i(49861),_=(i(25243),i(69912)),g=i(85411),v=i(32551),p=-1,y=function(t){(0,r.Z)(i,t);var e=(0,s.Z)(i);function i(t){var n;return(0,o.Z)(this,i),(n=e.call(this,t))._from=null,n._to=null,n._final=null,n._current=[],n._time=0,n.duration=(0,u.Z)("mapview-transitions-duration"),n.effects=[],n}return(0,l.Z)(i,[{key:"effect",set:function(t){if(this._get("effect")!==(t=t||"")){this._set("effect",t);try{this._transitionTo(C(t))}catch(e){this._transitionTo([]),f.Z.getLogger(this.declaredClass).warn("Invalid Effect",{effect:t,error:e})}}}},{key:"hasEffects",get:function(){return this.transitioning||!!this.effects.length}},{key:"scale",set:function(t){this._updateForScale(t)}},{key:"transitioning",get:function(){return null!==this._to}},{key:"canTransitionTo",value:function(t){try{return this.scale>0&&m(this._current,C(t),this.scale)}catch(e){return!1}}},{key:"transitionStep",value:function(t,e){this._applyTimeTransition(t),this._updateForScale(e)}},{key:"endTransitions",value:function(){this._applyTimeTransition(this.duration)}},{key:"_transitionTo",value:function(t){this.scale>0&&m(this._current,t,this.scale)?(this._final=t,this._to=(0,c.d9)(t),function(t,e,i){for(var o,l,r=t.length>e.length?t:e,s=t.length>e.length?e:t,h=s[s.length-1],a=null!==(o=null===h||void 0===h?void 0:h.scale)&&void 0!==o?o:i,u=null!==(l=null===h||void 0===h?void 0:h.effects)&&void 0!==l?l:[],c=s.length;c<r.length;c++)s.push({scale:a,effects:(0,n.Z)(u)});for(var f=0;f<r.length;f++)s[f].scale=s[f].scale===p?i:s[f].scale,r[f].scale=r[f].scale===p?i:r[f].scale,(0,v.uF)(s[f].effects,r[f].effects)}(this._current,this._to,this.scale),this._from=(0,c.d9)(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=t),this._set("effects",this._current[0]?(0,c.d9)(this._current[0].effects):[])}},{key:"_applyTimeTransition",value:function(t){if(this._to&&this._from&&this._current&&this._final){this._time+=t;for(var e=Math.min(1,this._time/this.duration),i=0;i<this._current.length;i++){var n=this._current[i],o=this._from[i],l=this._to[i];n.scale=k(o.scale,l.scale,e);for(var r=0;r<n.effects.length;r++){var s=n.effects[r],h=o.effects[r],a=l.effects[r];s.interpolate(h,a,e)}}1===e&&(this._current=this._final,this._set("effects",this._current[0]?(0,c.d9)(this._current[0].effects):[]),this._from=this._to=this._final=null)}}},{key:"_updateForScale",value:function(t){if(this._set("scale",t),0!==this._current.length){var e,i,n=this._current,o=this._current.length-1,l=1;if(1===n.length||t>=n[0].scale)i=e=n[0].effects;else if(t<=n[o].scale)i=e=n[o].effects;else for(var r=0;r<o;r++){var s=n[r],h=n[r+1];if(s.scale>=t&&h.scale<=t){l=(t-s.scale)/(h.scale-s.scale),e=s.effects,i=h.effects;break}}for(var a=0;a<this.effects.length;a++)this.effects[a].interpolate(e[a],i[a],l)}}}]),i}(a.Z);function C(t){var e=(0,g.Q)(t)||[];return function(t){var e=t[0];return!!e&&"type"in e}(e)?[{scale:p,effects:e}]:e}function m(t,e,i){var n,o,l,r;return null===(n=t[0])||void 0===n||!n.effects||null===(o=e[0])||void 0===o||!o.effects||!(((null===(l=t[0])||void 0===l?void 0:l.scale)===p||(null===(r=e[0])||void 0===r?void 0:r.scale)===p)&&(t.length>1||e.length>1)&&i<=0)&&(0,v.AS)(t[0].effects,e[0].effects)}function k(t,e,i){return t+(e-t)*i}(0,h._)([(0,d.Cb)()],y.prototype,"_to",void 0),(0,h._)([(0,d.Cb)()],y.prototype,"duration",void 0),(0,h._)([(0,d.Cb)({value:""})],y.prototype,"effect",null),(0,h._)([(0,d.Cb)({readOnly:!0})],y.prototype,"effects",void 0),(0,h._)([(0,d.Cb)({readOnly:!0})],y.prototype,"hasEffects",null),(0,h._)([(0,d.Cb)({value:0})],y.prototype,"scale",null),(0,h._)([(0,d.Cb)({readOnly:!0})],y.prototype,"transitioning",null),y=(0,h._)([(0,_.j)("esri.layers.effects.EffectView")],y)},33624:function(t,e,i){i.d(e,{W:function(){return g}});var n=i(1413),o=i(37762),l=i(15671),r=i(43144),s=i(11752),h=i(61120),a=i(60136),u=i(29388),c=i(23588),f=i(41978),d=i(87422),_=i(3453),g=function(t){(0,a.Z)(i,t);var e=(0,u.Z)(i);function i(){var t;return(0,l.Z)(this,i),(t=e.apply(this,arguments))._childrenSet=new Set,t._needsSort=!1,t.children=[],t._effectView=null,t._highlightOptions=null,t._highlightGradient=null,t}return(0,r.Z)(i,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t,this.requestRender()}},{key:"clips",get:function(){return this._clips},set:function(t){this._clips=t,this.children.forEach((function(e){return e.clips=t}))}},{key:"computedEffects",get:function(){var t,e;return null!==(t=null===(e=this._effectView)||void 0===e?void 0:e.effects)&&void 0!==t?t:null}},{key:"effect",get:function(){var t,e;return null!==(t=null===(e=this._effectView)||void 0===e?void 0:e.effect)&&void 0!==t?t:""},set:function(t){(this._effectView||t)&&(this._effectView||(this._effectView=new f.AM),this._effectView.effect=t,this.requestRender())}},{key:"highlightOptions",get:function(){return this._highlightOptions},set:function(t){if(!t)return this._highlightOptions=null,void(this._highlightGradient&&(this._highlightGradient.destroy(),this._highlightGradient=null,this.requestRender()));this._highlightOptions&&this._highlightOptions.equals(t)||(this._highlightOptions=t,this._highlightGradient||(this._highlightGradient=new _.Z),this._highlightGradient.setHighlightOptions(t),this.requestRender())}},{key:"updateTransitionProperties",value:function(t,e){(0,s.Z)((0,h.Z)(i.prototype),"updateTransitionProperties",this).call(this,t,e),this._effectView&&(this._effectView.transitionStep(t,e),this._effectView.transitioning&&this.requestRender())}},{key:"doRender",value:function(t){var e=this.createRenderParams(t);this.renderChildren(e)}},{key:"addChild",value:function(t){return this.addChildAt(t,this.children.length)}},{key:"addChildAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.children.length;if(!t)return t;if(this.contains(t))return t;this._needsSort=!0;var i=t.parent;return i&&i!==this&&i.removeChild(t),e>=this.children.length?this.children.push(t):this.children.splice(e,0,t),this._childrenSet.add(t),t.parent=this,t.stage=this.stage,this!==this.stage&&(t.clips=this.clips),this.requestRender(),t}},{key:"contains",value:function(t){return this._childrenSet.has(t)}},{key:"endTransitions",value:function(){(0,s.Z)((0,h.Z)(i.prototype),"endTransitions",this).call(this),this._effectView&&(this._effectView.endTransitions(),this.requestRender())}},{key:"removeAllChildren",value:function(){this._childrenSet.clear(),this._needsSort=!0;var t,e=(0,o.Z)(this.children);try{for(e.s();!(t=e.n()).done;){var i=t.value;this!==this.stage&&(i.clips=null),i.stage=null,i.parent=null}}catch(n){e.e(n)}finally{e.f()}this.children.length=0}},{key:"removeChild",value:function(t){return this.contains(t)?this.removeChildAt(this.children.indexOf(t)):t}},{key:"removeChildAt",value:function(t){if(t<0||t>=this.children.length)return null;this._needsSort=!0;var e=this.children.splice(t,1)[0];return this._childrenSet.delete(e),this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null,e}},{key:"sortChildren",value:function(t){this._needsSort&&(this.children.sort(t),this._needsSort=!1)}},{key:"beforeRender",value:function(t){(0,s.Z)((0,h.Z)(i.prototype),"beforeRender",this).call(this,t);var e,n=(0,o.Z)(this.children);try{for(n.s();!(e=n.n()).done;){e.value.beforeRender(t)}}catch(l){n.e(l)}finally{n.f()}}},{key:"afterRender",value:function(t){(0,s.Z)((0,h.Z)(i.prototype),"afterRender",this).call(this,t);var e,n=(0,o.Z)(this.children);try{for(n.s();!(e=n.n()).done;){e.value.afterRender(t)}}catch(l){n.e(l)}finally{n.f()}}},{key:"_createTransforms",value:function(){return{dvs:(0,c.c)()}}},{key:"onAttach",value:function(){(0,s.Z)((0,h.Z)(i.prototype),"onAttach",this).call(this);var t,e=this.stage,n=(0,o.Z)(this.children);try{for(n.s();!(t=n.n()).done;){t.value.stage=e}}catch(l){n.e(l)}finally{n.f()}}},{key:"onDetach",value:function(){(0,s.Z)((0,h.Z)(i.prototype),"onDetach",this).call(this);var t,e=(0,o.Z)(this.children);try{for(e.s();!(t=e.n()).done;){t.value.stage=null}}catch(n){e.e(n)}finally{e.f()}}},{key:"renderChildren",value:function(t){var e,i=(0,o.Z)(this.children);try{for(i.s();!(e=i.n()).done;){e.value.processRender(t)}}catch(n){i.e(n)}finally{i.f()}}},{key:"createRenderParams",value:function(t){return(0,n.Z)((0,n.Z)({},t),{},{blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:t.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition,highlightGradient:this._highlightGradient||t.highlightGradient})}}]),i}(d.s)},3453:function(t,e,i){i.d(e,{Z:function(){return d}});var n=i(29439),o=i(15671),l=i(43144),r=i(32718),s=i(94109),h=i(17615),a=i(8548),u=i(371),c=r.Z.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");var f=[0,0,0,0],d=function(){function t(){(0,o.Z)(this,t),this._convertedHighlightOptions={fillColor:[.2*.75,.6*.75,.675,.75],outlineColor:[.2*.9,.54,.81,.9],outlinePosition:h.OQ.outlinePosition,outlineWidth:h.OQ.outlineWidth,innerHaloWidth:h.OQ.innerHaloWidth,outerHaloWidth:h.OQ.outerHaloWidth},this._shadeTexChanged=!0,this._texelData=new Uint8Array(4*h.Ft),this._minMaxDistance=[0,0]}return(0,l.Z)(t,[{key:"setHighlightOptions",value:function(t){var e=this._convertedHighlightOptions;!function(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=h.OQ.outlineWidth,e.outerHaloWidth=h.OQ.outerHaloWidth,e.innerHaloWidth=h.OQ.innerHaloWidth,e.outlinePosition=h.OQ.outlinePosition}(t,e);var i,o=e.outlinePosition-e.outlineWidth/2-e.outerHaloWidth,l=e.outlinePosition-e.outlineWidth/2,r=e.outlinePosition+e.outlineWidth/2,s=e.outlinePosition+e.outlineWidth/2+e.innerHaloWidth,a=Math.sqrt(Math.PI/2)*h.tM,u=Math.abs(o)>a?Math.round(10*(Math.abs(o)-a))/10:0,d=Math.abs(s)>a?Math.round(10*(Math.abs(s)-a))/10:0;u&&!d?c.error("The outer rim of the highlight is "+u+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!u&&d?c.error("The inner rim of the highlight is "+d+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):u&&d&&c.error("The highlight is "+Math.max(u,d)+"px away from the edge of the feature; consider reducing some width values.");var _=[void 0,void 0,void 0,void 0];function g(t,e,i){_[0]=(1-i)*t[0]+i*e[0],_[1]=(1-i)*t[1]+i*e[1],_[2]=(1-i)*t[2]+i*e[2],_[3]=(1-i)*t[3]+i*e[3]}for(var v=this._texelData,p=0;p<h.Ft;++p){var y,C,m,k;(i=o+p/(h.Ft-1)*(s-o))<o?(_[4*p+0]=0,_[4*p+1]=0,_[4*p+2]=0,_[4*p+3]=0):i<l?g(f,e.outlineColor,(i-o)/(l-o)):i<r?(y=e.outlineColor,C=(0,n.Z)(y,4),_[0]=C[0],_[1]=C[1],_[2]=C[2],_[3]=C[3]):i<s?g(e.outlineColor,e.fillColor,(i-r)/(s-r)):(m=e.fillColor,k=(0,n.Z)(m,4),_[4*p+0]=k[0],_[4*p+1]=k[1],_[4*p+2]=k[2],_[4*p+3]=k[3]),v[4*p+0]=255*_[0],v[4*p+1]=255*_[1],v[4*p+2]=255*_[2],v[4*p+3]=255*_[3]}this._minMaxDistance[0]=o,this._minMaxDistance[1]=s,this._shadeTexChanged=!0}},{key:"applyHighlightOptions",value:function(t,e){this._shadeTex||(this._shadeTex=new u.x(t,{target:a.No.TEXTURE_2D,pixelFormat:a.VI.RGBA,dataType:a.Br.UNSIGNED_BYTE,wrapMode:a.e8.CLAMP_TO_EDGE,width:h.Ft,height:1,samplingMode:a.cw.LINEAR})),this._shadeTexChanged&&(this._shadeTex.updateData(0,0,0,h.Ft,1,this._texelData),this._shadeTexChanged=!1),t.bindTexture(this._shadeTex,s.Jw),e.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}},{key:"destroy",value:function(){var t;null!==(t=this._shadeTex)&&void 0!==t&&t.dispose(),this._shadeTex=null}}]),t}()},17615:function(t,e,i){i.d(e,{Ft:function(){return r},OQ:function(){return s},QU:function(){return l},n5:function(){return o},tM:function(){return n}});var n=1,o=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r=256,s={outlineWidth:1.3,outerHaloWidth:.4,innerHaloWidth:.4,outlinePosition:0}}}]);
//# sourceMappingURL=3624.f21c9122.chunk.js.map