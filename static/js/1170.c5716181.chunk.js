"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1170],{74509:function(e,t,n){n.d(t,{Jn:function(){return u},RL:function(){return l},VW:function(){return o},W_:function(){return v},jG:function(){return h},tR:function(){return y},tq:function(){return f},vQ:function(){return c},zx:function(){return d}});var r=n(92026),i=n(88152);function a(e){return e?h:y}function o(e,t){return function(e,t){return(0,r.Wi)(t)||!t.mode?a(e).mode:t.mode}(!!(0,r.pC)(e)&&e.hasZ,t)}function u(e,t){return function(e,t){return(0,r.pC)(t)?t:a(e)}(!!(0,r.pC)(e)&&!!e.hasZ,t)}function l(e){var t=s(e),n=o(e.geometry,t);return{mode:n,offset:(0,r.pC)(t)&&"on-the-ground"!==n?(0,r.Pt)(t.offset,0)*(0,i.Z7)((0,r.Pt)(t.unit,"meters")):0}}function s(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function c(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return p(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,n,r)}function d(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return p(e,t[0],t[1],t.length>2?t[2]:0,n,r,i)}function p(e,t,n,i,a,o){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(!(0,r.Wi)(o)){var l=(0,r.pC)(u)?u.mode:"absolute-height";return"on-the-ground"===l?0:function(e,t,n,i,a,o,u,l){var s=(0,r.pC)(u)&&(0,r.pC)(u.offset)?u.offset:0;switch(l){case"absolute-height":return e-s;case"relative-to-ground":return e-((0,r.Pt)(o.elevationProvider.getElevation(t,n,i,a,"ground"),0)+s);case"relative-to-scene":return e-((0,r.Pt)(o.elevationProvider.getElevation(t,n,i,a,"scene"),0)+s)}}(f(t,n,i,a,e,o).absoluteZ,t,n,i,a,e,u,l)}}function f(e,t,n,i,a,o){var u=(0,r.pC)(o.offset)?o.offset:0;switch(o.mode){case"absolute-height":return{absoluteZ:n+u,elevation:0};case"on-the-ground":var l=(0,r.Pt)(a.elevationProvider.getElevation(e,t,0,i,"ground"),0);return{absoluteZ:l,elevation:l};case"relative-to-ground":var s=(0,r.Pt)(a.elevationProvider.getElevation(e,t,n,i,"ground"),0);return{absoluteZ:n+s+u,elevation:s};case"relative-to-scene":var c=(0,r.Pt)(a.elevationProvider.getElevation(e,t,n,i,"scene"),0);return{absoluteZ:n+c+u,elevation:c}}}function v(e,t){if((0,r.Wi)(t))return!1;var n=t.mode;return(0,r.pC)(n)&&("scene"===e&&"relative-to-scene"===n||"ground"===e&&"absolute-height"!==n)}var h={mode:"absolute-height",offset:0},y={mode:"on-the-ground",offset:null}},42069:function(e,t,n){n.d(t,{A:function(){return b}});var r=n(74165),i=n(15861),a=n(15671),o=n(43144),u=n(11752),l=n(61120),s=n(60136),c=n(29388),d=n(27366),p=n(42537),f=n(66978),v=n(94172),h=n(49861),y=(n(25243),n(63780),n(69912)),g=n(5354),b=function(e){var t=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).slicePlaneEnabled=!1,e.supportsHeightUnitConversion=!1,e}return(0,o.Z)(n,[{key:"postscript",value:function(e){(0,u.Z)((0,l.Z)(n.prototype),"postscript",this).call(this,e),(0,g.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}},{key:"_validateHeightModelInfo",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,a=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,n=t.signal,this.handles.add((0,p.kB)((function(){return t.abort()}))),e.next=4,(0,v.N1)((function(){var e;return null===(e=a.view.defaultsFromMap)||void 0===e?void 0:e.heightModelInfoReady}),n);case 4:if((0,f.k_)(n),!(i=(0,g.Wt)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion))){e.next=8;break}throw i;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"canResume",value:function(){var e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return(0,u.Z)((0,l.Z)(n.prototype),"canResume",this).call(this)&&(!e||!e.minScale||!e.maxScale||e.minScale>=e.maxScale)}},{key:"getSuspendInfo",value:function(){var e=(0,u.Z)((0,l.Z)(n.prototype),"getSuspendInfo",this).call(this),t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return t&&t.minScale&&t.maxScale&&t.minScale<t.maxScale&&(e.outsideScaleRange=!0),e}}]),n}(e);return(0,d._)([(0,h.Cb)()],t.prototype,"view",void 0),(0,d._)([(0,h.Cb)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,d._)([(0,y.j)("esri.views.3d.layers.LayerView3D")],t)}},60487:function(e,t,n){n.d(t,{W:function(){return v}});var r=n(74165),i=n(37762),a=n(15861),o=(n(59486),n(92026)),u=n(66978),l=n(65618),s=n(74509),c=n(69691),d=n(78935),p=n(8821),f=n(78952);function v(e,t,n,r,i){return h.apply(this,arguments)}function h(){return h=(0,a.Z)((0,r.Z)().mark((function e(t,n,a,l,d){var f,v,h,m,Z,k,C,w,x,I,S,P,R,_,E,W,O,j,L,q,D,z,G,H,M;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=t.elevationProvider,v=t.renderCoordsHelper,h=t.spatialReference,m=n.elevationInfo,Z=(0,p.WI)(m,!0),e.next=7,(0,p.kr)(Z,h,d);case 7:k=e.sent,(0,u.k_)(d),C=[],w=new Set,x=new Set,I=(0,i.Z)(l),e.prev=11,I.s();case 13:if((S=I.n()).done){e.next=28;break}if(P=S.value,R=P.objectId,_=P.points,E=a(R),!(0,o.Wi)(E)){e.next=21;break}W=(0,i.Z)(_);try{for(W.s();!(O=W.n()).done;)j=O.value,C.push(j[2])}catch(r){W.e(r)}finally{W.f()}return w.add(R),e.abrupt("continue",26);case 21:E.isDraped&&x.add(R),L=E.graphic.geometry,y.setFromElevationInfo((0,s.Jn)(L,m)),y.updateFeatureExpressionInfoContext(k,E.graphic,n),g.spatialReference=t.spatialReference,q=(0,i.Z)(_);try{for(q.s();!(D=q.n()).done;)z=D.value,G=z.x,H=z.y,M=z.z,g.x=G,g.y=H,g.z=null!==M&&void 0!==M?M:0,(0,c.qZ)(g,f,y,v,b),C.push(b.z)}catch(r){q.e(r)}finally{q.f()}case 26:e.next=13;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(11),I.e(e.t0);case 33:return e.prev=33,I.f(),e.finish(33);case 36:return e.abrupt("return",{elevations:C,drapedObjectIds:x,failedObjectIds:w});case 37:case"end":return e.stop()}}),e,null,[[11,30,33,36]])}))),h.apply(this,arguments)}var y=new d.o,g=(0,l.Tx)(0,0,0,f.Z.WGS84),b=new c.Lm},77098:function(e,t,n){n.d(t,{c:function(){return s}});var r=n(37762),i=n(74165),a=n(15861),o=n(92026),u=n(66978),l=n(819);function s(e,t,n){return c.apply(this,arguments)}function c(){return c=(0,a.Z)((0,i.Z)().mark((function e(t,n,s){var c,p,f,v,h,y,g,b,m,Z,k,C,w,x,I,S,P,R,_,E,W,O;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,o.Wi)(t)&&0!==n.candidates.length){e.next=2;break}return e.abrupt("return",d);case 2:p=null!==(c=t.graphics3DGraphicsByObjectID)&&void 0!==c?c:t.graphics3DGraphics,f=[],v=[],h=t.renderer,y=(0,o.pC)(h)&&"arcadeRequired"in h&&h.arcadeRequired?(0,l.LC)():null,g=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n,r){var a,u,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.graphic,u=r.graphics3DSymbol,e.next=3,y;case 3:return l=e.sent,e.next=6,t.getRenderingInfoAsync(a,h,l,{signal:s});case 6:return c=e.sent,e.abrupt("return",(0,o.Wi)(c)?[]:u.queryForSnapping(n,m,c,s));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=n.candidates,m=n.spatialReference,Z=0;case 4:if(!(Z<b.length)){e.next=13;break}if(k=b[Z],C=k.objectId,w="number"==typeof C?null===p||void 0===p?void 0:p.get(C):void 0,!(0,o.Wi)(w)){e.next=8;break}return e.abrupt("continue",10);case 8:w.graphics3DSymbol.symbologySnappingSupported&&(f.push(g(k,w)),v.push(Z));case 10:++Z,e.next=4;break;case 13:if(0!==f.length){e.next=15;break}return e.abrupt("return",d);case 15:return e.next=17,Promise.all(f);case 17:for(x=e.sent,(0,u.k_)(s),I=[],S=[],P=0;P<x.length;++P){R=x[P],_=v[P],E=(0,r.Z)(R);try{for(E.s();!(W=E.n()).done;)O=W.value,I.push(O),S.push(_)}catch(j){E.e(j)}finally{E.f()}}return e.abrupt("return",{candidates:I,sourceCandidateIndices:S});case 22:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}var d={candidates:[],sourceCandidateIndices:[]}},61712:function(e,t,n){n.d(t,{E:function(){return o}});var r=n(92026),i=n(81753),a=n(67387);function o(e){var t=e.view.spatialReference,n=e.layer.fullExtent,o=(0,r.pC)(n)&&n.spatialReference;if((0,r.Wi)(n)||!o)return Promise.resolve(null);if(o.equals(t))return Promise.resolve(n.clone());var u=(0,i.iV)(n,t);return(0,r.pC)(u)?Promise.resolve(u):e.view.state.isLocal?(0,a.projectGeometry)(n,t,e.layer.portalItem).then((function(t){return!e.destroyed&&t?t:null})).catch((function(){return null})):Promise.resolve(null)}},67581:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(15671),i=n(43144),a=n(60136),o=n(29388),u=n(27366),l=n(85015),s=n(91505),c=n(41691),d=n(79056),p=n(32718),f=n(92026),v=n(67426),h=n(49861),y=(n(25243),n(63780),n(69912)),g=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).layer=null,i.parent=null,i}return(0,i.Z)(n,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){if("layerview:create-error"!==t.name){var n=e.layer&&e.layer.id||"no id",r=e.layer&&e.layer.title||"no title";p.Z.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '".concat(r,"', id: '").concat(n,"')"),t)}}))}},{key:"fullOpacity",get:function(){return(0,f.Pt)(this.get("layer.opacity"),1)*(0,f.Pt)(this.get("parent.fullOpacity"),1)}},{key:"suspended",get:function(){return!this.canResume()}},{key:"suspendInfo",get:function(){return this.getSuspendInfo()}},{key:"legendEnabled",get:function(){var e;return!this.suspended&&!0===(null===(e=this.layer)||void 0===e?void 0:e.legendEnabled)}},{key:"updating",get:function(){var e;return!((null===(e=this.updatingHandles)||void 0===e||!e.updating)&&!this.isUpdating())}},{key:"updatingProgress",get:function(){return this.updating?0:1}},{key:"visible",get:function(){var e;return!0===(null===(e=this.layer)||void 0===e?void 0:e.visible)},set:function(e){this._overrideIfSome("visible",e)}},{key:"canResume",value:function(){var e,t,n;return this.visible&&(null===(e=this.layer)||void 0===e?void 0:e.loaded)&&!(null!==(t=this.parent)&&void 0!==t&&t.suspended)&&(null===(n=this.view)||void 0===n?void 0:n.ready)||!1}},{key:"getSuspendInfo",value:function(){var e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}},{key:"isUpdating",value:function(){return!1}}]),n}((0,c.p)((0,d.IG)((0,v.v)(s.Z.EventedMixin(l.Z)))));(0,u._)([(0,h.Cb)()],g.prototype,"fullOpacity",null),(0,u._)([(0,h.Cb)()],g.prototype,"layer",void 0),(0,u._)([(0,h.Cb)()],g.prototype,"parent",void 0),(0,u._)([(0,h.Cb)({readOnly:!0})],g.prototype,"suspended",null),(0,u._)([(0,h.Cb)({readOnly:!0})],g.prototype,"suspendInfo",null),(0,u._)([(0,h.Cb)({readOnly:!0})],g.prototype,"legendEnabled",null),(0,u._)([(0,h.Cb)({type:Boolean,readOnly:!0})],g.prototype,"updating",null),(0,u._)([(0,h.Cb)({readOnly:!0})],g.prototype,"updatingProgress",null),(0,u._)([(0,h.Cb)()],g.prototype,"visible",null),(0,u._)([(0,h.Cb)()],g.prototype,"view",void 0);var b=g=(0,u._)([(0,y.j)("esri.views.layers.LayerView")],g)}}]);
//# sourceMappingURL=1170.c5716181.chunk.js.map